name: ðŸš€ Deploy to Develop on push
on:
  push:
    branches:
      - develop
      - master
      - staging
  pull_request:
    branches:
      - develop
      - master
      - staging
  workflow_dispatch:
    inputs:
      environment:
        description: "Environment to deploy"
        type: environment
        required: true
jobs:
  environment:
    name: Select Environment
    if: ${{ !startsWith(github.ref, 'refs/pull/') }}
    runs-on: ubuntu-latest
    steps:
      - name: Select deployment environment
        id: branch_check
        run: |
          echo "Running on branch ${{ github.ref }}"
          if [ "${{ inputs.environment }}" != "" ]; then
            echo "env_name=${{ inputs.environment }}" >> $GITHUB_OUTPUT
          elif [ "${{ github.ref }}" == "refs/heads/develop" ]; then
            echo "env_name=develop" >> $GITHUB_OUTPUT
          elif [ "${{ github.ref }}" == "refs/heads/staging" ]; then
            echo "env_name=staging" >> $GITHUB_OUTPUT
          elif [ "${{ github.ref }}" == "refs/heads/master" ]; then
            echo "env_name=production" >> $GITHUB_OUTPUT
          else
            echo "ERROR: The environment is not defined"; exit 1;
          fi
    outputs:
      env_name: ${{ steps.branch_check.outputs.env_name }}

  # build:
  #   name: React Node.JS Build
  #   runs-on: ubuntu-latest
  #   strategy:
  #     matrix:
  #       node-version: [20.x]

  #   steps:
  #     - name: Checkout the code
  #       uses: actions/checkout@v4

  #     - name: Use Node.js ${{ matrix.node-version }}
  #       uses: actions/setup-node@v4
  #       with:
  #         node-version: ${{ matrix.node-version }}
  #         cache: npm

  #     - name: clean cache
  #       run: npm cache clean --force
  #     - name: npm install
  #       run: npm install
  #     - name: Run build
  #       run: |
  #         npm run build
