(this["webpackJsonpledgerely.com"]=this["webpackJsonpledgerely.com"]||[]).push([[27,5],{113:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return o}));var n=a(53),c=a.n(n),s=[{id:"bankAccounts",Table:"banks",config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}}},label:"Bank accounts",TableRows:["bank_id","bank_name","bank_account_number","bank_swift_code","bank_account_type","bank_country","bank_sort","bank_locale","bank_currency"],defaultValues:[{bank_sort:"0"}],cellWidth:[4,13,11,11,13,13,5,13,13]},{id:"creditCardAccounts",Table:"credit_cards",label:"Credit cards",TableRows:["credit_card_id","credit_card_name","credit_card_number","credit_card_start_date","credit_card_end_date","credit_card_payment_date","credit_card_annual_interest","credit_card_locale","credit_card_currency"],defaultValues:[{credit_card_annual_interest:"48"}],cellWidth:[4,13,11,8,8,8,8,13,13]},{id:"incExpCat",config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}}},Table:"income_expense_category",label:"Income / expense categories",TableRows:["inc_exp_cat_id","inc_exp_cat_name","inc_exp_cat_is_metric","inc_exp_cat_is_plan_metric"],defaultValues:[{inc_exp_cat_is_metric:"0"},{inc_exp_cat_is_plan_metric:"0"}],cellWidth:[4,13,13,13]},{id:"incExpTemp",config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}}},Table:"income_expense_template",label:"Income expense template",TableRows:["template_id","temp_inc_exp_name","temp_amount","temp_inc_exp_type","temp_inc_exp_date","temp_category","temp_bank"],defaultValues:[{temp_inc_exp_date:"1"},{temp_inc_exp_type:"Dr"},{temp_amount:"0.00"},{temp_inc_exp_name:""}],cellWidth:[4,13,13,13,5,13,13]}],r=[{id:26,config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}}},Table:"income_expense",label:"Expenditures for selected month",TableRows:["inc_exp_id","inc_exp_name","inc_exp_amount","inc_exp_plan_amount","inc_exp_type","inc_exp_date","inc_exp_category","inc_exp_bank","inc_exp_comments"],TableAliasRows:[],defaultValues:[{inc_exp_type:"Dr"},{inc_exp_amount:0},{inc_exp_plan_amount:0},{inc_exp_date:c()(new Date).format("YYYY-MM-DD")}],rowElements:["checkbox","textbox","number","label",null,"date",{fetch:{dropDownList:[]},searchable:!0},{fetch:{dropDownList:[]},searchable:!0},"textbox"],showTooltipFor:["inc_exp_name","inc_exp_comments"]}],o=[{id:27,config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}},searchable:!0},Table:"credit_card_transactions",label:"Credit card transactions",TableRows:["cc_id","cc_transaction","cc_date","cc_opening_balance","cc_payment_credits","cc_purchases","cc_taxes_interest","cc_expected_balance","cc_for_card","cc_inc_exp_cat","cc_transaction_status","cc_comments","cc_added_at"],TableAliasRows:[],rowElements:["checkbox","textbox","date","number","number","number","number","label",{fetch:{dropDownList:[]},searchable:!0},{fetch:{dropDownList:[]},searchable:!0},{fetch:{dropDownList:[{checked:!1,id:"1",value:"Settled"},{checked:!1,id:"0",value:"Pending"},{checked:!1,id:"2",value:"Part payment"}]}},"textbox","relativeTime"],defaultValues:[{cc_date:c()().format("YYYY-MM-DD")},{cc_opening_balance:0},{cc_payment_credits:0},{cc_purchases:0},{cc_taxes_interest:0},{cc_expected_balance:0},{cc_transaction_status:"0"}],showTooltipFor:["cc_transaction","cc_comments"]}]},137:function(e,t,a){"use strict";var n=a(25),c=a(30),s=a(1),r=a(1243),o=a(41),l=a(0),i=["icon","intlId","children"];t.a=function(e){var t=e.icon,a=e.intlId,d=e.children,u=Object(c.a)(e,i),b=Object(s.useContext)(o.a);return Object(l.jsx)("div",Object(n.a)(Object(n.a)({},u),{},{className:"bg-gradient ".concat("dark"===b.userData.theme?"bg-dark darkBoxShadow":"bg-white lightBoxShadow"," mt-2 ps-3 py-2 rounded-pill"),children:Object(l.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(l.jsxs)("div",{className:"d-flex align-items-center",children:[Object(l.jsx)("i",{className:"".concat(t," fa-1x")}),Object(l.jsx)("div",{className:"ps-2 mb-0",children:Object(l.jsx)(r.a,{id:a,defaultMessage:a})})]}),d]})}))}},376:function(e,t,a){"use strict";a.r(t),a.d(t,"AccountContext",(function(){return we}));var n=a(28),c=a(29),s=a(26),r=a(1),o=a.n(r),l=a(55),i=a.n(l),d=a(50),u=a(39),b=a(496),j=a.n(b),m=a(53),f=a.n(m),p=a(253),h=a.n(p),g=a(1243),O=a(448),x=a(75),v=a(41),y=a(1246),M=a(902),_=a(0),N=Object(O.c)((function(e){var t=e.intl,a=Object(r.useContext)(we),n=a.chartData,c=a.bankDetails,o=a.onMonthYearSelected,l=a.monthYearSelected,i=Object(r.useContext)(x.a),b=Object(r.useContext)(v.a),m=Object(r.useRef)(null),p=Object(r.useState)([]),O=Object(s.a)(p,2),N=O[0],D=O[1],w=Object(r.useState)([]),S=Object(s.a)(w,2),Y=S[0],k=S[1],C=Object(r.useState)(0),T=Object(s.a)(C,2),P=T[0],I=T[1],F=Object(r.useState)({}),E=Object(s.a)(F,2),L=E[0],R=E[1],B=getComputedStyle(document.documentElement).getPropertyValue("--bs-indigo"),A=getComputedStyle(document.documentElement).getPropertyValue("--bs-pink"),V="debit-card-income";Object(r.useEffect)((function(){I(m.current.clientWidth)}),[]),Object(r.useEffect)((function(){var e,t,a=function(e){var t=e.category,a=e.total;return{month:e.dated,label:d.a.shorten(t,15),value:Number(a),isEmpty:Number(a)<=0}},s=n.category.map((function(e){var t,n,c,s;return{month:e.month,cData:(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.expense)||void 0===n?void 0:n.length)>0?e.data.expense.map((function(t){return a({category:t.category,total:t.total,dated:e.month})})):[a({category:"No Data",total:0,dated:null})],creditData:(null===e||void 0===e||null===(c=e.data)||void 0===c||null===(s=c.income)||void 0===s?void 0:s.length)>0?e.data.income.map((function(t){return a({category:t.category,total:t.total,dated:e.month})})):[a({category:"No Data",total:0,dated:null})]}}));D(s);var r=[{color:B,points:n.income.map((function(e){var t=e.month,a=e.measureDate;return{month:t,x:e.monthStart,z:e.monthEnd,y:e.totalIncome,metricTotal:e.metricIncome,measureDate:new Date(a)}}))},{color:A,points:n.income.map((function(e){return{month:e.month,x:e.monthStart,z:e.monthEnd,y:e.metricIncome}}))}];k([]);var o=r[1].points.filter((function(e){return 0!==e.y})),l=new Date(null===(e=o[o.length-1])||void 0===e?void 0:e.x),i=new Date(null===(t=o[0])||void 0===t?void 0:t.z),u=H(l,i);setTimeout((function(){var e,t;k(r);var a=r[0].points.reduce((function(e,t){return e+t.metricTotal}),0),n=d.a.countryCurrencyLacSeperator(c[0].bank_locale,c[0].bank_currency,a/(40*u)||0,2),s=d.a.countryCurrencyLacSeperator(c[0].bank_locale,c[0].bank_currency,a/(5*u)||0,2),o=d.a.countryCurrencyLacSeperator(c[0].bank_locale,c[0].bank_currency,a/u||0,2);R({hourly:n,daily:s,weekly:o}),null!==(e=m.current)&&void 0!==e&&null!==(t=e.childNodes[2])&&void 0!==t&&t.childNodes[0]&&(m.current.childNodes[2].childNodes[0].style.height=260)}),1)}),[n,i]),Object(r.useEffect)((function(){if(Y.length>0&&N.length>0){for(var e,t,a,n=function(e){var t=e.target.id;o(t)},c=null===(e=m.current)||void 0===e||null===(t=e.querySelector("#".concat(V," svg")))||void 0===t?void 0:t.getElementsByClassName("axis")[0].children,s=c&&(null===(a=Array.from(c))||void 0===a?void 0:a.filter((function(e){return e.classList.contains("tick")})).reverse()),r=Object(u.a)(Y[1].points),i=0;i<s.length;i++){var d;s[i].children[1].classList.remove("colored"),s[i].children[1].setAttribute("id",null===(d=r[i])||void 0===d?void 0:d.month),s[i].children[1].addEventListener("click",n)}if(l){var b,j=s&&(null===(b=Array.from(s))||void 0===b?void 0:b.filter((function(e){return e.children[1].id===l}))[0]);j&&j.getElementsByTagName("text")[0].classList.add("colored")}return function(){for(var e=0;e<s.length;e++)s[e].children[1].removeEventListener("click",n)}}}),[l,Y,N]);var H=function(e,t){var a=Math.floor((t-e)/864e5);return Math.ceil(a/7)||1},z=d.a.donutChartColors,W=function(e,t){var a=isFinite(Math[t].apply(Math,Object(u.a)(e)))?Math[t].apply(Math,Object(u.a)(e)):0;return a=d.a.countryCurrencyLacSeperator(c[0].bank_locale,c[0].bank_currency,a,2)},G=function(e){var a=e.i18Key,n=e.value;return Object(_.jsxs)("div",{className:"position-relative small py-4",children:[t.formatMessage({id:a,defaultMessage:a}),Object(_.jsx)("span",{title:n,className:"position-absolute top-0 start-50 translate-middle rounded-pill bni-bg bni-text w-100 py-2 text-break",children:n})]})};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{ref:m,children:Y.length>0&&N.length>0&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"badge bni-bg bni-text",children:Object(_.jsx)(g.a,{id:"incomeMetrics",defaultMessage:"incomeMetrics"})}),Object(_.jsxs)(y.a,{className:"mt-3",children:[Object(_.jsx)(M.a,{lg:2,sm:4,xs:6,className:"py-2 text-center",children:Object(_.jsx)(G,{i18Key:"total",value:function(e){var t=e.reduce((function(e,t){return e+t.metricTotal}),0);return t=d.a.countryCurrencyLacSeperator(c[0].bank_locale,c[0].bank_currency,t,2)}(Y[0].points)})}),Object(_.jsx)(M.a,{lg:2,sm:4,xs:6,className:"py-2 text-center",children:Object(_.jsx)(G,{i18Key:"highest",value:W(Y[0].points.filter((function(e){return 0!==e.metricTotal})).map((function(e){return e.metricTotal})),"max")})}),Object(_.jsx)(M.a,{lg:2,sm:4,xs:6,className:"py-2 text-center",children:Object(_.jsx)(G,{i18Key:"lowest",value:W(Y[0].points.filter((function(e){return 0!==e.metricTotal})).map((function(e){return e.metricTotal})),"min")})}),Object(_.jsx)(M.a,{lg:2,sm:4,xs:6,className:"py-2 text-center",children:Object(_.jsx)(G,{i18Key:"weekly",value:L.weekly})}),Object(_.jsx)(M.a,{lg:2,sm:4,xs:6,className:"py-2 text-center",children:Object(_.jsx)(G,{i18Key:"daily",value:L.daily})}),Object(_.jsx)(M.a,{lg:2,sm:4,xs:6,className:"py-2 text-center",children:Object(_.jsx)(G,{i18Key:"hourly",value:L.hourly})})]}),Object(_.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(_.jsx)("div",{children:Object(_.jsxs)("span",{children:[Object(_.jsx)("i",{style:{color:B},className:"fa fa-circle me-2",title:t.formatMessage({id:"credit",defaultMessage:"credit"})}),t.formatMessage({id:"credit",defaultMessage:"credit"})]})}),Object(_.jsxs)("div",{className:"fst-italic text-wrap",children:[Object(_.jsx)("sup",{className:"text-danger",children:"*"}),t.formatMessage({id:"CreditInclusiveIncome",defaultMessage:"CreditInclusiveIncome"})]}),Object(_.jsx)("div",{children:Object(_.jsxs)("span",{children:[Object(_.jsx)("i",{style:{color:A},className:"fa fa-circle me-2",title:t.formatMessage({id:"income",defaultMessage:"income"})}),t.formatMessage({id:"income",defaultMessage:"income"})]})})]}),Object(_.jsx)(h.a,{data:Y,id:V,margins:{top:50,right:P>450?80:30,bottom:50,left:135},width:P,isDate:!0,height:250,xLabel:t.formatMessage({id:"month",defaultMessage:"month"}),yLabel:"".concat(t.formatMessage({id:"credit",defaultMessage:"credit"})," & ").concat(t.formatMessage({id:"income",defaultMessage:"income"})),onPointHover:function(e){return d.a.countryCurrencyLacSeperator(c[0].bank_locale,c[0].bank_currency,e.y,2)},tooltipClass:"line-chart-tooltip",ticks:N.length,xDisplay:function(e,a){return function(e){var a="";if(P>450){var n=(a=f()(e).format("MMM")).toLocaleString("default",{month:"short"}).toLowerCase(),c=e.getFullYear();a="".concat(t.formatMessage({id:n,defaultMessage:n})," ").concat(c)}else a=f()(e).format("M");return a}(e)},onPointClick:function(e,t){o(t.month)}})]})}),Object(_.jsx)("div",{className:"x-scroll",children:N.length>0&&Object(_.jsx)("div",{className:"d-flex align-items-center pt-2 ps-3",children:N.map((function(e,a){return Object(_.jsxs)("div",{className:"chartWrapper",children:[Object(_.jsx)("div",{className:"text-center pt-10 pb-10",children:Object(_.jsx)("button",{className:"btn btn-sm btn-bni ".concat(String(l)===String(e.month)?"active":""),onClick:function(){o(e.month)},children:"".concat(t.formatMessage({id:e.month.split("-")[0].toLowerCase(),defaultMessage:e.month.split("-")[0].toLowerCase()})," ").concat(e.month.split("-")[1])})}),Object(_.jsxs)("div",{className:"floatingChartWrapper",children:[a<1&&Object(_.jsx)("div",{className:"floatingChartHeader btn btn-sm btn-bni",children:Object(_.jsx)(g.a,{id:"expense",defaultMessage:"expense"})}),Object(_.jsx)(j.a,{strokeColor:"".concat("dark"===b.userData.theme?"#000":"#eee"),innerRadius:.7,outerRadius:.9,clickToggle:!0,colors:z,height:220,width:220,legend:!1,data:e.cData,formatValues:function(e,t){return"".concat(d.a.countryCurrencyLacSeperator(c[0].bank_locale,c[0].bank_currency,e,2))}})]}),Object(_.jsxs)("div",{className:"floatingChartWrapper",children:[a<1&&Object(_.jsx)("div",{className:"floatingChartHeader btn btn-sm btn-bni",children:Object(_.jsx)(g.a,{id:"income",defaultMessage:"income"})}),Object(_.jsx)(j.a,{strokeColor:"".concat("dark"===b.userData.theme?"#000":"#eee"),innerRadius:.7,outerRadius:.9,clickToggle:!0,colors:z,height:220,width:220,legend:!1,data:e.creditData,formatValues:function(e,t){return"".concat(d.a.countryCurrencyLacSeperator(c[0].bank_locale,c[0].bank_currency,e,2))}})]})]},function(e){return"chart-".concat(e)}(a))}))})})]})})),D=a(25),w=(a(510),a(206)),S=a.n(w),Y=Object(O.c)((function(e){var t,a=Object(r.useContext)(we),n=Object(r.useContext)(x.a),c=e.data,o=e.intl,l=a.ccMonthYearSelected,i=a.ccDetails,u=a.setCcDetails,b=a.onCcMonthYearSelected,j=Object(r.useState)(0),m=Object(s.a)(j,2),p=m[0],O=m[1],v=Object(r.useState)([]),y=Object(s.a)(v,2),M=y[0],N=y[1],w=Object(r.useState)(!0),Y=Object(s.a)(w,2),k=Y[0],C=Y[1],T=Object(r.useRef)(null),P=getComputedStyle(document.documentElement).getPropertyValue("--bs-danger"),I=getComputedStyle(document.documentElement).getPropertyValue("--bs-primary"),F=getComputedStyle(document.documentElement).getPropertyValue("--bs-success"),E=getComputedStyle(document.documentElement).getPropertyValue("--bs-warning"),L=Object(r.useState)({}),R=Object(s.a)(L,2),B=R[0],A=R[1],V="credit-card-usage";Object(r.useEffect)((function(){var e=l.split("-"),t=Object(s.a)(e,2),a=t[0],n=t[1],c=d.a.strToNumMonth[a],r=Number(i.credit_card_start_date),o=Number(i.credit_card_end_date),b=new Date("".concat(Number(n),"-").concat(Number(c),"-").concat(o).replace(/-/g,"/")),j="".concat(b.getFullYear(),"-").concat(d.a.leadingZeros(b.getMonth()+1),"-").concat(d.a.leadingZeros(b.getDate())),m=b.setTime(b.getTime()-2592e6);m=new Date(m),m=new Date(m.setDate(r));var f="".concat(m.getFullYear(),"-").concat(d.a.leadingZeros(m.getMonth()+1),"-").concat(d.a.leadingZeros(m.getDate())),p=Number(i.credit_card_payment_date);p=p<10?"0".concat(p):p,p=new Date("".concat(p,"-").concat(l));var h=[(p=d.a.addMonths(p,1)).getFullYear(),p.getMonth()+1,p.getDate()],g=h[0],x=h[1],v=h[2];x=x<10?"0".concat(x):x,v=v<10?"0".concat(v):v,p="".concat(g,"-").concat(x,"-").concat(v),A({sDateStr:f,eDateStr:j,payDate:p}),u((function(e){return Object(D.a)(Object(D.a)({},e),{},{creditCardCycleStartDate:f,creditCardCycleEndDate:j})})),O(T.current.clientWidth)}),[l]),Object(r.useEffect)((function(){if(k&&M.length>0){for(var e,t,a,n=function(e){var t=e.target.id;b(t)},c=null===(e=T.current)||void 0===e||null===(t=e.querySelector("#".concat(V," svg")))||void 0===t?void 0:t.getElementsByClassName("axis")[0].children,s=c&&(null===(a=Array.from(c))||void 0===a?void 0:a.filter((function(e){return e.classList.contains("tick")}))),r=0;r<s.length;r++)s[r].children[1].classList.remove("colored"),s[r].children[1].setAttribute("id",M[0].points[r].month),s[r].children[1].addEventListener("click",n);if(l){var o,i=s&&(null===(o=Array.from(s))||void 0===o?void 0:o.filter((function(e){return e.children[1].id===l}))[0]);i&&i.getElementsByTagName("text")[0].classList.add("colored")}return function(){for(var e=0;e<s.length;e++)s[e].children[1].removeEventListener("click",n)}}}),[l,k,M]);var H=function(e){var t=l.split("-")[1],a=new Array(12).fill().map((function(e,t){return t>8?String(t+1):"0".concat(t+1)})).map((function(a){var n=d.a.monthToStr[a],s=c.filter((function(e){return e.month.split("-")[0].includes(n)})),r=s.length?s[0].cData.filter((function(t){return t.label===e}))[0].value:0;return{x:f()("".concat(t,"/").concat(a,"/01")).format("YYYY-MM-DD"),y:r,month:"".concat(n,"-").concat(t)}}));return a=S.a.flatten(a)},z=function(e){var t=H(e).reduce((function(e,t){return e+Number(t.y.toFixed(2))}),0);return t=d.a.countryCurrencyLacSeperator(i.credit_card_locale,i.credit_card_currency,t,2)};Object(r.useEffect)((function(){if(c.length>0){var e,t,a=[{color:P,points:H("Taxes & Interest")},{color:I,points:H("Purchases")},{color:F,points:H("Paid")},{color:E,points:H("Opening Balance")}];N([]),setTimeout((function(){N(a)}),100),null!==(e=T.current)&&void 0!==e&&null!==(t=e.childNodes[2])&&void 0!==t&&t.childNodes[0]&&(T.current.childNodes[2].childNodes[0].style.height=260)}}),[c]);var W=function(e){if(null!==o&&void 0!==o&&o.formatMessage){var t="";if(p>450){var a=(t=f()(e).format("MMM")).toLocaleString("default",{month:"short"}).toLowerCase(),n=e.getFullYear();t="".concat(o.formatMessage({id:a,defaultMessage:a})," ").concat(n)}else t=f()(e).format("M");return t}};return Object(_.jsxs)("div",{ref:T,className:"position-relative",children:[Object(_.jsx)("i",{className:"fa fa-".concat(k?"minus":"plus","-circle roundedButton"),onClick:function(){return C(!k)},style:k?{}:{position:"absolute",top:"15px"}}),k&&M.length>0&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"row rounded pt-2",children:[Object(_.jsxs)("div",{className:"col-md-3 small d-flex justify-content-between align-items-center",children:[Object(_.jsxs)("span",{children:[Object(_.jsx)("i",{className:"fa fa-circle text-warning me-2",title:o.formatMessage({id:"openingBalance",defaultMessage:"openingBalance"})}),Object(_.jsx)(g.a,{id:"openingBalance",defaultMessage:"openingBalance"})]}),Object(_.jsxs)("span",{children:[Object(_.jsx)("span",{className:"pe-2",children:Object(_.jsx)(g.a,{id:"year",defaultMessage:"year"})}),null===(t=c[0])||void 0===t?void 0:t.month.split("-")[1]]})]}),Object(_.jsxs)("div",{className:"col-md-3 small d-flex justify-content-between align-items-center",children:[Object(_.jsxs)("span",{children:[Object(_.jsx)("i",{className:"fa fa-circle text-primary me-2",title:o.formatMessage({id:"purchases",defaultMessage:"purchases"})}),Object(_.jsx)(g.a,{id:"purchases",defaultMessage:"purchases"})]}),Object(_.jsx)("span",{children:"".concat(z("Purchases"))})]}),Object(_.jsxs)("div",{className:"col-md-3 small d-flex justify-content-between align-items-center",children:[Object(_.jsxs)("span",{children:[Object(_.jsx)("i",{className:"fa fa-circle text-success me-2",title:o.formatMessage({id:"payments",defaultMessage:"payments"})}),Object(_.jsx)(g.a,{id:"payments",defaultMessage:"payments"})]}),Object(_.jsx)("span",{children:"".concat(z("Paid"))})]}),Object(_.jsxs)("div",{className:"col-md-3 small d-flex flex-nowrap justify-content-between align-items-center",children:[Object(_.jsxs)("span",{children:[Object(_.jsx)("i",{className:"fa fa-circle text-danger me-2",title:o.formatMessage({id:"taxesAndInterest",defaultMessage:"taxesAndInterest"})}),Object(_.jsx)(g.a,{id:"taxesAndInterest",defaultMessage:"taxesAndInterest"})]}),Object(_.jsx)("span",{children:"".concat(z("Taxes & Interest"))})]})]}),Object(_.jsx)(h.a,{data:M,id:V,margins:{top:50,right:p>450?80:30,bottom:50,left:135},width:p,isDate:!0,height:250,xLabel:o.formatMessage({id:"month",defaultMessage:"month"}),yLabel:o.formatMessage({id:"amount",defaultMessage:"amount"}),onPointHover:function(e){return d.a.countryCurrencyLacSeperator(n.localeLanguage,n.localeCurrency,e.y,2)},tooltipClass:"line-chart-tooltip",ticks:12,xDisplay:function(e,t){return W(e)},onPointClick:function(e,t){return b(t.month)}}),l&&B&&i&&B.payDate&&Object(_.jsx)("div",{className:"pt-4",children:Object(_.jsxs)("div",{className:"row mt-10",children:[Object(_.jsxs)("div",{className:"col-md-3 small d-flex justify-content-between",children:[Object(_.jsx)("span",{children:Object(_.jsx)(g.a,{id:"month",defaultMessage:"month"})}),Object(_.jsx)("span",{children:W(new Date("\n                        ".concat(l.split("-")[1],"/").concat(d.a.strToNumMonth[l.split("-")[0]],"/01")))})]}),Object(_.jsxs)("div",{className:"col-md-3 small d-flex justify-content-between align-items-center",children:[Object(_.jsx)("i",{className:"fa fa-credit-card-alt"}),Object(_.jsx)("span",{children:i.credit_card_number})]}),Object(_.jsxs)("div",{className:"col-md-3 small d-flex justify-content-between align-items-center",children:[Object(_.jsx)("span",{children:Object(_.jsx)(g.a,{id:"cycle",defaultMessage:"cycle"})}),Object(_.jsxs)("span",{children:[B.sDateStr," ",Object(_.jsx)(g.a,{id:"to",defaultMessage:"to"})," ",B.eDateStr]})]}),Object(_.jsxs)("div",{className:"col-md-3 small d-flex justify-content-between",children:[Object(_.jsx)("span",{children:Object(_.jsx)(g.a,{id:"payDate",defaultMessage:"payDate"})}),Object(_.jsx)("span",{children:B.payDate})]})]})})]})]})})),k=function(e){var t=Object(r.useContext)(we),a=t.ccChartData,n=t.ccYearSelected,c=t.ccDetails,o=t.onCcMonthYearSelected,l=Object(r.useState)([]),i=Object(s.a)(l,2),d=i[0],u=i[1];return Object(r.useEffect)((function(){if(a.length>0){var e=a.map((function(e){return{month:e.month,cData:[{label:"Opening Balance",value:e.data.ob},{label:"Paid",value:e.data.paid},{label:"Purchases",value:e.data.purchases},{label:"Taxes & Interest",value:e.data.taxesInterest},{label:"Balance",value:e.data.balance}]}}));u(e)}}),[a,c,n,o]),Object(_.jsx)(Y,{data:d})},C=a(30),T=a(98),P=a(49),I=a(102),F=a(231),E=a(331),L=(a(515),a(1265)),R=a(785),B=["monthYearSelected","bankSelected","selectedPlan"],A=function(e){var t=Object(R.a)(),a=e.monthYearSelected,n=e.bankSelected,c=e.selectedPlan,o=Object(C.a)(e,B),l=Object(r.useContext)(v.a),u=Object(r.useContext)(x.a),b=Object(r.useState)([]),j=Object(s.a)(b,2),m=j[0],f=j[1],p=Object(r.useState)(!0),h=Object(s.a)(p,2),O=h[0],y=h[1];Object(r.useEffect)((function(){y(!0);var e=M();Promise.all([e]).then((function(e){var t=e[0];f(t),y(!1)}))}),[a,n,c]);var M=function(){var e=new FormData;return e.append("startDate",c.startDate),e.append("endDate",c.endDate),e.append("bankSelected",n),e.append("criteria",c.criteria),e.append("appId",l.userConfig.appId),P.a.post("/account_planner/getPlanDetails",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))},N=function(e,t){return"E0"===c.criteria?Number(e):"0TO100"===c.criteria||"E100"===c.criteria||"G100"===c.criteria?Number(e)-Number(t):0},w=function(e){var t=e.reduce((function(e,t){return e+t}),0);return d.a.countryCurrencyLacSeperator(u.localeLanguage,u.localeCurrency,t,2)},S=[],Y=[],k=[];return Object(_.jsxs)(L.a,Object(D.a)(Object(D.a)({},o),{},{style:{zIndex:1e4},children:[Object(_.jsx)(L.a.Header,{closeButton:!0,children:Object(_.jsxs)(L.a.Title,{children:[t.formatMessage({id:a.split("-")[0].toLowerCase(),defaultMessage:a.split("-")[0].toLowerCase()})," ",a.split("-")[1]," ",Object(_.jsx)("i",{className:"fa fa-angle-double-right"})," ",c.label]})}),Object(_.jsx)(L.a.Body,{className:"rounded-bottom ".concat("dark"===l.userData.theme?"bg-dark text-white":"bg-white text-dark"),children:Object(_.jsx)("div",{className:"table-responsive p-10",children:O?Object(_.jsx)("div",{className:"relativeSpinner",children:Object(_.jsx)(i.a,{type:d.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})}):Object(_.jsx)("table",{className:"table ".concat("dark"===l.userData.theme?"table-dark":"table-white"),children:Object(_.jsxs)("tbody",{children:[Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"#"}),Object(_.jsx)("th",{children:Object(_.jsx)(g.a,{id:"expense",defaultMessage:"expense"})}),Object(_.jsx)("th",{children:Object(_.jsx)(g.a,{id:"committed",defaultMessage:"committed"})}),Object(_.jsx)("th",{children:Object(_.jsx)(g.a,{id:"plan",defaultMessage:"plan"})}),Object(_.jsx)("th",{children:Object(_.jsx)(g.a,{id:"difference",defaultMessage:"difference"})})]}),m&&m.length>0?m.map((function(e,t){var a=N(e.inc_exp_plan_amount,e.inc_exp_amount);S.push(Number(e.inc_exp_amount)),Y.push(Number(e.inc_exp_plan_amount));var n=N(e.inc_exp_plan_amount,e.inc_exp_amount);return k.push(n),Object(_.jsxs)("tr",{children:[Object(_.jsxs)("td",{children:[t+1,"."]}),Object(_.jsx)("td",{children:e.inc_exp_name}),Object(_.jsx)("td",{children:e.inc_exp_amount}),Object(_.jsx)("td",{children:e.inc_exp_plan_amount}),Object(_.jsx)("td",{className:"text-".concat(a>=0?"success":"danger"),children:a>=0?"+".concat(d.a.countryCurrencyLacSeperator(u.localeLanguage,u.localeCurrency,a,2)):"(".concat(d.a.countryCurrencyLacSeperator(u.localeLanguage,u.localeCurrency,a,2),")")})]},t)})):Object(_.jsx)("tr",{children:Object(_.jsx)("td",{className:"text-center py-3",colSpan:"5",children:Object(_.jsx)(g.a,{id:"noRecordsGenerated",defaultMessage:"noRecordsGenerated"})})}),m&&m.length>0&&Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{children:Object(_.jsx)(g.a,{id:"total",defaultMessage:"total"})}),Object(_.jsx)("td",{}),Object(_.jsx)("td",{children:w(S)}),Object(_.jsx)("td",{children:w(Y)}),Object(_.jsx)("td",{children:w(k)})]})]})})})})]}))};A.defaultProps={property:"String name"};var V=A,H=["totals"],z=function(e){var t=Object(R.a)(),a=Object(r.useContext)(v.a),n=Object(r.useContext)(x.a),c=e.totals,o=Object(C.a)(e,H),l=Object(r.useState)(0),i=Object(s.a)(l,2),u=i[0],b=i[1],j=Object(r.useState)(0),m=Object(s.a)(j,2),f=m[0],p=m[1],h=Object(r.useState)(0),O=Object(s.a)(h,2),y=O[0],M=O[1],N=Object(r.useState)(0),w=Object(s.a)(N,2),S=w[0],Y=w[1],k=Object(r.useState)(0),T=Object(s.a)(k,2),P=T[0],I=T[1],F=Object(r.useState)(0),E=Object(s.a)(F,2),B=E[0],A=E[1];Object(r.useEffect)((function(){if(c.length>0){var e=c.length>0&&c.filter((function(e){return"danger"===e.flagString&&e.amount>0}));e=(e=e.length>0?e[0].amount:0).toFixed(2),e=Number(e),b(e)}}),[c]),Object(r.useEffect)((function(){var e=u-f-y-S;e=Math.round(100*e)/100,I(e=-0===e?0:e);var t=(Number(u)-e)/u;t=(t*=100)>100?100:t,t=isNaN(t)?100:t,A(t)}),[u,f,y,S]);var V=function(e){return{label:0===e?t.formatMessage({id:"solved",defaultMessage:"solved"}):e>0?t.formatMessage({id:"behind",defaultMessage:"behind"}):t.formatMessage({id:"ahead",defaultMessage:"ahead"}),class:0===e?"text-success":e>0?"text-danger":"text-primary"}};return Object(_.jsxs)(L.a,Object(D.a)(Object(D.a)({},o),{},{style:{zIndex:1e4},children:[Object(_.jsx)(L.a.Header,{closeButton:!0,children:Object(_.jsx)(L.a.Title,{children:Object(_.jsx)(g.a,{id:"tally",defaultMessage:"tally"})})}),Object(_.jsx)(L.a.Body,{className:"rounded-bottom ".concat("dark"===a.userData.theme?"bg-dark":"bg-white"),children:Object(_.jsxs)("div",{className:"tallyModal text-dark",children:[Object(_.jsxs)("div",{className:"py-2 form-floating",children:[Object(_.jsx)("input",{id:"appplicationBalance",value:u,onChange:function(e){return b(Number(e.target.value))},placeholder:t.formatMessage({id:"balance",defaultMessage:"balance"}),type:"number",className:"form-control",readOnly:!0}),Object(_.jsx)("label",{htmlFor:"appplicationBalance",children:Object(_.jsx)(g.a,{id:"balance",defaultMessage:"balance"})})]}),Object(_.jsxs)("div",{className:"py-2 form-floating",children:[Object(_.jsx)("input",{id:"bankBalance",onChange:function(e){return p(Number(e.target.value))},type:"number",className:"form-control",placeholder:"".concat(t.formatMessage({id:"bank",defaultMessage:"bank"})," ").concat(t.formatMessage({id:"balance",defaultMessage:"balance"}))}),Object(_.jsxs)("label",{htmlFor:"bankBalance",children:[Object(_.jsx)(g.a,{id:"bank",defaultMessage:"bank"})," ",Object(_.jsx)(g.a,{id:"balance",defaultMessage:"balance"})]})]}),Object(_.jsxs)("div",{className:"py-2 form-floating",children:[Object(_.jsx)("input",{id:"unAccounted",onChange:function(e){return M(Number(e.target.value))},type:"number",className:"form-control",placeholder:t.formatMessage({id:"unaccounted",defaultMessage:"unaccounted"})}),Object(_.jsx)("label",{htmlFor:"unAccounted",children:Object(_.jsx)(g.a,{id:"unaccounted",defaultMessage:"unaccounted"})})]}),Object(_.jsxs)("div",{className:"py-2 form-floating",children:[Object(_.jsx)("input",{id:"walletBalance",onChange:function(e){return Y(Number(e.target.value))},type:"number",className:"form-control",placeholder:"".concat(t.formatMessage({id:"wallet",defaultMessage:"wallet"})," ").concat(t.formatMessage({id:"balance",defaultMessage:"balance"}))}),Object(_.jsxs)("label",{htmlFor:"walletBalance",children:[Object(_.jsx)(g.a,{id:"wallet",defaultMessage:"wallet"})," ",Object(_.jsx)(g.a,{id:"balance",defaultMessage:"balance"})]})]}),Object(_.jsxs)("div",{className:"py-2",children:[Object(_.jsx)("div",{className:"text-center p-10",children:Object(_.jsxs)("h5",{className:V(P).class,children:[V(P).label,"\xa0",Object(_.jsx)("i",{className:"fa ".concat(100===B?"fa-check":"fa-times-circle")})]})}),Object(_.jsx)("div",{className:"text-center ".concat(V(P).class),children:d.a.countryCurrencyLacSeperator(n.localeLanguage,n.localeCurrency,P,2)})]}),Object(_.jsx)("div",{className:"custom-progress-bar ".concat(B<100?"danger":"success"),style:{width:"".concat(B,"%")}})]})})]}))},W=a(70),G=["srcArr"],K=function(e){var t=Object(r.useContext)(we),a=e.srcArr,n=Object(C.a)(e,G),c=t.incExpList,o=Object(r.useState)([]),l=Object(s.a)(o,2),i=l[0],d=l[1],b=Object(r.useState)([]),j=Object(s.a)(b,2),m=j[0],p=j[1],h=Object(R.a)(),O=Object(r.useContext)(v.a),x=Object(r.useState)({amount:"",source:"",dest:"",description:h.formatMessage({id:"fundTransfer",defaultMessage:"fundTransfer"}),category:"",availableFunds:0}),y=Object(s.a)(x,2),M=y[0],N=y[1];Object(r.useEffect)((function(){a&&a.length>0&&d(a)}),[a]);Object(r.useEffect)((function(){var e=new FormData;e.append("id",M.source),e.append("appId",O.userConfig.appId),P.a.post("/account_planner/getFundDetails",e).then((function(e){N((function(t){return Object(D.a)(Object(D.a)({},t),{},{availableFunds:e.data.response[0].availableFunds})}))})).catch((function(e){console.log(e)}))}),[M.source]);return Object(_.jsxs)(L.a,Object(D.a)(Object(D.a)({},n),{},{style:{zIndex:1e4},children:[Object(_.jsx)(L.a.Header,{closeButton:!0,children:Object(_.jsx)(L.a.Title,{children:Object(_.jsx)(g.a,{id:"fundTransfer",defaultMessage:"fundTransfer"})})}),Object(_.jsx)(L.a.Body,{className:"p-0 rounded-bottom ".concat("dark"===O.userData.theme?"bg-dark text-white":"bg-white text-dark"),children:Object(_.jsxs)("div",{className:"row m-0",children:[Object(_.jsxs)("div",{className:"col-5 pt-3",children:[Object(_.jsxs)("div",{className:"py-3 text-center",children:[Object(_.jsx)("div",{children:Object(_.jsx)("i",{className:"fa fa-bank fa-3x"})}),Object(_.jsx)("small",{children:Object(_.jsx)(g.a,{id:"sourceBank",defaultMessage:"sourceBank"})})]}),Object(_.jsxs)("div",{className:"form-floating mt-1",children:[Object(_.jsx)(W.a,{placeholder:"".concat(h.formatMessage({id:"selectSourceAccount",defaultMessage:"selectSourceAccount"})),onChange:function(e,t,a){!function(e){var t=Object(u.a)(i).filter((function(t){return t.id!==e}));p(t),N((function(t){return Object(D.a)(Object(D.a)({},t),{},{source:e,dest:"",amount:"",category:""})}))}(t)},element:{fetch:{dropDownList:i.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:M.source,type:"single",searchable:!0,theme:O.userData.theme}),Number(M.availableFunds)>0&&Object(_.jsxs)("small",{className:"text-danger",children:[Object(_.jsx)(g.a,{id:"balance",defaultMessage:"balance"}),":",Number(M.availableFunds).toLocaleString()]})]})]}),Object(_.jsx)("div",{className:"col-2 d-flex align-items-center justify-content-center",children:Object(_.jsx)("i",{className:"fa fa-arrow-circle-right fa-3x"})}),Object(_.jsxs)("div",{className:"col-5 pt-3",children:[Object(_.jsxs)("div",{className:"py-3 text-center",children:[Object(_.jsx)("div",{children:Object(_.jsx)("i",{className:"fa fa-bank fa-3x"})}),Object(_.jsx)("small",{children:Object(_.jsx)(g.a,{id:"destinationBank",defaultMessage:"destinationBank"})})]}),Object(_.jsx)("div",{className:"form-floating mt-1",children:Object(_.jsx)(W.a,{placeholder:"".concat(h.formatMessage({id:"selectDestinationAccount",defaultMessage:"selectDestinationAccount"})),onChange:function(e,t,a){N((function(e){return Object(D.a)(Object(D.a)({},e),{},{dest:t})}))},element:{fetch:{dropDownList:m.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:M.dest,type:"single",searchable:!0,theme:O.userData.theme})})]}),Object(_.jsx)("div",{className:"col-12 pt-3",children:Object(_.jsx)("div",{className:"form-floating",children:Object(_.jsx)(W.a,{placeholder:"".concat(h.formatMessage({id:"category",defaultMessage:"category"})),onChange:function(e,t,a){N((function(e){return Object(D.a)(Object(D.a)({},e),{},{category:t})}))},element:{fetch:{dropDownList:c.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:M.category,type:"single",searchable:!0,theme:O.userData.theme})})}),Object(_.jsx)("div",{className:"col-12 pt-3",children:Object(_.jsxs)("div",{className:"form-floating",children:[Object(_.jsx)("input",{id:"amount",value:M.amount,onChange:function(e){return N((function(t){return Object(D.a)(Object(D.a)({},t),{},{amount:e.target.value})}))},placeholder:h.formatMessage({id:"amount",defaultMessage:"amount"}),type:"number",className:"form-control form-control-sm"}),Object(_.jsx)("label",{htmlFor:"amount",className:"text-dark",children:Object(_.jsx)(g.a,{id:"amount",defaultMessage:"amount"})})]})}),Object(_.jsx)("div",{className:"col-12 py-3",children:Object(_.jsx)("button",{disabled:!(M.dest&&M.amount&&M.source&&M.category),className:"btn btn-bni w-100 border-0",onClick:function(){return function(){var e=new FormData;e.append("amount",M.amount),e.append("source",M.source),e.append("dest",M.dest),e.append("description","".concat(M.description,": ").concat(i.filter((function(e){return e.id===M.source}))[0].value," -> ").concat(i.filter((function(e){return e.id===M.dest}))[0].value)),e.append("category",M.category),e.append("date",f()(new Date).format("YYYY-MM-DD")),e.append("dateTime",f()(new Date).format("YYYY-MM-DD HH:mm:ss")),e.append("appId",O.userConfig.appId),P.a.post("/account_planner/postFundTransfer",e).then((function(e){var t=e.data;e&&t&&t.response?(O.renderToast({message:h.formatMessage({id:"fundTransferSuccess",defaultMessage:"fundTransferSuccess"})}),N((function(e){return Object(D.a)(Object(D.a)({},e),{},{source:"",dest:"",amount:"",category:"",description:h.formatMessage({id:"fundTransfer",defaultMessage:"fundTransfer"})})}))):O.renderToast({type:"error",icon:"fa fa-times-circle",message:h.formatMessage({id:"fundTransferFail",defaultMessage:"fundTransferFail"})})})).catch((function(e){O.renderToast({type:"error",icon:"fa fa-times-circle",message:h.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}))}()},children:Object(_.jsx)(g.a,{id:"submit",defaultMessage:"submit"})})})]})})]}))},U=a(190),J=a(68),Z=a(63),q=a(86),Q=["intl"],X=Object(O.c)((function(e,t){var a,l=Object(r.useContext)(we),b=Object(r.useContext)(v.a),j=Object(r.useContext)(J.a),m=e.intl,p=Object(C.a)(e,Q),h=l.incExpList,O=l.bankList,x=l.bankSelected,y=l.bankDetails,M=l.monthYearSelected,N={fetch:{dropDownList:h.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},w={fetch:{dropDownList:O},searchable:!0},S=Object(r.useState)([]),Y=Object(s.a)(S,2),k=Y[0],L=Y[1],R=Object(r.useState)([{key:"goodPlans",flagString:"success",planString:"goodPlans",planCount:0,planTotal:0},{key:"achievedPlans",flagString:"info",planString:"achievedPlans",planCount:0,planTotal:0},{key:"badPlans",flagString:"danger",planString:"badPlans",planCount:0,planTotal:0},{key:"noPlans",flagString:"warning",planString:"noPlans",planCount:0,planTotal:0}]),B=Object(s.a)(R,2),A=B[0],H=B[1],W=Object(r.useState)({}),G=Object(s.a)(W,2),X=G[0],$=G[1],ee=Object(r.useState)([{amount:0,label:"income",flagString:"success"},{amount:0,label:"expense",flagString:"info"},{amount:0,label:"balance",flagString:"danger"},{amount:0,label:"planning",flagString:"warning"}]),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],ce=Object(r.useState)(!1),se=Object(s.a)(ce,2),re=se[0],oe=se[1],le=Object(r.useState)(!1),ie=Object(s.a)(le,2),de=ie[0],ue=ie[1],be=Object(r.useState)(!1),je=Object(s.a)(be,2),me=je[0],fe=je[1],pe=Object(r.useState)({}),he=Object(s.a)(pe,2),ge=he[0],Oe=he[1],xe=Object(r.useState)(!1),ve=Object(s.a)(xe,2),ye=ve[0],Me=ve[1],_e=d.a.getNow(),Ne=Object(r.useState)({}),De=Object(s.a)(Ne,2),Se=De[0],Ye=De[1],ke={start:0,limit:10,searchString:""},Ce=Object(r.useState)(null),Te=Object(s.a)(Ce,2),Pe=Te[0],Ie=Te[1],Fe=Object(r.useState)(null),Ee=Object(s.a)(Fe,2),Le=Ee[0],Re=Ee[1];Object(r.useEffect)((function(){Ye({config:{header:{searchPlaceholder:m.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),searchable:!0},footer:{total:{title:m.formatMessage({id:"total",defaultMessage:"total"}),locale:y[0].bank_locale,currency:y[0].bank_currency,maxDecimal:2},pagination:{currentPage:"last",maxPagesToShow:5}}},rowElements:[],Table:"income_expense",TableRows:["inc_exp_id","inc_exp_name","inc_exp_amount","inc_exp_plan_amount","inc_exp_type","inc_exp_date","inc_exp_category","inc_exp_bank","inc_exp_comments","inc_exp_added_at","inc_exp_is_planned"],TableAliasRows:["id","transaction","amount","plan","type","date","category","bank","comments","recorded","isPlanned"].map((function(e){return m.formatMessage({id:e,defaultMessage:e})})),defaultValues:[{inc_exp_type:"Dr"},{inc_exp_amount:0},{inc_exp_plan_amount:0},{inc_exp_date:f()(new Date).format("YYYY-MM-DD")}],showTooltipFor:["inc_exp_name","inc_exp_comments"]})}),[m]);var Be=function(e){if(Le){$({}),Me(!0);var t=Le.split("-"),a=Object(s.a)(t,2),r=a[0],o=a[1],l=d.a.strToNumMonth[r],i=new Date(o,l,0).getDate(),u='inc_exp_date between "'.concat(o,"-").concat(l,'-01" and "').concat(o,"-").concat(l,"-").concat(i,'" and inc_exp_bank = ').concat(x,' and inc_exp_appId = "').concat(b.userConfig.appId,'"'),j=Ae(u);Promise.all([j]).then(function(){var t=Object(c.a)(Object(n.a)().mark((function t(a){var c,s,r;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=a[0].data.response,$(s),r=["checkbox","textbox","number",f()(null===s||void 0===s||null===(c=s.table[0])||void 0===c?void 0:c.inc_exp_date).isAfter()?"number":"label",{radio:{radioList:[{label:m.formatMessage({id:"credit",defaultMessage:"credit"}),value:"Cr",checked:!1},{label:m.formatMessage({id:"debit",defaultMessage:"debit"}),value:"Dr",checked:!0}]}},"date",N,w,"textbox","relativeTime","boolean"],L(r),Ye((function(e){return Object(D.a)(Object(D.a)({},e),{rowElements:r})})),"function"===typeof e&&e(s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){return Me(!1)}))}},Ae=function(e){var t=new FormData;return t.append("appId",b.userConfig.appId),t.append("TableRows",Se.TableRows),t.append("Table",Se.Table),t.append("limit",Pe.limit),t.append("start",Pe.start),t.append("searchString",Pe.searchString),e&&t.append("WhereClause",e),P.a.post("/account_planner/getAccountPlanner",t)},Ve=function(e,t){return Object(_.jsx)(I.a,Object(D.a)(Object(D.a)({id:"button-tooltip-1",className:"in show"},p),{},{children:t}))},He=function(){(function(){var e=Le.split("-"),t=Object(s.a)(e,2),a=t[0],n=t[1],c=d.a.strToNumMonth[a],r=new Date(n,c,0).getDate(),o=new FormData;return o.append("appId",b.userConfig.appId),o.append("bank",x),o.append("startDate","".concat(n,"-").concat(c,"-01")),o.append("endDate","".concat(n,"-").concat(c,"-").concat(r)),P.a.post("/account_planner/getPlanSum",o)})().then((function(e){var t=e.data.response,a={goodPlans:t.goodPlans,goodPlanCount:t.goodPlanCount,badPlans:t.badPlans,badPlanCount:t.badPlanCount,noPlans:t.noPlans,noPlanCount:t.noPlanCount,achievedPlans:t.achievedPlans,achievedPlanCount:t.achievedPlanCount},n=[{planCount:a.goodPlanCount,planTotal:a.goodPlans},{planCount:a.achievedPlanCount,planTotal:a.achievedPlans},{planCount:a.badPlanCount,planTotal:a.badPlans},{planCount:a.noPlanCount,planTotal:a.noPlans}],c=A.map((function(e,t){return Object(D.a)(Object(D.a)({},e),{},{planCount:n[t].planCount,planTotal:n[t].planTotal})}));H(c)})).catch((function(e){return console.log("bbb",e)}))},ze=Object(q.a)(),We=o.a.useMemo((function(){return{fetch:ze.get("fetch"),search:ze.get("search"),date:ze.get("date")}}),[ze]);Object(r.useEffect)((function(){Re(M),setTimeout((function(){Ie(ke)}),100)}),[M]),Object(r.useEffect)((function(){if(We.fetch&&"bankTransactions"===We.fetch&&We.search&&We.date){var e=f()(We.date).format("MMM-YYYY");Re(e),setTimeout((function(){Ie({start:0,limit:10,searchString:We.search})}),100)}else Re(M),setTimeout((function(){Ie(ke)}),100)}),[We]),Object(r.useEffect)((function(){Le&&He()}),[Le]),Object(r.useEffect)((function(){Be()}),[Pe]),Object(r.useEffect)((function(){if(Object.keys(X).length>0){var e,t,a,n,c,s,r,o,l=[null===X||void 0===X||null===(e=X.total)||void 0===e||null===(t=e.inc_exp_amount[0])||void 0===t?void 0:t.value,null===X||void 0===X||null===(a=X.total)||void 0===a||null===(n=a.inc_exp_amount[1])||void 0===n?void 0:n.value,null===X||void 0===X||null===(c=X.total)||void 0===c||null===(s=c.inc_exp_amount[2])||void 0===s?void 0:s.value,null===X||void 0===X||null===(r=X.total)||void 0===r||null===(o=r.inc_exp_plan_amount[0])||void 0===o?void 0:o.value],i=ae.map((function(e,t){return Object(D.a)(Object(D.a)({},e),{},{amount:l[t]})}));ne(i)}}),[X]);return Object(_.jsxs)("div",{className:"settings",children:[re&&Object(_.jsx)(V,{className:"planInfoModal",show:re,onHide:function(){return oe(!1)},size:"lg",animation:!1,monthYearSelected:Le,bankSelected:x,selectedPlan:ge}),de&&Object(_.jsx)(z,{className:"planInfoModal",show:de,onHide:function(){return ue(!1)},size:"sm",totals:ae,animation:!1}),me&&Se.rowElements[7].fetch.dropDownList.length>0&&Object(_.jsx)(K,{className:"",show:me,onHide:function(){return fe(!1)},size:"md",animation:!1,srcArr:Se.rowElements[7].fetch.dropDownList,incExpList:Se.rowElements[6].fetch.dropDownList,centered:!0}),Object(_.jsxs)("div",{className:"",children:[!ye&&X&&(null===(a=Object.keys(X))||void 0===a?void 0:a.length)>0&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"buttonGrid",children:Le&&X&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h6",{children:"".concat(m.formatMessage({id:Le.split("-")[0].toLowerCase(),defaultMessage:Le.split("-")[0].toLowerCase()})," ").concat(Le.split("-")[1])}),Object(_.jsxs)("div",{className:"d-flex flex-row-reverse",children:[Object(_.jsx)("div",{children:Object(_.jsx)(F.a,{placement:"left",delay:{show:250,hide:400},overlay:Ve(0,m.formatMessage({id:"fundTransfer",defaultMessage:"fundTransfer"})),triggerType:"hover",children:Object(_.jsx)("i",{className:"fa fa-arrows-h roundedButton ".concat(b.userData.theme," pull-right"),onClick:function(){return fe(!0)}})})}),Object(_.jsx)("div",{children:Object(_.jsx)(F.a,{placement:"top",delay:{show:250,hide:400},overlay:Ve(0,m.formatMessage({id:"exportToValue",defaultMessage:"exportToValue"},{value:"PDF"})),triggerType:"hover",children:Object(_.jsx)("i",{onClick:function(){return function(){var e=null===X||void 0===X?void 0:X.table.map((function(e,t){return[t+1,e.inc_exp_name,e.inc_exp_amount,e.inc_exp_plan_amount,e.inc_exp_type,e.inc_exp_date,e.inc_exp_comments]})),t=new E.default;t.text("".concat(d.a.stringToCapitalize(Se.Table)," (").concat(Le,")"),15,10),t.autoTable({styles:{overflow:"linebreak"},theme:"grid",head:[["#","Transaction","Amount","Planned","Type","Date","Comments"]],body:Object(u.a)(e)});var a=ae.map((function(e){return d.a.lacSeperator(e.amount)}));t.autoTable({styles:{overflow:"linebreak",halign:"center"},theme:"striped",head:[["Income","Expense","Balance","Planning"]],body:[a]});var n=A.map((function(e){var t,a,n;return d.a.lacSeperator(null===e||void 0===e?void 0:e.planTotal,null===Se||void 0===Se||null===(t=Se.config)||void 0===t||null===(a=t.footer)||void 0===a||null===(n=a.total)||void 0===n?void 0:n.currency)}));t.autoTable({styles:{overflow:"linebreak",halign:"center"},theme:"striped",head:[["Good Plans","Achieved Plans","Bad Plans","No Plans"]],body:[n]}),t.save("".concat(Se.Table,"-").concat(_e))}()},className:"fa fa-file-pdf-o roundedButton ".concat(b.userData.theme," pull-right")})})}),Object(_.jsx)(U.a,{datas:d.a.stripCommasInCSV(null===X||void 0===X?void 0:X.table),filename:"Income-Expense-".concat(_e,".csv"),columns:[{displayName:"Transaction",id:"inc_exp_name"},{displayName:"Date",id:"inc_exp_date"},{displayName:"Type",id:"inc_exp_type"},{displayName:"Amount",id:"inc_exp_amount"}],children:Object(_.jsx)(F.a,{placement:"top",delay:{show:250,hide:400},overlay:Ve(0,m.formatMessage({id:"exportToValue",defaultMessage:"exportToValue"},{value:"CSV"})),triggerType:"hover",children:Object(_.jsx)("i",{className:"fa fa-file-excel-o roundedButton ".concat(b.userData.theme," pull-right")})})}),Object(_.jsx)("div",{children:Object(_.jsx)(F.a,{placement:"top",delay:{show:250,hide:400},overlay:Ve(0,m.formatMessage({id:"replan",defaultMessage:"replan"})),triggerType:"hover",children:Object(_.jsx)("i",{onClick:function(){return function(){var e=Se.rowElements.map((function(e,t){return 3===t&&(e="number"===e?"label":"number"),e}));Ye(Object(D.a)(Object(D.a)({},Se),{rowElements:e})),L(e)}()},className:"fa fa-repeat roundedButton ".concat(b.userData.theme," pull-right")})})}),Object(_.jsx)("div",{children:Object(_.jsx)(F.a,{placement:"top",delay:{show:250,hide:400},overlay:Ve(0,m.formatMessage({id:"tally",defaultMessage:"tally"})),triggerType:"hover",children:Object(_.jsx)("i",{onClick:function(){return ue(!0)},className:"fa fa-text-width roundedButton ".concat(b.userData.theme," pull-right")})})})]})]})}),Object(_.jsx)(T.a,{id:"incExpTable",config:Se.config,Table:Se.Table,TableRows:Se.TableRows,TableAliasRows:Se.TableAliasRows,rowElements:k,dbData:X,postApiUrl:"/account_planner/postAccountPlanner",onPostApi:function(e){return function(e){var t=e.status,a=e.data;if(200===t){if(e&&a&&"boolean"===typeof a.response&&null!==a.response&&a.response&&l.renderToast({message:m.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),e&&a&&"boolean"===typeof a.response&&null!==a.response&&!1===a.response&&l.renderToast({type:"error",icon:"fa fa-times-circle",message:m.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),e&&a&&null===a.response&&j.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(_.jsx)(Z.b,{}),content:Object(_.jsx)(Z.a,{})}),e&&a&&"object"===typeof a.response&&null!==a.response){var n;n=1451===a.response.number?"foreignKeyDeleteMessage":"",b.renderToast({type:"error",icon:"fa fa-times-circle",message:m.formatMessage({id:n,defaultMessage:n})})}}else l.renderToast({type:"error",icon:"fa fa-times-circle",message:m.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}(e)},apiParams:Pe,onChangeParams:function(e){return function(e){Ie((function(t){return Object(D.a)(Object(D.a)({},t),e)}))}(e)},showTooltipFor:Se.showTooltipFor,defaultValues:Se.defaultValues,onReFetchData:function(){Be(),He()},cellWidth:[4,13,8,8,13,8,13,13,13,10,5],ajaxButtonName:m.formatMessage({id:"submit",defaultMessage:"submit"}),appIdKeyValue:{key:"inc_exp_appId",value:b.userConfig.appId},theme:b.userData.theme},"incExpTable"),Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:"row",children:ae.map((function(e){return Object(_.jsx)("div",{className:"col-md-3 col-6 py-4",children:Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("div",{className:"",children:Object(_.jsx)("div",{className:"p-6 text-center",children:Object(_.jsx)("h5",{children:Object(_.jsx)(g.a,{id:e.label,defaultMessage:e.label})})})}),Object(_.jsx)("div",{className:"",children:Object(_.jsx)("div",{className:"text-center text-".concat(e.flagString),children:d.a.countryCurrencyLacSeperator(y[0].bank_locale,y[0].bank_currency,e.amount,2)})})]})},e.label)}))}),Object(_.jsx)("div",{className:"row",children:A.map((function(e){return Object(_.jsx)("div",{className:"col-md-3 col-6 py-4",children:Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("div",{className:"",children:Object(_.jsx)("div",{className:"p-6 text-center",children:Object(_.jsxs)("h5",{children:[Object(_.jsx)(g.a,{id:e.planString,defaultMessage:e.planString}),Object(_.jsx)("sup",{className:"superScript text-".concat(e.flagString," border-").concat(e.flagString),children:e.planCount})]})})}),Object(_.jsx)("div",{className:"",children:Object(_.jsx)("div",{className:"text-center text-".concat(e.flagString),children:Object(_.jsx)("button",{onClick:function(){return function(e){var t=Le.split("-"),a=Object(s.a)(t,2),n=a[0],c=a[1],r=d.a.strToNumMonth[n],o=new Date(c,r,0).getDate(),l={startDate:"".concat(c,"-").concat(r,"-01"),endDate:"".concat(c,"-").concat(r,"-").concat(o),bankSelected:x};switch(e){case"goodPlans":l=Object(D.a)(Object(D.a)({},l),{},{label:m.formatMessage({id:"goodPlans",defaultMessage:"goodPlans"}),criteria:"G100"});break;case"achievedPlans":l=Object(D.a)(Object(D.a)({},l),{},{label:m.formatMessage({id:"achievedPlans",defaultMessage:"achievedPlans"}),criteria:"E100"});break;case"badPlans":l=Object(D.a)(Object(D.a)({},l),{},{label:m.formatMessage({id:"badPlans",defaultMessage:"badPlans"}),criteria:"0TO100"});break;case"noPlans":l=Object(D.a)(Object(D.a)({},l),{},{label:m.formatMessage({id:"noPlans",defaultMessage:"noPlans"}),criteria:"E0"})}oe(!0),Oe(l)}(e.key)},className:"btn btn-sm btn-".concat(e.flagString),children:d.a.countryCurrencyLacSeperator(y[0].bank_locale,y[0].bank_currency,e.planTotal,2)})})})]})},e.key)}))})]})]}),!ye&&!X&&!(null!==X&&void 0!==X&&X.table.length)&&Object(_.jsx)("div",{className:"py-3 text-center",children:Object(_.jsx)(g.a,{id:"noRecordsGenerated",defaultMessage:"noRecordsGenerated"})}),ye&&Object(_.jsx)("div",{className:"relativeSpinner",children:Object(_.jsx)(i.a,{type:d.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})]})]})})),$=Object(O.c)((function(e){var t=Object(R.a)(),a=Object(r.useContext)(we),n=Object(r.useContext)(v.a),c=a.bankList,s=a.bankSelected,o=a.setBankSelected;return Object(_.jsx)(W.a,{placeholder:t.formatMessage({id:"select",defaultMessage:"select"}),onChange:function(e,t,a){o(t)},element:{fetch:{dropDownList:c.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:s,type:"single",searchable:!0,theme:n.userData.theme})})),ee=Object(O.c)((function(e){var t=Object(R.a)(),a=Object(r.useContext)(we),n=Object(r.useContext)(v.a),c=a.yearList,s=a.yearSelected,o=a.setYearSelected;return Object(_.jsx)(W.a,{placeholder:t.formatMessage({id:"select",defaultMessage:"select"}),onChange:function(e,t,a){o(t)},element:{fetch:{dropDownList:c.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:s,type:"single",searchable:!0,theme:n.userData.theme})})),te=Object(O.c)((function(e){var t=Object(R.a)(),a=Object(r.useContext)(we),n=Object(r.useContext)(v.a),c=a.ccYearList,s=a.ccYearSelected,o=a.setCcYearSelected;return Object(_.jsx)(W.a,{placeholder:t.formatMessage({id:"select",defaultMessage:"select"}),onChange:function(e,t,a){o(t)},element:{fetch:{dropDownList:c.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:s,type:"single",searchable:!0,theme:n.userData.theme})})),ae=Object(O.c)((function(e){var t=Object(R.a)(),a=Object(r.useContext)(we),n=Object(r.useContext)(v.a),c=a.ccBankList,s=a.ccBankSelected,o=a.setCcBankSelected;return Object(_.jsx)(W.a,{placeholder:t.formatMessage({id:"select",defaultMessage:"select"}),onChange:function(e,t,a){o(t)},element:{fetch:{dropDownList:c.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:s,type:"single",searchable:!0,theme:n.userData.theme})})),ne=a(113),ce=function(e){var t=Object(R.a)(),a=e.onImport,n=Object(r.useContext)(v.a),c=Object(r.useState)([]),l=Object(s.a)(c,2),i=l[0],d=l[1],b=Object(r.useState)([]),j=Object(s.a)(b,2),m=j[0],p=j[1],h=Object(r.useState)(-1),O=Object(s.a)(h,2),x=O[0],y=O[1],M=Object(r.useState)(-1),N=Object(s.a)(M,2),w=N[0],S=N[1],Y=Object(r.useState)(-1),k=Object(s.a)(Y,2),C=k[0],T=k[1],P=Object(r.useState)(" "),I=Object(s.a)(P,2),F=I[0],E=I[1],B=[{label:t.formatMessage({id:"transaction",defaultMessage:"transaction"}),type:"text",key:"cc_transaction"},{label:t.formatMessage({id:"date",defaultMessage:"date"}),type:"dated",key:"cc_date"},{label:t.formatMessage({id:"openingBalance",defaultMessage:"openingBalance"}),type:"number",key:"cc_opening_balance"},{label:t.formatMessage({id:"credits",defaultMessage:"credits"}),type:"number",key:"cc_payment_credits"},{label:t.formatMessage({id:"purchases",defaultMessage:"purchases"}),type:"number",key:"cc_purchases"},{label:t.formatMessage({id:"interest",defaultMessage:"interest"}),type:"number",key:"cc_taxes_interest"}],A=Object(r.useRef)(null),V="{--#newLine#--}";Object(r.useEffect)((function(){if(x>-1&&w>-1&&C>-1&&x!==w){var e=Object(u.a)(i);e=e.map((function(e,t){return t===C&&e.length>1&&(e[x]=e[x]&&e[w]&&[].concat(Object(u.a)(e[x]),Object(u.a)(e[w])).join(""),e[w]=e[w]&&null),e})).map((function(e){return e.filter((function(e){return null!==e}))})),d(e),S(-1),T(-1),y(-1)}}),[x,w,C]);var H=function(e){e.preventDefault()},z=function(e,t,a){var n,c=JSON.parse(e.dataTransfer.getData("drag-item")),s=c.cell,r=c.i,o="";"dated"===t?(n=s,o=[f()(n,"YYYY/MMM/DD",!0).isValid()&&f()(n,"YYYY/MMM/DD").format("YYYY-MM-DD"),f()(n,"YYYY.MMM.DD",!0).isValid()&&f()(n,"YYYY.MMM.DD").format("YYYY-MM-DD"),f()(n,"YYYY-MMM-DD",!0).isValid()&&f()(n,"YYYY-MMM-DD").format("YYYY-MM-DD"),f()(n,"YYYY MMM DD",!0).isValid()&&f()(n,"YYYY MMM DD").format("YYYY-MM-DD"),f()(n,"YYYY/MM/DD",!0).isValid()&&f()(n,"YYYY/MM/DD").format("YYYY-MM-DD"),f()(n,"YYYY.MM.DD",!0).isValid()&&f()(n,"YYYY.MM.DD").format("YYYY-MM-DD"),f()(n,"YYYY-MM-DD",!0).isValid()&&f()(n,"YYYY-MM-DD").format("YYYY-MM-DD"),f()(n,"YYYY MM DD",!0).isValid()&&f()(n,"YYYY MM DD").format("YYYY-MM-DD"),f()(n,"DD/MM/YYYY",!0).isValid()&&f()(n,"DD/MM/YYYY").format("YYYY-MM-DD"),f()(n,"DD-MM-YYYY",!0).isValid()&&f()(n,"DD-MM-YYYY").format("YYYY-MM-DD"),f()(n,"DD.MM.YYYY",!0).isValid()&&f()(n,"DD.MM.YYYY").format("YYYY-MM-DD"),f()(n,"DD MM YYYY",!0).isValid()&&f()(n,"DD MM YYYY").format("YYYY-MM-DD"),f()(n,"DD/MMM/YYYY",!0).isValid()&&f()(n,"DD/MMM/YYYY").format("YYYY-MM-DD"),f()(n,"DD-MMM-YYYY",!0).isValid()&&f()(n,"DD-MMM-YYYY").format("YYYY-MM-DD"),f()(n,"DD.MMM.YYYY",!0).isValid()&&f()(n,"DD.MMM.YYYY").format("YYYY-MM-DD"),f()(n,"DD MMM YYYY",!0).isValid()&&f()(n,"DD MMM YYYY").format("YYYY-MM-DD"),f()(n,"DD/MMMM/YYYY",!0).isValid()&&f()(n,"DD/MMMM/YYYY").format("YYYY-MM-DD"),f()(n,"DD-MMMM-YYYY",!0).isValid()&&f()(n,"DD-MMMM-YYYY").format("YYYY-MM-DD"),f()(n,"DD.MMMM.YYYY",!0).isValid()&&f()(n,"DD.MMMM.YYYY").format("YYYY-MM-DD"),f()(n,"DD MMMM YYYY",!0).isValid()&&f()(n,"DD MMMM YYYY").format("YYYY-MM-DD")].filter((function(e){return!1!==e}))[0]||"Invalid Date"):"text"===t?o=s:"number"===t&&(s=s.replace(",",""),o=Number(s)||0),e.target.value=o,W(r,a,o)},W=function(e,t,a){var n=Object(u.a)(m);n=n.map((function(n,c){return e===c&&(n[t]=a),n})),p(n)};return Object(_.jsxs)(L.a,Object(D.a)(Object(D.a)({},e),{},{style:{zIndex:1e4},children:[Object(_.jsx)(L.a.Header,{closeButton:!0,children:Object(_.jsx)(L.a.Title,{children:Object(_.jsx)(g.a,{id:"importYourCreditCardStatement",defaultMessage:"importYourCreditCardStatement"})})}),Object(_.jsx)(L.a.Body,{className:"rounded-bottom ".concat("dark"===n.userData.theme?"bg-dark text-white":"bg-white text-dark"),children:Object(_.jsxs)("div",{className:"creditCardModal",children:[i.length?Object(_.jsx)("div",{className:"table-responsive pb-3",children:Object(_.jsxs)("div",{className:"tableGrid",children:[B.map((function(e,t){return Object(_.jsx)("div",{className:"heading",children:e.label},t)})),i.map((function(e,t){return Object(_.jsxs)(o.a.Fragment,{children:[e.length>0&&Object(_.jsxs)("div",{className:"singleLines",children:[e.map((function(e,a){return Object(_.jsxs)("span",{id:a,draggable:"true",onDragStart:function(n){return function(e,t){y(Number(e.target.id)),e.dataTransfer.setData("drag-item",t)}(n,JSON.stringify({cell:e,i:t,j:a}))},onDrop:function(e){return function(e,t){var a=t.i;T(Number(a)),S(Number(e.target.id))}(e,{i:t,j:a})},onDragOver:function(e){return H(e)},className:"cell",children:[e,Object(_.jsx)("i",{onClick:function(){return function(e,t){var a=Object(u.a)(i);a=a.map((function(a,n){return n===e?a.filter((function(e,a){return a!==t})):a})),d(a)}(t,a)},className:"fa fa-times-circle"})]},a)})),e.length>0&&Object(_.jsx)("span",{onClick:function(){return function(e){var t=Object(u.a)(i);t=t.map((function(t,a){return a===e&&(t=[]),t})),d(t)}(t)},className:"cell danger",title:"Delete all?",children:Object(_.jsx)("i",{className:"fa fa-times"})})]}),B.map((function(e,a){return Object(_.jsx)("div",{children:Object(_.jsx)("input",{type:e.type,onChange:function(a){return W(t,e.key,a.target.value)},onDragOver:function(e){return H(e)},onDrop:function(t){return z(t,e.type,e.key)},className:"input"})},a)}))]},t)}))]})}):Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"row separatorWrapper py-2",children:[Object(_.jsx)("div",{className:"col-md-9 col-7 pl-0",children:Object(_.jsxs)("label",{htmlFor:"paste",children:[Object(_.jsx)(g.a,{id:"pasteYourCreditCardStatementHere",defaultMessage:"pasteYourCreditCardStatementHere"})," ",Object(_.jsx)("i",{className:"fa fa-level-down"})]})}),Object(_.jsx)("div",{className:"col-md-3 col-5 pr-0",children:Object(_.jsxs)("div",{className:"input-group input-group-sm",children:[Object(_.jsx)("span",{className:"input-group-text bni-bg",children:Object(_.jsx)(g.a,{id:"textSeperated",defaultMessage:"textSeperated"})}),Object(_.jsx)("input",{type:"text",defaultValue:F,onChange:function(e){return E(e.target.value)},className:"form-control"})]})})]}),Object(_.jsx)("textarea",{id:"paste",ref:A,className:"textArea"})]}),Object(_.jsxs)("div",{className:"text-end py-2",children:[i.length>0&&Object(_.jsxs)("button",{onClick:function(){return d([])},className:"btn btn-bni me-3",children:[Object(_.jsx)("i",{className:"fa fa-angle-double-left"})," ",Object(_.jsx)(g.a,{id:"back",defaultMessage:"back"})]}),i.length?Object(_.jsx)("button",{onClick:function(){return a(m)},className:"btn btn-bni",children:Object(_.jsx)(g.a,{id:"generate",defaultMessage:"generate"})}):Object(_.jsx)("button",{onClick:function(){return function(){var e=A.current.value,t=(e=e.replace(/(\r\n|\n|\r)/gm,V).split(V).filter((function(e){return e})).map((function(e){return e.split(F)}))).map((function(){return{cc_comments:"",cc_date:"",cc_expected_balance:"",cc_for_card:"",cc_id:"",cc_opening_balance:"",cc_payment_credits:"",cc_purchases:"",cc_taxes_interest:"",cc_transaction:""}}));p(t),d(e)}()},className:"btn btn-bni",children:Object(_.jsx)(g.a,{id:"process",defaultMessage:"process"})})]})]})})]}))};ce.defaultProps={property:"String name"};var se=ce,re=Object(O.c)((function(e){var t,a,l=Object(r.useContext)(we),u=Object(r.useContext)(v.a),b=Object(r.useContext)(J.a),j=e.intl,m=l.ccMonthYearSelected,f=l.ccBankSelected,p=l.ccDetails,h=l.incExpList,O=l.ccBankList,x=Object(r.useState)(!1),y=Object(s.a)(x,2),M=y[0],N=y[1],w=Object(r.useState)({}),S=Object(s.a)(w,2),Y=S[0],k=S[1],C=Object(r.useState)(!1),E=Object(s.a)(C,2),L=E[0],R=E[1],B=Object(r.useState)([]),A=Object(s.a)(B,2),V=A[0],H=A[1],z=Object(r.useState)({start:0,limit:10,searchString:""}),W=Object(s.a)(z,2),G=W[0],K=W[1],U=function(){var e=m.split("-"),t=Object(s.a)(e,2),a=t[0],r=t[1],o=d.a.strToNumMonth[a],l=Number(p.credit_card_start_date),i=Number(p.credit_card_end_date),u=new Date("".concat(Number(r),"-").concat(Number(o),"-").concat(i).replace(/-/g,"/")),b="".concat(u.getFullYear(),"-").concat(d.a.leadingZeros(u.getMonth()+1),"-").concat(d.a.leadingZeros(u.getDate())),j=u.setTime(u.getTime()-2592e6);j=new Date(j),j=new Date(j.setDate(l));var g="".concat(j.getFullYear(),"-").concat(d.a.leadingZeros(j.getMonth()+1),"-").concat(d.a.leadingZeros(j.getDate())),x='cc_date between "'.concat(g,'" and "').concat(b,'" and cc_for_card = ').concat(f);k({}),R(!0);var v=X(x);Promise.all([v]).then(function(){var e=Object(c.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H([]),k(t[0].data.response),R(!1),ne.a[0].rowElements[8]={fetch:{dropDownList:O},searchable:!0},ne.a[0].rowElements[9]={fetch:{dropDownList:h},searchable:!0},ne.a[0].rowElements[8].searchable=!0;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Q=function(){U()},X=function(e){var t=new FormData;return t.append("appId",u.userConfig.appId),t.append("TableRows",ne.a[0].TableRows),t.append("Table",ne.a[0].Table),t.append("limit",G.limit),t.append("start",G.start),t.append("searchString",G.searchString),e&&t.append("WhereClause",e),P.a.post("/account_planner/getAccountPlanner",t)},$=ne.a.map((function(e){var t={header:{searchPlaceholder:j.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),searchable:!0},footer:{total:{title:j.formatMessage({id:"total",defaultMessage:"total"}),locale:p.credit_card_locale,currency:p.credit_card_currency,maxDecimal:2},pagination:{currentPage:"first",maxPagesToShow:5}}};return e.config=t,e.TableAliasRows=["id","transaction","date","openingBalance","credits","purchases","taxesAndInterest","balance","creditCard","category","status","comments","recorded"].map((function(e){return j.formatMessage({id:e,defaultMessage:e})})),e})),ee=Object(q.a)(),te=o.a.useMemo((function(){return{fetch:ee.get("fetch"),search:ee.get("search")}}),[ee]);return Object(r.useEffect)((function(){te.fetch&&"ccTransactions"===te.fetch&&te.search&&K({start:0,limit:10,searchString:te.search})}),[te]),Object(r.useEffect)((function(){U()}),[m,G]),Object(_.jsxs)("div",{className:"settings",children:[M&&Object(_.jsx)(se,{className:"creditCardModal",show:M,onHide:function(){return N(!1)},size:"xl",animation:!1,onImport:function(e){H(e),N(!1)}}),Object(_.jsxs)("div",{className:"",children:[Object(_.jsx)("div",{className:"row py-2",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsx)(F.a,{placement:"left",delay:{show:250,hide:400},overlay:function(e,t){return Object(_.jsx)(I.a,Object(D.a)(Object(D.a)({id:"button-tooltip-1",className:"in show"},e),{},{children:t}))}(e,j.formatMessage({id:"importYourCreditCardStatement",defaultMessage:"importYourCreditCardStatement"})),triggerType:"hover",children:Object(_.jsx)("i",{onClick:function(){return N(!M)},className:"fa fa-upload roundedButton pull-right"})})})}),L&&Object(_.jsx)("div",{className:"relativeSpinner",children:Object(_.jsx)(i.a,{type:d.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})}),Y&&(null===(t=Object.keys(Y))||void 0===t?void 0:t.length)>0&&(null===Y||void 0===Y||null===(a=Y.table)||void 0===a?void 0:a.length)>0?$.sort((function(e,t){return e.id>t.id})).map((function(e,t){return Object(_.jsx)(T.a,{id:"ccTable",Table:e.Table,config:e.config,TableRows:e.TableRows,TableAliasRows:e.TableAliasRows,dbData:Y,rowElements:e.rowElements,postApiUrl:"/account_planner/postAccountPlanner",onPostApi:function(e){return function(e){var t=e.status,a=e.data;if(200===t){if(e&&a&&"boolean"===typeof a.response&&null!==a.response&&a.response&&l.renderToast({message:j.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),e&&a&&"boolean"===typeof a.response&&null!==a.response&&!1===a.response&&l.renderToast({type:"error",icon:"fa fa-times-circle",message:j.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),e&&a&&null===a.response&&b.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(_.jsx)(Z.b,{}),content:Object(_.jsx)(Z.a,{})}),e&&a&&"object"===typeof a.response&&null!==a.response){var n;n=1451===a.response.number?"foreignKeyDeleteMessage":"",u.renderToast({type:"error",icon:"fa fa-times-circle",message:j.formatMessage({id:n,defaultMessage:n})})}}else l.renderToast({type:"error",icon:"fa fa-times-circle",message:j.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}(e)},apiParams:G,onChangeParams:function(e){return function(e){K((function(t){return Object(D.a)(Object(D.a)({},t),e)}))}(e)},showTooltipFor:e.showTooltipFor,defaultValues:e.defaultValues,onReFetchData:Q,insertCloneData:V,cellWidth:[4,13,8,8,8,8,8,8,13,13,13,13,10],ajaxButtonName:j.formatMessage({id:"submit",defaultMessage:"submit"}),appIdKeyValue:{key:"cc_appId",value:u.userConfig.appId},theme:u.userData.theme},t)})):Object(_.jsx)("div",{className:"py-3 text-center",children:Object(_.jsx)(g.a,{id:"noRecordsGenerated",defaultMessage:"noRecordsGenerated"})})]})]})})),oe=a(33),le=a(126),ie=a.n(le),de=a(205),ue=a.n(de),be=function(e){var t=Object(R.a)(),a=Object(r.useContext)(we),n=Object(r.useContext)(v.a),c=Object(r.useContext)(J.a),o=Object(r.useState)(new Date),l=Object(s.a)(o,2),u=l[0],b=l[1],j=Object(r.useState)(""),m=Object(s.a)(j,2),f=m[0],p=m[1],h=Object(r.useState)(""),O=Object(s.a)(h,2),x=O[0],y=O[1],M=Object(r.useState)("0"),N=Object(s.a)(M,2),w=N[0],S=N[1],Y=Object(r.useState)(!0),k=Object(s.a)(Y,2),C=k[0],T=k[1],I=Object(r.useState)(!0),F=Object(s.a)(I,2),E=F[0],B=F[1],A=Object(r.useState)([]),V=Object(s.a)(A,2),H=V[0],z=V[1],G=Object(r.useState)([]),K=Object(s.a)(G,2),U=K[0],q=K[1],Q=Object(r.useState)(""),X=Object(s.a)(Q,2),$=X[0],ee=X[1],te=Object(r.useState)([]),ae=Object(s.a)(te,2),ne=ae[0],ce=ae[1],se=Object(r.useState)(""),re=Object(s.a)(se,2),le=re[0],de=re[1],be=Object(r.useState)(""),je=Object(s.a)(be,2),me=je[0],fe=je[1],pe=Object(r.useState)(!1),he=Object(s.a)(pe,2),ge=he[0],Oe=he[1],xe=Object(r.useState)(!1),ve=Object(s.a)(xe,2),ye=ve[0],Me=ve[1],_e="&Lang;",Ne=[{1:t.formatMessage(Object(oe.a)({id:"1"},"id","1"))},{2:t.formatMessage(Object(oe.a)({id:"2"},"id","2"))},{3:t.formatMessage(Object(oe.a)({id:"3"},"id","3"))},{4:t.formatMessage(Object(oe.a)({id:"4"},"id","4"))},{5:t.formatMessage(Object(oe.a)({id:"5"},"id","5"))},{6:t.formatMessage(Object(oe.a)({id:"6"},"id","6"))},{7:t.formatMessage(Object(oe.a)({id:"7"},"id","7"))},{8:t.formatMessage(Object(oe.a)({id:"8"},"id","8"))},{9:t.formatMessage(Object(oe.a)({id:"9"},"id","9"))},{"&Lang;":_e},{0:t.formatMessage(Object(oe.a)({id:"0"},"id","0"))},{".":"."},{C:"C"}];Object(r.useEffect)((function(){var e=function(){var e=new FormData;return e.append("appId",n.userConfig.appId),P.a.post("/account_planner/bank_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}(),t=function(){var e=new FormData;return e.append("appId",n.userConfig.appId),P.a.post("/account_planner/inc_exp_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}(),a=function(){var e=new FormData;return e.append("appId",n.userConfig.appId),P.a.post("/account_planner/credit_card_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}();Promise.all([e,t,a]).then((function(e){e[0].length>0?z(e[0]):z([{id:null,value:"NULL"}]),e[0].length>0&&e[0][0].id?ee(e[0][0].id):ee(""),e[1].length>0?ce(e[1]):ce([{id:null,value:"NULL"}]),e[1].length>0&&e[1][0].id?de(e[1][0].id):de(""),e[2].length>0?q(e[2]):q([{id:null,value:"NULL"}]),e[2].length>0&&e[2][0].id?fe(e[2][0].id):fe("")}))}),[]);var De=function(e){var t=[e.getFullYear(),e.getMonth()+1>9?e.getMonth()+1:"0".concat(e.getMonth()+1),e.getDate()>9?e.getDate():"0".concat(e.getDate())],a=t[1],n=t[2];return"".concat(t[0],"-").concat(a,"-").concat(n)};return Object(_.jsxs)(L.a,Object(D.a)(Object(D.a)({},e),{},{style:{zIndex:1e4},enforceFocus:!1,children:[Object(_.jsx)(L.a.Header,{closeButton:!0,children:Object(_.jsx)(L.a.Title,{children:Object(_.jsx)(g.a,{id:"fastShopping",defaultMessage:"fastShopping"})})}),Object(_.jsx)(L.a.Body,{className:"react-responsive-ajax-data-table rounded-bottom ".concat("dark"===n.userData.theme?"bg-dark text-white":"bg-white text-dark"),children:Object(_.jsxs)("form",{id:"transactForm",onSubmit:function(e){return e.preventDefault()},children:[Object(_.jsx)("div",{className:"",children:Object(_.jsx)("input",{type:"text",className:"form-control",placeholder:t.formatMessage({id:"transaction",defaultMessage:"transaction"}),onChange:function(e){return p(e.target.value)}})}),Object(_.jsx)("div",{className:"overflow text-end",children:w}),Object(_.jsx)("div",{className:"",children:Object(_.jsx)("div",{className:"numPads pb-2",children:Ne.map((function(e,t){var a=isNaN(Number(Object.keys(e)[0]))?Object.keys(e)[0]:Number(Object.keys(e)[0]),n=Object.values(e)[0];return Object(_.jsx)("div",{className:"text-center buttonContainer",children:Object(_.jsx)("button",{disabled:w.toString().includes(".")&&"."===a,onClick:function(){return function(e){var t=w;"number"===typeof e&&(t=ge?"".concat(t,".").concat(e):"".concat(w).concat(e),Oe(!1)),"."===e&&(Oe(!0),"0"===t.substring(0,1)&&(t="0"+t)),t.length>0&&"0"===t.substring(0,1)&&!t.includes(".")&&(t=t.substring(1,t.length)),t.length>0&&"."===t.substring(0,1)&&(t="0".concat(t)),"C"===e&&(t="0",Oe(!1)),e===_e&&(t=t.length>1?t.slice(0,-1):"0").length>0&&"."===t.slice(t.length-1)&&(t=t.slice(0,-1),Oe(!1)),S(t)}(a)},dangerouslySetInnerHTML:{__html:n}})},t)}))})}),Object(_.jsxs)("div",{className:"row py-2",children:[Object(_.jsx)("div",{className:"col-6 py-2 react-responsive-ajax-data-table",children:Object(_.jsx)(ie.a,{onChange:function(e){b(e)},value:u,format:"y-MM-dd",required:!0,clearIcon:null,className:"fastShoppingDatePicker"})}),Object(_.jsx)("div",{className:"col-6 py-2",children:Object(_.jsxs)("div",{className:"d-flex align-items-center",children:[Object(_.jsx)("div",{onClick:function(){return B(!E)},className:"",children:E?t.formatMessage({id:"debitCard",defaultMessage:"debitCard"}):t.formatMessage({id:"creditCard",defaultMessage:"creditCard"})}),Object(_.jsx)("i",{onClick:function(){return B(!E)},className:"fa fa-circle ps-2 ".concat(E?"debit":"credit")})]})})]}),Object(_.jsx)("div",{className:"py-2",children:Object(_.jsx)("input",{type:"text",className:"form-control",placeholder:"Comments",onChange:function(e){return y(e.target.value)}})}),Object(_.jsx)("div",{children:H.length>0&&ne.length>0&&U.length>0?Object(_.jsxs)(_.Fragment,{children:[E?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"py-2",children:Object(_.jsxs)("div",{className:"d-flex align-items-center justify-content-evenly",children:[Object(_.jsx)("div",{onClick:function(){return T(!0)},className:"",children:Object(_.jsx)(g.a,{id:"expense",defaultMessage:"expense"})}),Object(_.jsx)(ue.a,{onColor:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),offColor:"#333",checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,onChange:function(){return T(!C)},checked:!0===C}),Object(_.jsx)("div",{onClick:function(){return T(!1)},className:"",children:Object(_.jsx)(g.a,{id:"income",defaultMessage:"income"})}),Object(_.jsx)(ue.a,{onColor:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),offColor:"#333",checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,onChange:function(){return T(!C)},checked:!1===C})]})}),Object(_.jsx)("div",{className:"py-2",children:Object(_.jsx)(W.a,{placeholder:t.formatMessage({id:"select",defaultMessage:"select"}),onChange:function(e,t,a){ee(t)},element:{fetch:{dropDownList:H.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:$,type:"single",searchable:!0,theme:n.userData.theme},1)})]}):Object(_.jsx)("div",{className:"py-2",children:Object(_.jsx)(W.a,{placeholder:t.formatMessage({id:"select",defaultMessage:"select"}),onChange:function(e,t,a){fe(t)},element:{fetch:{dropDownList:U.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:me,type:"single",searchable:!0,theme:n.userData.theme},1)}),Object(_.jsx)("div",{className:"py-2",children:Object(_.jsx)(W.a,{placeholder:t.formatMessage({id:"select",defaultMessage:"select"}),onChange:function(e,t,a){de(t)},element:{fetch:{dropDownList:ne.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:le,type:"single",searchable:!0,theme:n.userData.theme},1)})]}):Object(_.jsx)("div",{className:"relativeSpinner",children:Object(_.jsx)(i.a,{type:d.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})}),Object(_.jsx)("div",{className:"py-2",children:Object(_.jsx)("button",{disabled:!(Number(w)>0&&f&&!ye),onClick:function(){return function(){Me(!0);var s={Table:E?"income_expense":"credit_card_transactions",insertData:E?[{inc_exp_id:null,inc_exp_appId:n.userConfig.appId,inc_exp_name:f,inc_exp_amount:w,inc_exp_plan_amount:0,inc_exp_type:C?"Dr":"Cr",inc_exp_date:De(u),inc_exp_category:le,inc_exp_bank:$,inc_exp_comments:x}]:[{cc_id:null,cc_appId:n.userConfig.appId,cc_transaction:f,cc_date:De(u),cc_opening_balance:0,cc_payment_credits:0,cc_purchases:w,cc_taxes_interest:0,cc_for_card:me,cc_inc_exp_cat:le,cc_comments:x,cc_transaction_status:0}]},r=new FormData;document.getElementById("transactForm").reset(),r.append("postData",JSON.stringify(s)),P.a.post("/account_planner/postAccountPlanner",r).then((function(n){var s=n.data;n&&s&&"boolean"===typeof s.response&&null!==s.response&&s.response&&a.renderToast({message:t.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),n&&s&&"boolean"===typeof s.response&&null!==s.response&&!1===s.response&&a.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),n&&s&&null===s.response&&(c.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(_.jsx)(Z.b,{}),content:Object(_.jsx)(Z.a,{})}),e.onHide(!1)),S("0"),p(""),y(""),null!=document.getElementById("transactForm")&&document.getElementById("transactForm").reset()})).catch((function(e){a.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})}),console.log(e)})).finally((function(){return Me(!1)}))}()},className:"btn btn-bni border-0",children:ye?Object(_.jsx)("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"}):Object(_.jsx)(g.a,{id:"submit",defaultMessage:"submit"})})})]})})]}))};be.defaultProps={property:"String name"};var je=be,me=function(e){var t=e.ccDetails,a=Object(r.useState)(0),n=Object(s.a)(a,2),c=n[0],o=n[1],l=24*Number(t.remDays)*3600;Object(r.useEffect)((function(){Number(t.remDays)>0&&i()}),[t.remDays]);var i=function e(){var t=Math.floor(l/24/60/60),a=Math.floor(l-86400*t),n=Math.floor(a/3600),c=Math.floor(a-3600*n),s=Math.floor(c/60),r=l%60,i=u(t)+":"+u(n)+":"+u(s)+":"+u(r);0===l?d(e):l--,o(i),setTimeout(e,1e3)},d=function(){clearTimeout(i)},u=function(e){return e<10?"0"+e:e};return Object(_.jsx)("span",{children:c})};me.defaultProps={property:"String name"};var fe=me,pe=function(e){var t=Object(r.useContext)(v.a),a=Object(r.useState)(!1),n=Object(s.a)(a,2),c=n[0],o=n[1],l=Object(r.useState)(!1),u=Object(s.a)(l,2),b=u[0],j=u[1],m=Object(r.useState)(!1),f=Object(s.a)(m,2),p=f[0],h=f[1],O=Object(r.useState)({}),x=Object(s.a)(O,2),y=x[0],M=x[1],N=Object(r.useState)([]),w=Object(s.a)(N,2),S=w[0],Y=w[1],k=new Date;Object(r.useEffect)((function(){o(!0);var e=T();Promise.all([e]).then((function(e){var t=e[0];Y(t),o(!1)}))}),[]);var C=function(){return Object(_.jsx)("div",{className:"relativeSpinner",children:Object(_.jsx)(i.a,{type:d.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})},T=function(){var e=new FormData;return e.append("appId",t.userConfig.appId),P.a.post("/account_planner/credit_card_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))};return Object(_.jsxs)(L.a,Object(D.a)(Object(D.a)({},e),{},{style:{zIndex:1e4},children:[Object(_.jsx)(L.a.Header,{closeButton:!0,children:Object(_.jsx)(L.a.Title,{children:Object(_.jsx)(g.a,{id:"checkCreditCardCycleDate",defaultMessage:"checkCreditCardCycleDate"})})}),Object(_.jsxs)(L.a.Body,{className:"rounded-bottom ".concat("dark"===t.userData.theme?"bg-dark text-white":"bg-white text-dark"),children:[c?C():Object(_.jsx)("div",{className:"row",children:S&&S.length>0&&S.map((function(e,a){return Object(_.jsxs)("div",{onClick:function(){return function(e){var a=new FormData;return a.append("bank",e),a.append("appId",t.userConfig.appId),M({}),j(!0),h(e),P.a.post("/account_planner/credit_card_details",a).then((function(e){var t=e.data.response[0],a=t.credit_card_start_date,n=[(a=d.a.addMonths(new Date("".concat(k.getFullYear(),"-").concat(k.getMonth()+1,"-").concat(a).replace(/-/g,"/")),-1)).getFullYear(),a.getMonth()+1,a.getDate()],c=n[0],s=n[1],r=n[2],o=[s<10?"0".concat(s):s,r<10?"0".concat(r):r];s=o[0],r=o[1],a="".concat(c,"-").concat(s,"-").concat(r);var l=t.credit_card_end_date,i=[(l=new Date("".concat(k.getFullYear(),"-").concat(k.getMonth()+1,"-").concat(l).replace(/-/g,"/"))).getFullYear(),l.getMonth()+1,l.getDate()],u=i[0],b=i[1],m=i[2],f=[b<10?"0".concat(b):b,m<10?"0".concat(m):m];b=f[0],m=f[1],l="".concat(u,"-").concat(b,"-").concat(m);var p=t.credit_card_payment_date,h=[(p=d.a.addMonths(new Date("".concat(k.getFullYear(),"-").concat(k.getMonth()+1,"-").concat(p).replace(/-/g,"/")),1)).getFullYear(),p.getMonth()+1,p.getDate()],g=h[0],O=h[1],x=h[2],v=[O<10?"0".concat(O):O,x<10?"0".concat(x):x];O=v[0],x=v[1],p="".concat(g,"-").concat(O,"-").concat(x);var y=new Date(p)-new Date;y=Math.abs(y),y=Math.ceil(y/864e5);var _={cardNumber:t.credit_card_number,cardName:t.credit_card_name,startDate:a,endDate:l,payDate:p,remDays:y};M(_),j(!1)})).catch((function(e){console.log(e)}))}(e.id)},className:"col-6 text-center cardWrapper ".concat(p===e.id?"active":""),children:[Object(_.jsx)("i",{className:"fa fa-credit-card-alt"}),e.value]},a)}))}),b?C():Object.keys(y).length>0&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"py-3 text-center",children:y.cardName}),Object(_.jsxs)("div",{className:"container mt-10 text-center",children:[Object(_.jsx)("div",{className:"contactLabel",children:Object(_.jsx)(g.a,{id:"cardNumber",defaultMessage:"cardNumber"})}),Object(_.jsx)("div",{children:y.cardNumber}),Object(_.jsxs)("div",{className:"row pb-3 pt-3",children:[Object(_.jsxs)("div",{className:"col-6",children:[Object(_.jsx)("label",{children:Object(_.jsx)(g.a,{id:"startDate",defaultMessage:"startDate"})}),Object(_.jsx)("div",{children:y.startDate})]}),Object(_.jsxs)("div",{className:"col-6",children:[Object(_.jsx)("label",{children:Object(_.jsx)(g.a,{id:"endDate",defaultMessage:"endDate"})}),Object(_.jsx)("div",{children:y.endDate})]})]}),Object(_.jsxs)("div",{className:"row text-center",children:[Object(_.jsxs)("div",{className:"col-6",children:[Object(_.jsx)("label",{children:Object(_.jsx)(g.a,{id:"payDate",defaultMessage:"payDate"})}),Object(_.jsx)("div",{children:y.payDate})]}),Object(_.jsxs)("div",{className:"col-6",children:[Object(_.jsx)("label",{children:Object(_.jsx)(g.a,{id:"remainingDays",defaultMessage:"remainingDays"})}),Object(_.jsx)("div",{children:Object(_.jsx)(fe,{ccDetails:y})})]})]})]})]})]})]}))};pe.defaultProps={property:"String name"};var he=pe,ge=function(e){var t=e.onHide,a=e.onYes,n=Object(r.useContext)(v.a);return Object(_.jsxs)(L.a,Object(D.a)(Object(D.a)({},e),{},{style:{zIndex:1e4},children:[Object(_.jsx)(L.a.Header,{closeButton:!0,children:Object(_.jsx)(L.a.Title,{children:Object(_.jsx)(g.a,{id:"sureAbtSqlQueries",defaultMessage:"sureAbtSqlQueries"})})}),Object(_.jsx)(L.a.Body,{className:"rounded-bottom ".concat("dark"===n.userData.theme?"bg-dark text-white":"bg-white text-dark"),children:Object(_.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(_.jsx)("div",{children:Object(_.jsx)("button",{onClick:function(){return a()},className:"btn btn-bni",children:Object(_.jsx)(g.a,{id:"allow",defaultMessage:"allow"})})}),Object(_.jsx)("div",{children:Object(_.jsx)("button",{onClick:function(){return t()},className:"btn btn-secondary",children:Object(_.jsx)(g.a,{id:"restrict",defaultMessage:"restrict"})})})]})})]}))};ge.defaultProps={};var Oe=ge,xe=a(74),ve=a(382),ye=a(280),Me=function(e){var t=Object(R.a)(),a=Object(r.useContext)(v.a),n=5242880,c=1e3,o=Object(r.useState)({}),l=Object(s.a)(o,2),i=l[0],d=l[1],u=Object(r.useState)([]),b=Object(s.a)(u,2),j=b[0],m=b[1],p=[{inc_exp_id:"null",inc_exp_name:"Gross profit",inc_exp_amount:1e6,inc_exp_plan_amount:0,inc_exp_type:"Cr",inc_exp_date:f()(new Date).format("YYYY-MM-DD").toString(),inc_exp_category:"Category name",inc_exp_bank:"Bank name",inc_exp_comments:"your profit comments"},{inc_exp_id:"null",inc_exp_name:"Gross expense",inc_exp_amount:5e5,inc_exp_plan_amount:0,inc_exp_type:"Dr",inc_exp_date:f()(new Date).format("YYYY-MM-DD").toString(),inc_exp_category:"Category name",inc_exp_bank:"Bank name",inc_exp_comments:"your expense comments"}];return Object(_.jsxs)(L.a,Object(D.a)(Object(D.a)({},e),{},{style:{zIndex:1e4},children:[Object(_.jsx)(L.a.Header,{closeButton:!0,children:Object(_.jsxs)(L.a.Title,{children:[Object(_.jsx)(g.a,{id:"bulkImport",defaultMessage:"bulkImport"}),Object(_.jsxs)("em",{className:"ps-1",children:["(",Object(_.jsxs)("small",{className:"pe-1",children:[Object(_.jsx)(g.a,{id:"limit",defaultMessage:"limit"}),":"," ","".concat(5," MB,")]}),Object(_.jsxs)("small",{className:"pe-1",children:[Object(_.jsx)(g.a,{id:"maxRows",defaultMessage:"maxRows"}),":"," ","".concat(c,",")]}),Object(_.jsxs)("small",{children:[Object(_.jsx)(g.a,{id:"type",defaultMessage:"type"}),": CSV,"," "]}),Object(_.jsxs)("small",{className:"pe-1",children:[Object(_.jsx)(g.a,{id:"date",defaultMessage:"date"})," ",Object(_.jsx)(g.a,{id:"type",defaultMessage:"type"}),":"," YYYY-MM-DD"]}),")"]})]})}),Object(_.jsx)(L.a.Body,{className:"rounded-bottom p-0 ".concat("dark"===a.userData.theme?"bg-dark text-white":"bg-white text-dark"),children:Object(_.jsxs)("div",{className:"dropZone",children:[Object(_.jsx)(ye.a,{accept:"text/csv,text/comma-separated-values,application/csv",maxSize:n,onDrop:function(e,s,r){var o;e.length>0&&(d(e[0]),(o=e[0],new Promise((function(e,a){var s=o,r=new FileReader;r.readAsText(s),r.onload=function(r){var o=[],l=r.target.result.split(/\r\n|\n/),i=l[0].split(",");if(s.size<=n)if(l.length-1<=c){for(var d=1;d<l.length;d++){var u=l[d].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(u.length===i.length){for(var b=[],j=0;j<i.length;j++)b.push(Object(oe.a)({},i[j],u[j].replace(/\\/g,"").replaceAll('"',"")));var m=Object.assign.apply(Object,[{}].concat(b));o.push(m)}}e(o)}else a(new Error("".concat(t.formatMessage({id:"maxAllowedRowLimitIs",defaultMessage:"maxAllowedRowLimitIs"})," ").concat(c)));else a(new Error("".concat(t.formatMessage({id:"maxFileSizeLimitIs",defaultMessage:"maxFileSizeLimitIs"})," ").concat(n," MB")))},r.onerror=function(e){a(e)}}))).then((function(e){a.renderToast({message:"".concat(e.length," ").concat(t.formatMessage({id:"rowsAddedSuccessfully",defaultMessage:"rowsAddedSuccessfully"})),autoClose:1e4}),m(e)})).catch((function(e){m([]),a.renderToast({type:"error",icon:"fa fa-times-circle",message:e})})))},className:"text-center",children:function(e){var t=e.getRootProps,a=e.getInputProps,n=e.isDragAccept,c=e.isDragReject,s="dropZoneWrapper",r=Object(_.jsx)("div",{children:Object(_.jsx)(g.a,{id:"dragFilesHere",defaultMessage:"dragFilesHere"})});return n&&(s="".concat(s," bg-success"),r=Object(_.jsx)("div",{className:"upload-success",children:Object(_.jsx)(g.a,{id:"dropFileOrfilesHere",defaultMessage:"dropFileOrfilesHere"})})),c&&(s="".concat(s," bg-danger"),r=Object(_.jsx)("div",{className:"upload-error",children:Object(_.jsx)(g.a,{id:"fileTypeNotAllowed",defaultMessage:"fileTypeNotAllowed"})})),Object(_.jsxs)("div",Object(D.a)(Object(D.a)({},t()),{},{className:"".concat(s," title"),children:[Object(_.jsx)("input",Object(D.a)({},a())),r]}))}}),Object.keys(i).length>0&&Object(_.jsx)("div",{className:"p-1 text-center",children:Object(_.jsxs)("small",{className:"icon-bni",children:[Object(_.jsx)("i",{className:"fa fa-file-excel-o pe-1"}),i.name,Object(_.jsx)("small",{className:"ps-1",children:Object(_.jsxs)("em",{children:["(",function(e){var t=(e/1024/1024).toFixed(2);if(t>0)return"".concat(t," MB");var a=(e/1024).toFixed(2);return"".concat(a," KB")}(i.size),")"]})})]})}),Object(_.jsxs)("div",{className:"d-flex justify-content-evenly",children:[Object(_.jsx)("button",{className:"btn btn-bni w-50 rounded-0 rounded-start border-end",children:Object(_.jsxs)(U.a,{datas:p,filename:"inc-exp-csv-sample-import.csv",children:[Object(_.jsx)("i",{className:"fa fa-file-downoad pe-1"}),Object(_.jsx)(g.a,{id:"downloadCsvTemplate",defaultMessage:"downloadCsvTemplate"})]})}),Object(_.jsx)("button",{disabled:!j.length,onClick:function(){return function(){var e=new FormData;e.append("data",JSON.stringify(j)),e.append("appId",a.userConfig.appId),P.a.post("/account_planner/bulkImport",e).then((function(e){e.data.response&&a.renderToast({message:t.formatMessage({id:"bulkImportSuccess",defaultMessage:"bulkImportSuccess"})}),e.data.response||a.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:"bulkImportFailed",defaultMessage:"bulkImportFailed"})}),null===e.data.response&&myAlertContext.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(_.jsx)(Z.b,{}),content:Object(_.jsx)(Z.a,{})})})).catch((function(e){a.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:"bulkImportFailed",defaultMessage:"bulkImportFailed"})})})).finally((function(){return m([])}))}()},className:"btn-bni w-50 rounded-0 rounded-end",children:Object(_.jsx)(g.a,{id:"submit",defaultMessage:"submit"})})]})]})})]}))};Me.defaultProps={property:"String name"};var _e=Me,Ne=(a(290),Object(O.c)((function(e){var t,a=e.intl,n=Object(r.useContext)(we),c=Object(r.useContext)(v.a),o=Object(r.useContext)(J.a),l=n.incExpList,b=n.bankList,j=n.insertData,m=Object(r.useState)([]),p=Object(s.a)(m,2),h=p[0],O=p[1],x=Object(r.useState)(!1),y=Object(s.a)(x,2),M=y[0],N=y[1],D=function(){N(!0),n.setInsertData([]);var e=function(){var e=new FormData;return e.append("appId",c.userConfig.appId),P.a.post("/account_planner/getIncExpTemplate",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}();Promise.all([e]).then((function(e){var t=e[0].map((function(e){var t=e.temp_inc_exp_name,a=e.temp_amount,n=e.temp_inc_exp_type,c=e.temp_inc_exp_date,s=e.temp_category,r=e.temp_bank;return{inc_exp_id:"",inc_exp_name:t,inc_exp_amount:0,inc_exp_plan_amount:a,inc_exp_type:n,inc_exp_date:f()().date(c).add(1,"months").format("YYYY-MM-DD"),inc_exp_category:s,inc_exp_bank:r,inc_exp_comments:""}})).sort((function(e,t){return new Date(e.inc_exp_date.replace(/-/g,"/"))-new Date(t.inc_exp_date.replace(/-/g,"/"))}));n.setInsertData(t)})).finally((function(){N(!1)}))};Object(r.useEffect)((function(){D()}),[a]),Object(r.useEffect)((function(){var e={fetch:{dropDownList:l.map((function(e,t){return{id:e.id,value:e.value}}))}},t={fetch:{dropDownList:b}};ne.c[0].rowElements[3]="number",ne.c[0].rowElements[6]=e,ne.c[0].rowElements[7]=t,ne.c[0].rowElements[4]={radio:{radioList:[{label:a.formatMessage({id:"credit",defaultMessage:"credit"}),value:"Cr",checked:!1},{label:a.formatMessage({id:"debit",defaultMessage:"debit"}),value:"Dr",checked:!0}]}};var n=function(e,t){var a=t&&e.filter((function(e){var a;return null===(a=e.value)||void 0===a?void 0:a.toLowerCase().includes(null===t||void 0===t?void 0:t.toLowerCase())}));return a.length>0?a[0].id:""},c=Object(u.a)(j).map((function(e){return e.inc_exp_category=n(l,e.inc_exp_category),e.inc_exp_bank=n(b,e.inc_exp_bank),e}));O([]),setTimeout((function(){var e=c.filter((function(e){return"Cr"===e.inc_exp_type})).reduce((function(e,t){return Number(e)+Number(t.inc_exp_plan_amount)}),0),t=c.filter((function(e){return"Dr"===e.inc_exp_type})).reduce((function(e,t){return Number(e)+Number(t.inc_exp_plan_amount)}),0);O({table:c,total:{inc_exp_plan_amount:[{value:e,prefix:"",suffix:"(+)"},{value:t,prefix:"",suffix:"(-)"},{value:e-t,prefix:"",suffix:"(=)",className:"rounded bni-bg text-dark p-1"}]}})}),100)}),[j,a]);var w=ne.c.map((function(e){var t={header:{searchPlaceholder:a.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),searchable:!1},footer:{total:{title:a.formatMessage({id:"total",defaultMessage:"total"}),locale:"en",currency:"",maxDecimal:2},pagination:{currentPage:"last",maxPagesToShow:5}}};return e.config=t,e.TableAliasRows=["id","transaction","amount","plan","type","date","category","bank","comments"].map((function(e){return a.formatMessage({id:e,defaultMessage:e})})),e})),S=function(){O([])};return Object(_.jsxs)("div",{children:[(null===h||void 0===h||null===(t=h.table)||void 0===t?void 0:t.length)>0&&Object(_.jsxs)("div",{children:[Object(_.jsx)("h6",{children:Object(_.jsx)(g.a,{id:"planFromTemplate",defaultMessage:"planFromTemplate"})}),w.sort((function(e,t){return e.id>t.id})).map((function(e,t){return Object(_.jsx)(T.a,{config:e.config,Table:e.Table,TableRows:e.TableRows,TableAliasRows:e.TableAliasRows,rowElements:e.rowElements,dbData:h,postApiUrl:"/account_planner/postAccountPlanner",onPostApi:function(e){return function(e){var t=e.status,c=e.data;200===t?(e&&c&&"boolean"===typeof c.response&&null!==c.response&&c.response&&n.renderToast({message:a.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),e&&c&&"boolean"===typeof c.response&&null!==c.response&&!1===c.response&&n.renderToast({type:"error",icon:"fa fa-times-circle",message:a.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),e&&c&&null===c.response&&o.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(_.jsx)(Z.b,{}),content:Object(_.jsx)(Z.a,{})})):n.renderToast({type:"error",icon:"fa fa-times-circle",message:a.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}(e)},onChangeParams:function(e){},showTooltipFor:e.showTooltipFor,defaultValues:e.defaultValues,onReFetchData:S,cellWidth:[4,13,10,10,13,10,13,13,13],ajaxButtonName:a.formatMessage({id:"submit",defaultMessage:"submit"}),appIdKeyValue:{key:"inc_exp_appId",value:c.userConfig.appId},theme:c.userData.theme},t)}))]}),M&&Object(_.jsx)("div",{className:"relativeSpinner",children:Object(_.jsx)(i.a,{type:d.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})]})}))),De=a(137),we=o.a.createContext();t.default=function(e){var t,a=Object(R.a)(),o=Object(r.useContext)(xe.a);document.title="".concat(o.appName," - ").concat(a.formatMessage({id:"moneyPlanner",defaultMessage:"moneyPlanner"}));var l=Object(r.useContext)(v.a),u=Object(r.useState)([]),b=Object(s.a)(u,2),j=b[0],m=b[1],p=Object(r.useState)([]),h=Object(s.a)(p,2),O=h[0],x=h[1],y=Object(r.useState)([]),M=Object(s.a)(y,2),D=M[0],w=M[1],S=Object(r.useState)([]),Y=Object(s.a)(S,2),C=Y[0],T=Y[1],I=Object(r.useState)([]),F=Object(s.a)(I,2),E=F[0],L=F[1],B=Object(r.useState)([]),A=Object(s.a)(B,2),V=A[0],H=A[1],z=Object(r.useState)([]),W=Object(s.a)(z,2),G=W[0],K=W[1],U=Object(r.useState)([]),J=Object(s.a)(U,2),Z=J[0],Q=J[1],ne=Object(r.useState)(""),ce=Object(s.a)(ne,2),se=ce[0],oe=ce[1],le=Object(r.useState)([]),ie=Object(s.a)(le,2),de=ie[0],ue=ie[1],be=Object(r.useState)(""),me=Object(s.a)(be,2),fe=me[0],pe=me[1],ge=Object(r.useState)(""),ye=Object(s.a)(ge,2),Me=ye[0],Se=ye[1],Ye=Object(r.useState)(""),ke=Object(s.a)(Ye,2),Ce=ke[0],Te=ke[1],Pe=Object(r.useState)(""),Ie=Object(s.a)(Pe,2),Fe=Ie[0],Ee=Ie[1],Le=Object(r.useState)(""),Re=Object(s.a)(Le,2),Be=Re[0],Ae=Re[1],Ve=Object(r.useState)({}),He=Object(s.a)(Ve,2),ze=He[0],We=He[1],Ge=Object(r.useState)(!1),Ke=Object(s.a)(Ge,2),Ue=Ke[0],Je=Ke[1],Ze=Object(r.useState)(!1),qe=Object(s.a)(Ze,2),Qe=qe[0],Xe=qe[1],$e=Object(r.useState)(!1),et=Object(s.a)($e,2),tt=et[0],at=et[1],nt=Object(r.useState)(!1),ct=Object(s.a)(nt,2),st=ct[0],rt=ct[1],ot=Object(r.useState)(!1),lt=Object(s.a)(ot,2),it=lt[0],dt=lt[1],ut=Object(r.useState)(!1),bt=Object(s.a)(ut,2),jt=bt[0],mt=bt[1],ft=Object(r.useState)(!1),pt=Object(s.a)(ft,2),ht=pt[0],gt=pt[1],Ot=function(e){var t=new FormData;return t.append("bank",e),t.append("appId",l.userConfig.appId),P.a.post("/account_planner/credit_card_details",t)},xt=function(e,t,a){var n=new FormData;return n.append("startDate",e),n.append("endDate",t),n.append("bank",a),n.append("appId",l.userConfig.appId),P.a.post("/account_planner/getIncExpChartData",n)},vt=function(e,t,a){var n=new FormData;return n.append("startDate",e),n.append("endDate",t),n.append("card",a),n.append("appId",l.userConfig.appId),P.a.post("/account_planner/getCreditCardChartData",n)},yt=function(e){var t=new FormData;return t.append("bank",e),t.append("appId",l.userConfig.appId),P.a.post("/account_planner/getBankDetails",t)};Object(r.useEffect)((function(){var e=function(){var e=new FormData;return e.append("appId",l.userConfig.appId),P.a.post("/account_planner/year_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}(),t=function(){var e=new FormData;return e.append("appId",l.userConfig.appId),P.a.post("/account_planner/bank_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}(),n=function(){var e=new FormData;return e.append("appId",l.userConfig.appId),P.a.post("/account_planner/cc_year_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}(),c=function(){var e=new FormData;return e.append("appId",l.userConfig.appId),P.a.post("/account_planner/credit_card_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}(),s=function(){var e=new FormData;return e.append("appId",l.userConfig.appId),P.a.post("/account_planner/inc_exp_list",e).then((function(e){return e.data.response})).catch((function(e){console.log(e)}))}();Promise.all([e,t,n,c,s]).then((function(e){var t,n,c,s,r,o,l,i,d;(null===(t=e[0])||void 0===t?void 0:t.length)>0?m(e[0]):m([{id:a.formatMessage({id:"null",defaultMessage:"null"}),value:a.formatMessage({id:"null",defaultMessage:"null"})}]),(null===(n=e[0])||void 0===n?void 0:n.length)>0&&e[0][0].id?Se(e[0][0].id):Se("Null"),(null===(c=e[1])||void 0===c?void 0:c.length)>0?w(e[1]):w([{id:a.formatMessage({id:"null",defaultMessage:"null"}),value:a.formatMessage({id:"null",defaultMessage:"null"})}]),(null===(s=e[1])||void 0===s?void 0:s.length)>0&&e[1][0].id?Te(e[1][0].id):Te("Null"),(null===(r=e[2])||void 0===r?void 0:r.length)>0?x(e[2]):x([{id:a.formatMessage({id:"null",defaultMessage:"null"}),value:a.formatMessage({id:"null",defaultMessage:"null"})}]),(null===(o=e[2])||void 0===o?void 0:o.length)>0&&e[2][0].id?oe(f()(new Date).format("YYYY").toString()):oe("Null"),(null===(l=e[3])||void 0===l?void 0:l.length)>0?ue(e[3]):ue([{id:a.formatMessage({id:"null",defaultMessage:"null"}),value:a.formatMessage({id:"null",defaultMessage:"null"})}]),(null===(i=e[3])||void 0===i?void 0:i.length)>0&&e[3][0].id?pe(null!==wt&&void 0!==wt&&wt.card?null===wt||void 0===wt?void 0:wt.card:e[3][0].id):pe("Null"),(null===(d=e[4])||void 0===d?void 0:d.length)>0?H(e[4]):H([{id:null,value:null,isIncomeMetric:null}])})),L([])}),[wt]);var Mt=function(){var e=Object(c.a)(Object(n.a)().mark((function e(t,a){var s,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Je(!0),T([]),Q([]),s="".concat(Me,"-01-01"),r="".concat(Me,"-12-31"),e.next=7,xt(s,r,Ce).then(function(){var e=Object(c.a)(Object(n.a)().mark((function e(s){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.data.response,T(r),e.next=4,yt(Ce).then(function(){var e=Object(c.a)(Object(n.a)().mark((function e(c){var s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K(c.data.response),"function"!==typeof a||!t){e.next=6;break}return e.next=4,a(null===r||void 0===r||null===(s=r.category[0])||void 0===s?void 0:s.month);case 4:e.next=8;break;case 6:return e.next=8,a();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){K([])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){T([]),console.log(e)})).finally((function(){Je(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_t=function(){var e=Object(c.a)(Object(n.a)().mark((function e(t,a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xe(!0),L([]),We([]),Ae(null),e.next=6,Ot(fe).then(function(){var e=Object(c.a)(Object(n.a)().mark((function e(s){var r,o,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.data.response[0],We(r),o="".concat(se,"-01-01"),l="".concat(se,"-12-31"),e.next=6,vt(o,l,fe).then(function(){var e=Object(c.a)(Object(n.a)().mark((function e(c){var s,o,l,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=c.data.response,o=s.map((function(e){return e.month})),l=o.findIndex((function(e){return e===f()().format("MMM-YYYY").toString()})),i=l>-1?o[l]:s[11].month,L(s),"function"!==typeof a||!t){e.next=10;break}return e.next=8,a(i);case 8:e.next=12;break;case 10:return e.next=12,a(r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})).finally((function(){Xe(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Nt=function(){return Object(_.jsx)("div",{className:"relativeSpinner",children:Object(_.jsx)(i.a,{type:d.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})},Dt=Object(q.a)(),wt={fetch:Dt.get("fetch"),date:Dt.get("date"),bank:Dt.get("bank"),card:Dt.get("card")},St=Object(r.useState)(!1),Yt=Object(s.a)(St,2),kt=Yt[0],Ct=Yt[1],Tt=Object(r.useState)(!1),Pt=Object(s.a)(Tt,2),It=Pt[0],Ft=Pt[1];return Object(r.useEffect)((function(){var e=f()(wt.date).format("YYYY").toString();j.length>0&&D.length>0&&"bankTransactions"===wt.fetch&&(Se(e),Te(wt.bank),Ct(!0))}),[JSON.stringify(wt),j,D]),Object(r.useEffect)((function(){if(de.length>0&&O.length>0&&"ccTransactions"===wt.fetch){var e=f()(wt.date).format("YYYY").toString();oe(e),pe(wt.card),Ft(!0)}}),[JSON.stringify(wt),de,O]),Object(r.useEffect)((function(){if(Me&&Ce&&kt){var e=f()(wt.date).format("MMM-YYYY").toString();Mt(!1,(function(){Ee(e),Ct(!1),setTimeout((function(){var e;null===(e=document.getElementById("incExpTable"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"start"})}),200)}))}}),[JSON.stringify(wt),kt,Me,Ce]),Object(r.useEffect)((function(){se&&fe&&It&&_t(!1,(function(e){var t=Number(e.credit_card_start_date)>=Number(f()(wt.date).format("D").toString())?f()(wt.date).format("MMM-YYYY").toString():f()(wt.date).add(1,"M").format("MMM-YYYY").toString();Ae(t),Ft(!1),setTimeout((function(){var e;null===(e=document.getElementById("ccTable"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"start"})}),200)}))}),[JSON.stringify(wt),It,se,fe]),Object(_.jsxs)(we.Provider,{value:{renderToast:function(e){var t=e.autoClose,a=void 0===t?5e3:t,n=e.type,c=void 0===n?"success":n,s=e.icon,r=void 0===s?"fa fa-check-circle":s,o=e.message;return ve.b[c](Object(_.jsx)("div",{children:Object(_.jsxs)("span",{children:[Object(_.jsx)("i",{className:r})," ",Object(_.jsx)("span",{dangerouslySetInnerHTML:{__html:o}})]})}),{autoClose:a})},bankSelected:Ce,setBankSelected:Te,bankDetails:G,bankList:D,setBankList:w,yearSelected:Me,setYearSelected:Se,yearList:j,monthYearSelected:Fe,onMonthYearSelected:function(e){Ee(e)},incExpList:V,setIncExpList:H,ccBankList:de,ccBankSelected:fe,setCcBankSelected:pe,ccYearSelected:se,setCcYearSelected:oe,ccYearList:O,setCcBankList:ue,chartData:C,ccChartData:E,ccDetails:ze,setCcDetails:We,ccMonthYearSelected:Be,onCcMonthYearSelected:function(e){Ae(e)},insertData:Z,setInsertData:Q},children:[Object(_.jsx)(ve.a,{className:"bniToaster"}),Object(_.jsxs)("section",{className:"",children:[tt&&Object(_.jsx)(he,{show:tt,onHide:function(){return at(!1)},size:"sm",animation:!1}),st&&Object(_.jsx)(je,{className:"accountPlanner fastShopping",show:st,onHide:function(){return rt(!1)},size:"sm",animation:!1}),it&&Object(_.jsx)(_e,{className:"accountPlanner",show:it,onHide:function(){return dt(!1)},centered:!0,size:"lg",backdrop:"static"}),jt&&Object(_.jsx)(Oe,{className:"confirmQBModal",show:jt,onHide:function(){mt(!1),setToggleQueryBuilder(!1)},onYes:function(){mt(!1),setToggleQueryBuilder(!0)},size:"md",animation:!1}),Object(_.jsxs)("div",{className:"m-2",children:[Object(_.jsx)(De.a,{icon:"fa fa-cubes",intlId:"moneyPlanner"}),Object(_.jsx)("div",{className:"pt-2",children:Object(_.jsx)("div",{className:"accountPlanner ".concat(l.userData.theme),children:D.length>0&&j.length&&O.length>0&&de.length>0>0?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"badge ".concat("dark"===l.userData.theme?"bg-secondary text-white":"bg-light text-dark"),children:Object(_.jsx)(g.a,{id:"bankTransactions",defaultMessage:"bankTransactions"})}),Object(_.jsxs)("div",{className:"row mt-10",children:[Object(_.jsx)("div",{className:"col-lg-3 col-sm-4 py-2",children:Object(_.jsx)($,{})}),Object(_.jsx)("div",{className:"col-lg-3 col-sm-4 py-2",children:Object(_.jsx)(ee,{})}),Object(_.jsx)("div",{className:"col-lg-3 col-sm-4 py-2",children:Object(_.jsx)("div",{className:"d-grid gap-2",children:Object(_.jsx)("button",{onClick:function(){return Mt(!0,(function(e){Ee(e)}))},className:"btn icon-bni bni-border bni-border-all bni-border-all-1",children:Object(_.jsx)(g.a,{id:"generate",defaultMessage:"generate"})})})}),Object(_.jsx)("div",{className:"col-lg-1 col-4 py-2 mb-2",children:Object(_.jsx)("button",{onClick:function(){return rt(!0)},className:"btn btn-bni w-100",title:a.formatMessage({id:"fastShopping",defaultMessage:"fastShopping"}),children:Object(_.jsx)("i",{className:"fa fa-cart-plus"})})}),Object(_.jsx)("div",{className:"col-lg-1 col-4 py-2 mb-2",children:Object(_.jsx)("button",{onClick:function(){return dt(!0)},className:"btn btn-bni w-100",title:a.formatMessage({id:"bulkImport",defaultMessage:"bulkImport"}),disabled:"1"!==(null===l||void 0===l||null===(t=l.userConfig)||void 0===t?void 0:t.planIsBulkImport),children:Object(_.jsx)("i",{className:"fa fa-cloud-upload"})})}),Object(_.jsx)("div",{className:"col-lg-1 col-4 py-2 mb-2",children:Object(_.jsx)("button",{onClick:function(){return gt(!ht)},className:"btn btn-bni w-100",title:a.formatMessage({id:"planFromTemplate",defaultMessage:"planFromTemplate"}),children:Object(_.jsx)("i",{className:"fa fa-clone"})})})]}),D.length>0&&ht&&Object(_.jsx)(Ne,{}),Ue?Nt():Object(_.jsx)(_.Fragment,{children:V.length>0&&G.length>0&&Object(_.jsx)(N,{})}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12 b-0 mb-10 pr-0 pl-0",children:G.length>0&&Object(_.jsx)(X,{})})}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsx)("div",{className:"badge ".concat("dark"===l.userData.theme?"bg-secondary text-white":"bg-light text-dark"),children:Object(_.jsx)(g.a,{id:"creditCardTransactions",defaultMessage:"creditCardTransactions"})})})}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-4 py-2",children:Object(_.jsx)(ae,{})}),Object(_.jsx)("div",{className:"col-md-4 py-2",children:Object(_.jsx)(te,{})}),Object(_.jsx)("div",{className:"col-md-3 py-2",children:Object(_.jsx)("div",{className:"d-grid gap-2",children:Object(_.jsx)("button",{onClick:function(){return _t(!0,(function(e){Ae(e)}))},className:"btn icon-bni bni-border bni-border-all bni-border-all-1",children:Object(_.jsx)(g.a,{id:"generate",defaultMessage:"generate"})})})}),Object(_.jsx)("div",{className:"col-md-1 py-2",children:Object(_.jsx)("button",{onClick:function(){return at(!0)},className:"btn btn-bni w-100",children:Object(_.jsx)("i",{className:"fa fa-calendar-o mt-20"})})})]}),Qe?Nt():E&&E.length>0?Object(_.jsx)(k,{}):Object(_.jsx)("div",{className:"py-3 text-center",children:Object(_.jsx)(g.a,{id:"noRecordsGenerated",defaultMessage:"noRecordsGenerated"})}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12 pt-2",children:Be&&fe&&V.length&&de.length&&ze&&Object(_.jsx)(re,{})})})]}):Nt()})})]})]})]})}},63:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o}));a(1);var n=a(1243),c=a(67),s=a(0),r=function(){return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"d-flex align-items-center",children:[Object(s.jsx)("i",{className:"fa fa-exclamation-triangle fa-2x pt-2 text-danger"}),Object(s.jsxs)("div",{className:"ps-2",children:[Object(s.jsx)("div",{className:"fs-3",children:Object(s.jsx)(n.a,{id:"alert",defaultMessage:"alert"})}),Object(s.jsx)("div",{className:"fs-6",children:Object(s.jsx)(n.a,{id:"maximumQuotaExceeded",defaultMessage:"maximumQuotaExceeded"})})]})]})})},o=function(){return Object(s.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:Object(s.jsxs)("div",{children:[Object(s.jsxs)(c.a,{className:"btn btn-sm btn-primary me-1 rounded-pill",to:"/billing",children:[Object(s.jsx)("i",{className:"fa fa-credit-card-alt pe-1"}),Object(s.jsx)(n.a,{id:"upgradeNow",defaultMessage:"upgradeNow"})]}),Object(s.jsx)("span",{className:"fs-6",children:Object(s.jsx)(n.a,{id:"accessUnlimitedStorage",defaultMessage:"accessUnlimitedStorage"})})]})})}},70:function(e,t,a){"use strict";var n=a(25),c=a(39),s=a(28),r=a(29),o=a(26),l=a(1),i=a(30),d=a(1262),u=a(0),b=["info","checked","theme","marker"],j=function(e){var t=e.info,a=e.checked,c=e.theme,s=e.marker,r=Object(i.a)(e,b);return Object(u.jsxs)(d.a.Group,{className:"dropdown-item mb-0",controlId:t.id,children:[s&&Object(u.jsx)("span",{className:"sup",children:"*"}),Object(u.jsx)(d.a.Check,Object(n.a)({className:"px-3 py-0 ".concat("dark"===c?"text-light":"text-dark"),type:"checkbox",label:t.value,checked:a},r))]})},m=a(1243),f=a(448),p=a(1224),h=a(1247),g=a(1248),O=function(e){var t=e.index,a=e.type,i=e.primaryKey,b=e.element,f=e.value,O=e.placeholder,x=e.onChange,v=e.intl,y=e.theme,M=Object(l.useRef)(null),_=Object(l.useRef)(null),N=Object(l.useState)(!1),D=Object(o.a)(N,2),w=D[0],S=D[1],Y=Object(l.useRef)(),k=function(){return v.formatMessage({id:O,defaultMessage:O})},C=function(){var e=f,t=b.fetch.dropDownList;return e="single"===a?(e=t.length>0&&t.filter((function(e){return e.id===f}))).length>0?e[0].value:k():"object"===typeof e&&e.length>0?e.map((function(e){return e.toString()})):[],[t,e]},T=C(),P=Object(o.a)(T,2),I=P[0],F=P[1],E=I.map((function(e){return e.checked=e.id&&(Array.isArray(F)?F.filter((function(t){return t.toString()===e.id.toString()})).length>0:F===e.value),e})),L="single"===a?I:E,R=Object(l.useState)(L),B=Object(o.a)(R,2),A=B[0],V=B[1],H=Object(l.useState)(F),z=Object(o.a)(H,2),W=z[0],G=z[1],K=Object(l.useState)(""),U=Object(o.a)(K,2),J=U[0],Z=U[1],q=Object(l.useState)(F),Q=Object(o.a)(q,2),X=Q[0],$=Q[1];Object(l.useEffect)((function(){var e=C(),t=Object(o.a)(e,2),n=t[0],c=t[1],s=n.map((function(e){return e.checked=e.id&&(Array.isArray(c)?c.filter((function(t){return t.toString()===e.id.toString()})).length>0:c===e.value),e}));V("single"===a?n:s),G(c),$(c)}),[b]),Object(l.useEffect)((function(){"multiple"===a&&G(te(F))}),[F]);var ee=function(){var e=Object(r.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(t),a=I.filter((function(e){return e.value.toString().toLowerCase().includes(t.toString().toLowerCase())})),e.next=4,V(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=e.length>0&&I.filter((function(t){return t.id===e[0]}));return 1===t.length?(t=t[0].value,e.length>1?"".concat(t," + ").concat(e.length-1," more..."):t):k()},ae=function(e,a){var s=e.target.checked,r=a.id&&s?[].concat(Object(c.a)(X),[a.id]):X.filter((function(e){return e!==a.id}));r=Object(c.a)(new Set(r));var o=A.map((function(e){return r.includes(e.id)?Object(n.a)(Object(n.a)({},e),{},{checked:!0}):Object(n.a)(Object(n.a)({},e),{},{checked:!1})}));V(o),$(r),G(te(r)),x(t,r,i)};return Object(l.useEffect)((function(){var e;w&&(Y.current&&Y.current.focus({preventScroll:!0}),null===_||void 0===_||null===(e=_.current)||void 0===e||e.focus({preventScroll:!0}),setTimeout((function(){var e;null===_||void 0===_||null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"instant",block:"nearest"})}),1))}),[w]),Object(u.jsxs)(p.a,{show:w,onToggle:function(){return S(!w)},ref:M,autoClose:"outside",className:"d-inline-block w-100",children:[Object(u.jsx)(p.a.Toggle,{variant:"".concat("dark"===y?"dark":"white"),className:"p-2 rounded cursor-pointer w-100 border d-flex align-items-center justify-content-between ".concat("dark"===y?"border-black":"border-1"),style:{fontSize:"0.9rem"},as:"div",children:Object(u.jsx)("span",{className:"text-truncate",children:W||v.formatMessage({id:O,defaultMessage:O})})}),Object(u.jsxs)(p.a.Menu,{variant:"".concat("dark"===y?"dark":"white"),className:"w-100 p-0 border ".concat("dark"===y?"border-black":"border-1"),show:w,children:[(null===b||void 0===b?void 0:b.searchable)&&Object(u.jsx)(p.a.Item,{className:"p-0 border-0",children:Object(u.jsxs)(h.a,{children:[Object(u.jsx)(d.a.Control,{size:"sm",ref:Y,className:"".concat("dark"===y?"bg-dark text-white":"bg-white text-dark"," rounded-bottom-0 border-0 shadow-none py-2"),onChange:function(e){e.preventDefault(),ee(e.target.value)},placeholder:v.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),type:"text",value:J}),J&&Object(u.jsx)("i",{onClick:function(e){Z(""),ee("")},className:"fa fa-times text-danger bg-".concat(y," p-2")})]})}),Object(u.jsx)(g.a,{className:"px-0",style:{maxHeight:"200px",overflowY:"auto",overflowX:"hidden"},children:A.length>0?A.map((function(e,n){return Object(u.jsx)(p.a.Item,{ref:e.checked?_:null,className:"small px-0 py-0 border-0 text-wrap",as:"div",children:"multiple"===a?Object(u.jsx)(j,{onChange:function(t){ae(t,e)},checked:e.checked,marker:e.marker,info:e,theme:y},n):Object(u.jsxs)("div",{className:"cursor-pointer px-2 py-1 ".concat(e.checked?"bni-bg text-dark":""," ").concat(0!==n||b.searchable?"":"rounded-top"," ").concat(n===A.length-1?"rounded-bottom":"","\n                    "),onClick:function(){return x(t,(n=e).id,i),G(n.value),void("single"===a&&S(!1));var n},children:[e.value,e.marker&&Object(u.jsx)("span",{className:"sup",children:"*"})]})},n)})):Object(u.jsx)(p.a.Item,{className:"text-center small text-wrap",children:Object(u.jsx)(m.a,{id:"noRecordsGenerated",defaultMessage:"noRecordsGenerated"})})})]})]})};O.defaultProps={type:"single",placeholder:"select",theme:""};t.a=Object(f.c)(O)},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),c=a(79),s=function(){var e=Object(c.h)().search;return Object(n.useMemo)((function(){return new URLSearchParams(e)}),[e])}},98:function(e,t,a){"use strict";var n=a(25),c=a(39),s=a(28),r=a(29),o=a(26),l=a(1),i=a(49),d=a(33),u=a(30),b=a(0),j=function(e){var t=e.index,a=e.primaryKey,n=e.onChange,c=e.element,s=e.value,r=t.i,i=t.j,d=Object(l.useState)(c.radio.radioList),u=Object(o.a)(d,1)[0],j=e.value||u.filter((function(e){return e.checked}))[0].value,m=Object(l.useState)(j),f=Object(o.a)(m,2),p=f[0],h=f[1];return Object(l.useEffect)((function(){h(s)}),[s]),Object(b.jsx)("div",{className:"radioComponent",children:u.length&&u.map((function(e,c){return Object(b.jsxs)("div",{className:"radioWrapper",children:[Object(b.jsx)("input",{type:"radio",onChange:function(c){h(c.target.value),n(t,e.value,a)},value:e.value,checked:e.value===p,name:"".concat(i,"-").concat(r),id:"".concat(i,"-").concat(c,"-").concat(r)})," ",Object(b.jsx)("span",{className:"checkmark"}),Object(b.jsx)("label",{htmlFor:"".concat(i,"-").concat(c,"-").concat(r),children:e.label})]},c)}))})};j.defaultProps={property:"String name"};var m=j,f=a(70),p=a(126),h=a.n(p),g=a(53),O=a.n(g),x=a(75),v=(a(248),a(330),["isPostable","config","index","value","element","primaryKey","onChange","placeholder","showDecrement","showIncrement","onDelete","onAddRow","theme"]);var y=function(e){var t=Object(l.useContext)(x.a),a=e.isPostable,c=e.config,s=e.index,r=e.value,i=e.element,j=e.primaryKey,p=e.onChange,g=e.placeholder,y=e.showDecrement,M=e.showIncrement,_=e.onDelete,N=e.onAddRow,D=e.theme,w=Object(u.a)(e,v),S=Object(l.useRef)([]);S.current=[];var Y=Object(l.useState)(r?new Date(r):new Date),k=Object(o.a)(Y,2),C=k[0],T=k[1],P=Object(l.useState)(r?new Date(r):new Date),I=Object(o.a)(P,2),F=I[0],E=I[1],L=function(e,t,a,n){p(t,a,n)};return Object(b.jsx)("div",{children:function(e,s,r,o){if("string"===typeof s)switch(s){case"textbox":return Object(b.jsx)("input",Object(n.a)({type:"text",placeholder:g,onBlur:function(t){return L(0,e,t.target.value,o)},className:"inputText ".concat(D),defaultValue:r},w));case"number":return Object(b.jsx)("input",Object(n.a)({id:"".concat(e.j,"-").concat(e.i),type:"number",min:"0",step:".01",placeholder:g,ref:function(t){return function(e,t){t&&!S.current.includes(t)&&S.current.push(Object(d.a)({},e.i,t))}(e,t)},onBlur:function(t){return L(0,e,t.target.value,o)},className:"inputText ".concat(D),defaultValue:Number(r).toFixed(c.footer.total.maxDecimal)},w));case"textarea":return Object(b.jsx)("textarea",Object(n.a)({placeholder:g,onBlur:function(t){return L(0,e,t.target.value,o)},rows:"3",className:"inputText ".concat(D),defaultValue:r},w));case"label":default:return Object(b.jsx)("div",Object(n.a)(Object(n.a)({},w),{},{children:r}));case"boolean":return Object(b.jsxs)("div",Object(n.a)(Object(n.a)({},w),{},{className:"text-center",children:[("1"===r||"True"===r||"true"===r||!0===r)&&Object(b.jsx)("i",{className:"fa fa-check"}),("0"===r||"False"===r||"false"===r||!1===r)&&Object(b.jsx)("i",{className:"fa fa-times"})]}));case"relativeTime":return Object(b.jsx)("div",{children:O()(r||new Date).locale(t.localeLanguage).tz(O.a.tz.guess()).fromNow()});case"checkbox":return a?Object(b.jsxs)("div",{className:"d-flex justify-content-between",children:[y&&Object(b.jsx)("i",{onClick:function(){return _(e)},style:{fontSize:"1.5rem",fontWeight:"700"},className:"fa fa-times-circle text-danger cursor-pointer"}),M&&Object(b.jsx)("i",{onClick:function(){return N(!0)},style:{fontSize:"1.5rem",fontWeight:"700"},className:"fa fa-plus-circle text-success cursor-pointer"})]}):Object(b.jsx)("div",Object(n.a)(Object(n.a)({},w),{},{children:r}));case"date":return Object(b.jsx)(h.a,{value:C||new Date,format:"y-MM-dd",clearIcon:null,onChange:function(t){T(t),p(e,function(e){var t=[e.getFullYear(),e.getMonth()+1>9?e.getMonth()+1:"0".concat(e.getMonth()+1),e.getDate()>9?e.getDate():"0".concat(e.getDate())],a=t[1],n=t[2];return"".concat(t[0],"-").concat(a,"-").concat(n)}(t),o)}});case"dateTime":return Object(b.jsx)(h.a,{value:F,format:"y-MM-dd H:mm:ss",clearIcon:null,onChange:function(t){E(t),p(e,function(e){var t=[e.getFullYear(),e.getMonth()+1>9?e.getMonth()+1:"0".concat(e.getMonth()+1),e.getDate()>9?e.getDate():"0".concat(e.getDate()),e.getHours(),e.getMinutes(),e.getSeconds()],a=t[1],n=t[2],c=t[3],s=t[4],r=t[5];return c=c<10?"0"+c:c,s=s<10?"0"+s:s,r=r<10?"0"+r:r,"".concat(t[0],"-").concat(a,"-").concat(n," ").concat(c,":").concat(s,":").concat(r)}(t),o)}})}else if("object"===typeof s&&null!==s){switch(Object.keys(s)[0]){case"fetch":return Object(b.jsx)(f.a,{index:e,primaryKey:o,onChange:function(e,t,a){return p(e,t,a)},element:s,value:r,type:Array.isArray(r)?"multiple":"single",searchable:s.searchable,theme:D});case"radio":return Object(b.jsx)(m,{index:e,primaryKey:o,onChange:function(e,t,a){return p(e,t,a)},element:s,value:r},"".concat(e.i,"-").concat(e.j));default:return Object(b.jsx)("div",{children:"Unknown Element"})}}}(s,i,r,j)})},M=a(55),_=a.n(M),N=a(50),D=function(e){var t=e.totalPages,a=e.maxPagesToShow,s=e.onSetPage,r=Object(l.useState)(e.currentPage),i=Object(o.a)(r,2),d=i[0],u=i[1],j=Object(l.useState)([]),m=Object(o.a)(j,2),f=m[0],p=m[1];Object(l.useEffect)((function(){var e=[];e=a<t&&d>0?d<t-a?[].concat(Object(c.a)(g(a,d)),["...",t]):Object(c.a)(g(a+1,t-a)):Array.from({length:t},(function(e,t){return++t})),p(e)}),[a,t,d]);var h=function(e){u(e),s(e)},g=function(e,t){return Array(e).fill().map((function(e,a){return t+a}))};return f.length>0&&Object(b.jsxs)("ul",{className:"page",children:[Object(b.jsx)("li",{onClick:function(){return d>1?h(1):null},className:"lt ".concat(d>1?"":"disabled"),children:"<<"}),Object(b.jsx)("li",{onClick:function(){return d>1?h(d-1):null},className:"lt ".concat(d>1?"":"disabled"),children:"<"}),f.map((function(e,a){return Object(b.jsx)("li",Object(n.a)(Object(n.a)({onClick:function(){return!isNaN(e)&&e<=t?h(e):null}},e===d&&{className:"active"}),{},{children:e}),function(e){return"page-".concat(e)}(a))})),Object(b.jsx)("li",{onClick:function(){return d<t?h(d+1):null},className:"gt ".concat(d===t?"disabled":""),children:">"}),Object(b.jsx)("li",{onClick:function(){return d<t?h(t):null},className:"gt ".concat(d===t?"disabled":""),children:">>"})]})};D.defaultProps={};var w=D,S=["className","entity"],Y=function(e){var t=e.className,a=e.entity,c=Object(u.a)(e,S);return Object(b.jsx)("span",Object(n.a)({className:"htmlIcon ".concat(t),dangerouslySetInnerHTML:{__html:a}},c))};Y.defaultProps={property:"String name"};var k=Y,C=a(785),T=function(e){var t=Object(C.a)(),a=e.defaultRecordsPerPage,n=e.config,c=e.searchString,s=e.onSearchChange,r=e.onDropDownChange,i=e.onDismissSearch,d=e.theme,u=e.options,j=Object(l.useState)(!1),m=Object(o.a)(j,2),f=m[0],p=m[1],h=Object(l.useState)(c),g=Object(o.a)(h,2),O=g[0],x=g[1],v=Object(l.useState)(a),y=Object(o.a)(v,2),M=y[0],_=y[1],N=Object(l.useRef)(null),D=Object(l.useRef)(null),w=function(e){N.current&&!N.current.contains(e.target)&&p(!1)};Object(l.useEffect)((function(){return document.addEventListener("click",w,!0),function(){document.removeEventListener("click",w,!0)}}),[]),Object(l.useEffect)((function(){c&&D.current.focus({preventScroll:!0})}),[c]);return Object(b.jsxs)("div",{className:"group-input",children:[Object(b.jsxs)("div",{className:"inputWrapper",children:[Object(b.jsx)("input",{ref:D,onChange:function(e){return function(e){var t=e.target.value;s(t),x(t)}(e)},placeholder:n.header.searchPlaceholder,type:"text",value:O,className:"join-input small ".concat(d),spellCheck:"false"}),O&&Object(b.jsx)(k,{onClick:function(){i(),x("")},className:"dismiss",entity:"&#215;"})]}),Object(b.jsxs)("div",{ref:N,onClick:function(){return p(!f)},title:t.formatMessage({id:"showNRecordsPerPage",defaultMessage:"showNRecordsPerPage"},{n:M}),className:"join-select",children:[Object(b.jsx)("div",{style:f?{borderBottomRightRadius:0}:{borderBottomRightRadius:"5px"},className:"selected",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:M}),Object(b.jsx)(k,{className:"icon up",entity:"&#9662;"})]})}),f&&Object(b.jsx)("ul",{children:u.map((function(e,t){return Object(b.jsx)("li",{onClick:function(){return _(t=e),void r(t);var t},children:e},t)}))})]})]})},P=a(1243),I=a(448),F=a(145),E=a.n(F);function L(e){var t,a,d=Object(C.a)(),u=e.Table,j=e.config,m=e.className||"",f=e.id,p=e.TableRows,h=e.TableAliasRows,g=e.postApiUrl,O=e.onPostApi,x=e.insertCloneData,v=e.showTooltipFor,M=e.defaultValues,D=e.onTableUpdate,S=e.onReFetchData,Y=e.apiParams,I=e.onChangeParams,F=e.cellWidth,L=e.appIdKeyValue,R=e.theme,B=Object(l.useState)([]),A=Object(o.a)(B,2),V=A[0],H=A[1],z=Object(l.useState)(e.dbData.table),W=Object(o.a)(z,2),G=W[0],K=W[1],U=Object(l.useState)([]),J=Object(o.a)(U,2),Z=J[0],q=J[1],Q=Object(l.useState)(!1),X=Object(o.a)(Q,2),$=X[0],ee=X[1],te=Object(l.useState)(!1),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1],se=Object(l.useState)([]),re=Object(o.a)(se,2),oe=re[0],le=re[1],ie=Object(l.useState)({}),de=Object(o.a)(ie,2),ue=de[0],be=de[1],je=Object(l.useState)([]),me=Object(o.a)(je,2),fe=me[0],pe=me[1],he=j&&j.footer&&j.footer.pagination&&Object.keys(j.footer.pagination).length>0&&j.footer.pagination,ge=j&&j.footer&&j.footer.total,Oe=e.ajaxType,xe=e.ajaxButtonName,ve=Object(l.useState)(null===Y||void 0===Y?void 0:Y.limit),ye=Object(o.a)(ve,2),Me=ye[0],_e=ye[1],Ne=Object(l.useState)(e.dbData.page),De=Object(o.a)(Ne,2),we=De[0],Se=De[1],Ye=he&&he.maxPagesToShow,ke=function(t){ee(!0);var a=e.rowElements.map((function(e){return new Promise((function(t,a){t(e)}))}));Promise.all([a]).then(function(){var e=Object(r.a)(Object(s.a)().mark((function e(a){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a[0]).then((function(e){H(e),ee(!1)}));case 2:"function"===typeof t&&t();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};Object(l.useEffect)((function(){var e=[];return h.length!==p.length&&e.push({error:'The "TableAliasRows" and "TableRows" props array length should be same.'}),u&&0!==u.toString().length&&""!==u||e.push({error:'The "Table" props should be a valid string.'}),g&&!["put","post","delete","patch","request","get","head","options"].includes(Oe)&&e.push({error:"Allowed XHR request types are put, post, delete, patch, request, get, head, options. Please use any one in ajaxType props. For further info, visit https://www.npmjs.com/package/axios"}),e.length>0&&pe(e),function(){}}),[]),Object(l.useEffect)((function(){ke()}),[p,u,e.rowElements]),Object(l.useEffect)((function(){var t;(null===e||void 0===e||null===(t=e.rowElements)||void 0===t?void 0:t.length)>0&&H(null===e||void 0===e?void 0:e.rowElements)}),[e]),Object(l.useEffect)((function(){var t,a;(null===(t=e.dbData.table)||void 0===t?void 0:t.length)>0&&K(null===e||void 0===e||null===(a=e.dbData)||void 0===a?void 0:a.table)}),[e.dbData.table]),Object(l.useEffect)((function(){if(x&&x.length>0){ee(!0);var e=[].concat(Object(c.a)(x),Object(c.a)(G));K(e),setTimeout((function(){ee(!1)}),500)}}),[x]);var Ce=function(e){if(e){var t={};p.map((function(e,a){var n=M.findIndex((function(t){return Object.keys(t)[0]===e}));return t[e]=n>-1?M[n][e]:"",null}));var a=Object(c.a)(G);a.push(t),K(a)}},Te=function(t){var a="";return e.dbData.total.hasOwnProperty(t)&&(a=e.dbData.total[t].map((function(e,t){return Object(b.jsx)("div",{className:"my-1",children:Object(b.jsxs)("span",{className:"".concat(e.className),children:[null===e||void 0===e?void 0:e.prefix," ",ge&&N.a.countryCurrencyLacSeperator(ge.locale,ge.currency,e.value,ge.maxDecimal)," ",null===e||void 0===e?void 0:e.suffix]})},t)}))),a},Pe=function(e){return G.sort((function(t,a){return ue.asc?a[e]-t[e]:t[e]-a[e]}))},Ie=function(e){return G.sort((function(t,a){return ue.asc?new Date(a[e])-new Date(t[e]):new Date(t[e])-new Date(a[e])}))},Fe=function(e){return G.sort((function(t,a){return ue.asc?(a[e]>t[e])-(a[e]<t[e]):(t[e]>a[e])-(t[e]<a[e])}))},Ee=Object(l.useCallback)(E()((function(e){I({start:0,searchString:e})}),500),[]),Le=function(){return d.formatMessage({id:"recordsLengthLine",defaultMessage:"recordsLengthLine"},{start:e.dbData.rangeStart,end:e.dbData.rangeEnd,length:e.dbData.numRows})};return!1===$?Object(b.jsx)("div",{className:"react-responsive-ajax-data-table ".concat(m),id:f,children:0===fe.length?Object(b.jsxs)(b.Fragment,{children:[he&&Object(b.jsxs)("div",{className:"biGrid",children:[e.dbData.rangeStart&&e.dbData.rangeEnd&&e.dbData.numRows?Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"heading",title:Le(),children:Le()})}):Object(b.jsx)("div",{}),(null===j||void 0===j||null===(t=j.header)||void 0===t?void 0:t.searchable)&&Object(b.jsx)("div",{children:Object(b.jsx)(T,{theme:R,config:j,options:[10,25,50,100],searchString:null===Y||void 0===Y?void 0:Y.searchString,defaultRecordsPerPage:null===Y||void 0===Y?void 0:Y.limit,onSearchChange:function(e){return Ee(e)},onDropDownChange:function(e){_e(e),I({start:0,limit:e})},onDismissSearch:function(){return Ee("")}})})]}),Object(b.jsx)("div",{className:"grid-responsive",children:Object(b.jsxs)("div",{style:Object(n.a)(Object(n.a)({},Array.isArray(F)&&{gridTemplateColumns:"".concat(F.join("rem ")+"rem")}),"string"===typeof F&&{gridTemplateColumns:"repeat(".concat(p.length,", ").concat(F,")")}),className:"grid-container responsive-grid",children:[h.map((function(e,t){return Object(b.jsx)("div",{onClick:function(){return function(e){var t=null===G||void 0===G?void 0:G.map((function(t){return t[e]&&(t[e].toString().indexOf("-")>-1||t[e].toString().indexOf("/")>-1)&&"Invalid Date"!==new Date(String(t[e]).replace(/-/g,"/"))?"date":""===t[e]||isNaN(t[e])?"string":"number"})),a=[];"date"===(t=t.sort((function(e,a){return t.filter((function(t){return t===e})).length-t.filter((function(e){return e===a})).length})).pop())&&(a=Ie(e)),"number"===t&&(a=Pe(e)),"string"===t&&(a=Fe(e)),K(Object(c.a)(a)),be((function(t){return{asc:!t.asc,key:e}}))}(p[t])},className:"header",children:t>0||!g?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{title:e,children:e})," ",p[t]===ue.key&&Object(b.jsx)(k,{className:"default",entity:ue.asc?"&#8593;":"&#8595;"})]}):Object(b.jsx)(k,{className:"default",entity:"&#9776;"})},"key-".concat(t))})),(null===G||void 0===G?void 0:G.length)>0?Object(b.jsxs)(b.Fragment,{children:[G.map((function(e,t){return p.map((function(a,s){return Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("div",Object(n.a)(Object(n.a)({},v.includes(a)&&{className:"tooltipContainer"}),{},{children:[""!==e[a]&&v.includes(a)&&Object(b.jsx)("span",{className:"tooltips",children:e[a]}),Object(b.jsx)(y,{config:j,onDelete:function(e){return function(e){var t=e.i,a=G[t]&&G[t][p[0]];a&&void 0!==a&&(Z.push(a),q(Z));var n=G.filter((function(e,a){return a!==t}));K(n),D&&D(n)}(e)},onChange:function(e,t,a){!function(e,t,a){if(!t){var n=p.findIndex((function(t){return t===e.j}));n>-1&&V[n]&&(t="number"===V[n]?"0.00":"")}var s=e.i,r=e.j;G[s][r]=t,K(G);var o=G.filter((function(e,t){return t===s&&e}))[0][a]||"",l=o?[].concat(Object(c.a)(oe),[o]):Object(c.a)(oe);l=Object(c.a)(new Set(l)),le(l),D&&D(G)}(e,t,a)},index:{i:t,j:a},placeholder:h[s],value:e[a],element:V[s],showIncrement:G.length-1===t,showDecrement:!0,onAddRow:function(e){return Ce(e)},primaryKey:p[0],isPostable:Boolean(g),theme:R},"".concat(t,"-").concat(s))]}))},"".concat(e[a],"-").concat(s))}))})),(null===e||void 0===e||null===(a=e.dbData)||void 0===a?void 0:a.total)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"textCenter",children:ge.title}),p.slice(1).map((function(t,a){var n,c=null===e||void 0===e||null===(n=e.dbData)||void 0===n?void 0:n.total.hasOwnProperty(t);return Object(b.jsx)("div",{className:c?"totalColumn":"",children:c?Te(t):""},a)}))]})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(y,{index:{i:0,j:0},element:V[0],showIncrement:!0,showDecrement:!1,onAddRow:function(e){return Ce(e)}},-1),Object(b.jsx)("div",{className:"py-3 text-center",style:{gridColumn:"1 / span ".concat(p.length)},children:Object(b.jsx)(P.a,{id:"noRecordsGenerated",defaultMessage:"noRecordsGenerated"})})]})]})}),Object(b.jsxs)("div",{className:"footer",children:[he&&Object(b.jsx)(w,{currentPage:we,totalPages:Math.ceil(e.dbData.numRows/Me),onSetPage:function(e){Se(e),I({start:(e-1)*Me})},maxPagesToShow:Ye}),g&&Object(b.jsx)("div",{className:"py-2 text-end",children:Object(b.jsx)("button",{onClick:function(){return function(){ce(!0);var e=G.filter((function(e){return""===e[p[0]]})).map((function(e){return""===e[p[0]]&&(e[p[0]]=null),null!==L&&void 0!==L&&L.key&&null!==L&&void 0!==L&&L.value&&(e[null===L||void 0===L?void 0:L.key]=null===L||void 0===L?void 0:L.value),e})),t=G.filter((function(e){return oe.includes(e[p[0]])})).filter((function(e){return e&&("number"===typeof e[p[0]]||"string"===typeof e[p[0]])})).map((function(e){return null!==L&&void 0!==L&&L.key&&null!==L&&void 0!==L&&L.value&&(e[null===L||void 0===L?void 0:L.key]=null===L||void 0===L?void 0:L.value),e})),a=Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},(e.length>0||Z.length>0||t.length>0)&&{Table:u}),e.length>0&&{insertData:e}),Z.length>0&&{deleteData:Z}),t.length>0&&{updateData:t}),c=new FormData;c.append("postData",JSON.stringify(a)),i.a[Oe](g,c).then((function(a){O&&O(a),(e.length>0||t.length>0||Z.length>0)&&(ee(!0),setTimeout((function(){S(!0),ee(!1)}),1e3))})).catch((function(e){O&&O({error:e,status:!1})})).finally((function(){q([]),le([]),ce(!1),t=[],e=[]}))}()},disabled:ne,className:"btn btn-bni",children:ne?Object(b.jsx)("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"}):Object(b.jsx)(b.Fragment,{children:xe})})})]})]}):Object(b.jsxs)("div",{className:"errorWrapper",children:[Object(b.jsx)("h5",{children:"Please resolve the following issues:"}),Object(b.jsx)("ol",{children:fe.map((function(e,t){return Object(b.jsx)("li",{children:e.error},t)}))})]})}):Object(b.jsx)("div",{className:"relativeSpinner",children:Object(b.jsx)(_.a,{type:N.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})}L.defaultProps={id:"",Table:"My table",TableRows:[],TableAliasRows:[],rowElements:[],insertCloneData:[],showTooltipFor:[],ajaxType:"post",ajaxButtonName:"Submit",config:{header:{searchPlaceholder:"Search",searchable:!0},footer:{total:{title:"Total",locale:"en-IN",currency:"",maxDecimal:2},pagination:{currentPage:"first",recordsPerPage:10,maxPagesToShow:5}}},defaultValues:[],cellWidth:"13rem"};t.a=Object(I.c)(L)}}]);