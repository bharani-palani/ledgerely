(this["webpackJsonpbni-apps"]=this["webpackJsonpbni-apps"]||[]).push([[25],{1106:function(e,a,t){"use strict";t.r(a);var c=t(25),n=t(30),s=t(36),r=t(27),o=t(1),i=t.n(o),l=t(136),d=t(1107),u=t(1270),b=t(936),m=t(46),f=t(40),p=t(112),g=t(778),_=t(1267),x=t(119),h=t.n(x),j=t(51),O=t.n(j),w=t(52),y=t.n(w),M=t(48),T=t(82),v=t(135),D=t(92),k=t(70),P=t(61),C=t(60),N=t(0),S=i.a.createContext(void 0);a.default=function(){var e=Object(g.a)(),a=Object(o.useContext)(f.a),t=Object(o.useContext)(k.a),i=Object(o.useContext)(C.a),x=Object(o.useState)(!1),j=Object(r.a)(x,2),w=j[0],R=j[1],I=Object(o.useState)(!1),E=Object(r.a)(I,2),Y=E[0],A=E[1],V=Object(o.useState)(!0),F=Object(r.a)(V,2),L=F[0],W=F[1],B=Object(o.useState)([]),z=Object(r.a)(B,2),K=z[0],H=z[1],U=Object(o.useState)({category:"",startDate:O()().startOf("month").toDate(),endDate:O()().endOf("month").toDate()}),J=Object(r.a)(U,2),q=J[0],Q=J[1],G=Object(o.useState)([]),X=Object(r.a)(G,2),Z=X[0],$=X[1],ee=Object(o.useState)([]),ae=Object(r.a)(ee,2),te=ae[0],ce=ae[1],ne={config:{header:{searchPlaceholder:e.formatMessage({id:"searchHere",defaultMessage:"searchHere"})},footer:{total:{title:e.formatMessage({id:"total",defaultMessage:"total"}),maxDecimal:2},pagination:{currentPage:"first",recordsPerPage:10,maxPagesToShow:5}}},showTotal:[{whichKey:"amount",forKey:"type",forCondition:"equals",forValue:[{key:"+",value:"Cr"},{key:"-",value:"Dr"}],showDifference:{indexes:[0,1],showStability:!0}}],id:"categorizedBankTrx",Table:"categorizedBankTrx",label:"Categorized bank trx",TableRows:["name","date","amount","type","comments"],TableAliasRows:[e.formatMessage({id:"name",defaultMessage:"name"}),e.formatMessage({id:"date",defaultMessage:"date"}),e.formatMessage({id:"amount",defaultMessage:"amount"}),e.formatMessage({id:"type",defaultMessage:"type"}),e.formatMessage({id:"comments",defaultMessage:"comments"})],defaultValues:[],rowElements:["label","label","label","label","label"]},se={config:{header:{searchPlaceholder:e.formatMessage({id:"searchHere",defaultMessage:"searchHere"})},footer:{total:{title:e.formatMessage({id:"total",defaultMessage:"total"}),maxDecimal:2},pagination:{currentPage:"first",recordsPerPage:10,maxPagesToShow:5}}},id:"catCreditCardTrx",Table:"categorizedCreditCardTrx",TableRows:["name","date","creditCard","credits","purchases","interest","comments"],TableAliasRows:[e.formatMessage({id:"name",defaultMessage:"name"}),e.formatMessage({id:"date",defaultMessage:"date"}),e.formatMessage({id:"creditCard",defaultMessage:"creditCard"}),e.formatMessage({id:"credits",defaultMessage:"credits"}),e.formatMessage({id:"purchases",defaultMessage:"purchases"}),e.formatMessage({id:"interest",defaultMessage:"interest"}),e.formatMessage({id:"comments",defaultMessage:"comments"})],defaultValues:[],showTotal:["credits","purchases","interest"],rowElements:["label","label","label","label","label","label","label"]},re=function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),(t=new FormData).append("appId",a.userConfig.appId),e.abrupt("return",m.a.post("/account_planner/inc_exp_list",t).then((function(e){return H(e.data.response)})).catch((function(e){console.log(e)})).finally((function(){return W(!1)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(e){A(!0),$([]),ce([]),setTimeout((function(){var t=function(){var e=new FormData;return e.append("TableRows","a.inc_exp_name as name,a.inc_exp_date as date, a.inc_exp_amount as amount, a.inc_exp_type as type, a.inc_exp_comments as comments"),e.append("Table","categorizedBankTrx"),e.append("WhereClause","a.inc_exp_appId = '".concat(a.userConfig.appId,"' && b.inc_exp_cat_id = '").concat(q.category,"' && d.bank_appId = '").concat(a.userConfig.appId,"' && a.inc_exp_date >= '").concat(O()(q.startDate).format("YYYY-MM-DD").toString(),"' && a.inc_exp_date <= '").concat(O()(q.endDate).format("YYYY-MM-DD").toString(),"'")),m.a.post("/account_planner/getAccountPlanner",e)}(),c=function(){var e=new FormData;return e.append("TableRows","a.cc_transaction as name, a.cc_date as date, d.credit_card_name as creditCard, a.cc_payment_credits as credits, a.cc_purchases as purchases, a.cc_taxes_interest as interest, a.cc_comments as comments"),e.append("Table","categorizedCreditCardTrx"),e.append("WhereClause","a.cc_appId = '".concat(a.userConfig.appId,"' && b.inc_exp_cat_id = '").concat(q.category,"' && d.credit_card_appId = '").concat(a.userConfig.appId,"' && a.cc_date >= '").concat(O()(q.startDate).format("YYYY-MM-DD").toString(),"' && a.cc_date <= '").concat(O()(q.endDate).format("YYYY-MM-DD").toString(),"'")),m.a.post("/account_planner/getAccountPlanner",e)}();Promise.all([t,c]).then((function(a){$(a[0].data.response),ce(a[1].data.response),"function"===typeof e&&e()})).catch((function(e){return console.log("bbb",e)})).finally((function(){A(!1),R(!0)}))}),100)};Object(o.useEffect)((function(){re()}),[]);var ie=Object(v.a)(),le={fetch:ie.get("fetch"),categoryId:ie.get("categoryId"),startDate:ie.get("startDate"),endDate:ie.get("endDate")},de=Object(o.useState)(!1),ue=Object(r.a)(de,2),be=ue[0],me=ue[1];Object(o.useEffect)((function(){"category"===le.fetch&&le.categoryId&&(me(!0),Q((function(e){return Object(c.a)(Object(c.a)({},e),{},{category:le.categoryId,startDate:O()(le.startDate).toDate(),endDate:O()(le.endDate).toDate()})})))}),[JSON.stringify(le)]),Object(o.useEffect)((function(){"category"===le.fetch&&q.category&&q.startDate&&q.endDate&&be&&oe((function(){me(!1),setTimeout((function(){var e,a=Z.length>0?"categorizedBankTrx":"catCreditCardTrx";null===(e=document.getElementById(a))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"start"})}),1e3)}))}),[JSON.stringify(le),q.category,be]);var fe=function(){return Object(N.jsx)("div",{className:"relativeSpinner middle",children:Object(N.jsx)(y.a,{type:M.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})},pe=["id","name","isIncomeMetric","isPlanMetric"],ge=["checkbox","textbox",{radio:{radioList:[{label:e.formatMessage({id:"yes",defaultMessage:"yes"}),value:"1",checked:!1},{label:e.formatMessage({id:"no",defaultMessage:"no"}),value:"0",checked:!0}]}},{radio:{radioList:[{label:e.formatMessage({id:"yes",defaultMessage:"yes"}),value:"1",checked:!1},{label:e.formatMessage({id:"no",defaultMessage:"no"}),value:"0",checked:!0}]}}],_e=[{whichKey:"temp_amount",forKey:"temp_inc_exp_type",forCondition:"equals",forValue:[{key:"+",value:"Cr"},{key:"-",value:"Dr"}],showDifference:{indexes:[0,1],showStability:!1}}],xe=D.b.filter((function(e){return"incExpCat"===e.id})).map((function(a){var c={header:{searchPlaceholder:e.formatMessage({id:"searchHere",defaultMessage:"searchHere"})},footer:{total:{locale:t.localeLanguage,currency:t.localeCurrency,maxDecimal:2},pagination:{currentPage:"last",recordsPerPage:10,maxPagesToShow:5}}};return a.config=c,a.TableAliasRows=pe.map((function(a){return e.formatMessage({id:a,defaultMessage:a})})),a.rowElements=ge,a.showTotal=_e,a}))[0],he=Object(o.useState)([]),je=Object(r.a)(he,2),Oe=je[0],we=je[1],ye=function(){we([]);var e=function(e,t){var c=new FormData;return c.append("TableRows",t),c.append("Table",e),c.append("appId",a.userConfig.appId),m.a.post("/account_planner/getAccountPlanner",c)}(xe.Table,xe.TableRows);Promise.all([e]).then(function(){var e=Object(s.a)(Object(n.a)().mark((function e(a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:we(a[0].data.response);case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())};Object(o.useEffect)((function(){ye()}),[]);return Object(N.jsx)(S.Provider,{value:{incExpList:K,selection:q},children:Object(N.jsxs)(d.a,{fluid:!0,children:[Object(N.jsx)(l.a,{icon:"fa fa-sitemap",intlId:"category"}),L?Object(N.jsx)(fe,{}):Object(N.jsxs)(N.Fragment,{children:[Oe.length>0&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"py-2",children:Object(N.jsx)("span",{className:"badge ".concat("dark"===a.userData.theme?"bg-secondary text-white":"bg-light text-dark"),children:Object(N.jsx)(_.a,{id:"incExpCat",defaultMessage:"incExpCat"})})}),Object(N.jsx)(T.a,{config:xe.config,Table:xe.Table,TableRows:xe.TableRows,TableAliasRows:xe.TableAliasRows,showTotal:xe.showTotal,rowElements:xe.rowElements,defaultValues:xe.defaultValues,dbData:Oe,postApiUrl:"/account_planner/postAccountPlanner",onPostApi:function(t){return function(t,c){var n=t.status,s=t.data;n?(t&&s&&null!==s.response&&s.response&&a.renderToast({message:e.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),t&&s&&null!==s.response&&!1===s.response&&a.renderToast({type:"error",icon:"fa fa-times-circle",message:e.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),t&&s&&null===s.response&&i.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(N.jsx)(P.b,{}),content:Object(N.jsx)(P.a,{})})):a.renderToast({type:"error",icon:"fa fa-times-circle",message:e.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}(t,xe.id)},onReFetchData:function(){return ye()},cellWidth:xe.cellWidth,ajaxButtonName:e.formatMessage({id:"submit",defaultMessage:"submit"}),appIdKeyValue:{key:"inc_exp_cat_appId",value:a.userConfig.appId},theme:a.userData.theme})]}),Object(N.jsx)("div",{className:"py-2",children:Object(N.jsx)("span",{className:"badge ".concat("dark"===a.userData.theme?"bg-secondary text-white":"bg-light text-dark"),children:Object(N.jsx)(_.a,{id:"recentTransactions",defaultMessage:"recentTransactions"})})}),Object(N.jsxs)(u.a,{children:[Object(N.jsx)(b.a,{sm:3,className:"react-responsive-ajax-data-table pb-2",children:Object(N.jsx)(p.a,{placeholder:"".concat(e.formatMessage({id:"select",defaultMessage:"select"})," ").concat(e.formatMessage({id:"category",defaultMessage:"category"})),onChange:function(e,a,t){Q((function(e){return Object(c.a)(Object(c.a)({},e),{},{category:a})}))},element:{fetch:{dropDownList:K.map((function(e){return{id:e.id,value:e.value}}))}},value:q.category,type:"single",searchable:!0,theme:a.userData.theme})}),Object(N.jsxs)(b.a,{sm:3,className:"d-flex align-items-center justify-content-between pb-2",children:[Object(N.jsx)("span",{children:Object(N.jsx)(_.a,{id:"startDate",defaultMessage:"startDate"})}),Object(N.jsx)(h.a,{className:"bg-white text-dark",value:q.startDate,format:"yyyy-MM-dd",clearIcon:null,onChange:function(e){Q((function(a){return Object(c.a)(Object(c.a)({},a),{},{startDate:e})}))}})]}),Object(N.jsxs)(b.a,{sm:3,className:"d-flex align-items-center justify-content-between pb-2",children:[Object(N.jsx)("span",{children:Object(N.jsx)(_.a,{id:"endDate",defaultMessage:"endDate"})}),Object(N.jsx)(h.a,{className:"bg-white text-dark",value:q.endDate,format:"yyyy-MM-dd",clearIcon:null,onChange:function(e){Q((function(a){return Object(c.a)(Object(c.a)({},a),{},{endDate:e})}))}})]}),Object(N.jsx)(b.a,{sm:3,className:"pb-2",children:Object(N.jsx)("button",{className:"btn btn-sm btn-bni w-100 border-0",onClick:function(){return oe()},disabled:Y||!q.category,children:Y?Object(N.jsx)("i",{className:"fa fa-circle-o-notch fa-spin"}):Object(N.jsx)(_.a,{id:"generate",defaultMessage:"generate"})})})]})]}),Z.length>0&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"py-2",children:Object(N.jsx)("span",{className:"badge ".concat("dark"===a.userData.theme?"bg-secondary text-white":"bg-light text-dark"),children:e.formatMessage({id:"bankTransactions",defaultMessage:"bankTransactions"})})}),Object(N.jsx)(T.a,{id:ne.id,config:ne.config,Table:ne.Table,TableRows:ne.TableRows,TableAliasRows:ne.TableAliasRows,rowElements:ne.rowElements,showTotal:ne.showTotal,defaultValues:ne.defaultValues,dbData:Z,cellWidth:[20,7,10,5,20],theme:a.userData.theme})]}),te.length>0&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"py-2",children:Object(N.jsx)("span",{className:"badge ".concat("dark"===a.userData.theme?"bg-secondary text-white":"bg-light text-dark"),children:e.formatMessage({id:"creditCardTransactions",defaultMessage:"creditCardTransactions"})})}),Object(N.jsx)(T.a,{id:se.id,config:se.config,Table:se.Table,TableRows:se.TableRows,TableAliasRows:se.TableAliasRows,rowElements:se.rowElements,showTotal:se.showTotal,defaultValues:se.defaultValues,dbData:te,cellWidth:[20,7,10,10,10,10,20],theme:a.userData.theme})]}),0===te.length&&0===Z.length&&w&&Object(N.jsx)("div",{className:"text-center py-2",children:Object(N.jsx)(_.a,{id:"noRecordsGenerated",defaultMessage:" "})})]})})}},1107:function(e,a,t){"use strict";var c=t(25),n=t(28),s=t(35),r=t.n(s),o=t(1),i=t(42),l=t(0),d=["bsPrefix","fluid","as","className"],u=o.forwardRef((function(e,a){var t=e.bsPrefix,s=e.fluid,o=void 0!==s&&s,u=e.as,b=void 0===u?"div":u,m=e.className,f=Object(n.a)(e,d),p=Object(i.c)(t,"container"),g="string"===typeof o?"-".concat(o):"-fluid";return Object(l.jsx)(b,Object(c.a)(Object(c.a)({ref:a},f),{},{className:r()(m,o?"".concat(p).concat(g):p)}))}));u.displayName="Container",a.a=u},135:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var c=t(1),n=t(72),s=function(){var e=Object(n.h)().search;return Object(c.useMemo)((function(){return new URLSearchParams(e)}),[e])}},136:function(e,a,t){"use strict";var c=t(25),n=t(28),s=t(1),r=t(1267),o=t(40),i=t(0),l=["icon","intlId","children"];a.a=function(e){var a=e.icon,t=e.intlId,d=e.children,u=Object(n.a)(e,l),b=Object(s.useContext)(o.a);return Object(i.jsx)("div",Object(c.a)(Object(c.a)({},u),{},{className:"bg-gradient ".concat("dark"===b.userData.theme?"bg-dark darkBoxShadow":"bg-white lightBoxShadow"," mt-2 ps-3 py-2 rounded-pill"),children:Object(i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(i.jsxs)("div",{className:"d-flex align-items-center",children:[Object(i.jsx)("i",{className:"".concat(a," fa-1x")}),Object(i.jsx)("div",{className:"ps-2 mb-0",children:Object(i.jsx)(r.a,{id:t,defaultMessage:t})})]}),d]})}))}},61:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"a",(function(){return o}));t(1);var c=t(1267),n=t(63),s=t(0),r=function(){return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"d-flex align-items-center",children:[Object(s.jsx)("i",{className:"fa fa-exclamation-triangle fa-2x pt-2 text-danger"}),Object(s.jsxs)("div",{className:"ps-2",children:[Object(s.jsx)("div",{className:"fs-3",children:Object(s.jsx)(c.a,{id:"alert",defaultMessage:"alert"})}),Object(s.jsx)("div",{className:"fs-6",children:Object(s.jsx)(c.a,{id:"maximumQuotaExceeded",defaultMessage:"maximumQuotaExceeded"})})]})]})})},o=function(){return Object(s.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:Object(s.jsxs)("div",{children:[Object(s.jsxs)(n.a,{className:"btn btn-sm btn-primary me-1 rounded-pill",to:"/billing",children:[Object(s.jsx)("i",{className:"fa fa-credit-card-alt pe-1"}),Object(s.jsx)(c.a,{id:"upgradeNow",defaultMessage:"upgradeNow"})]}),Object(s.jsx)("span",{className:"fs-6",children:Object(s.jsx)(c.a,{id:"accessUnlimitedStorage",defaultMessage:"accessUnlimitedStorage"})})]})})}},92:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return r})),t.d(a,"a",(function(){return o}));var c=t(51),n=t.n(c),s=[{id:"bankAccounts",Table:"banks",config:{footer:{total:{},pagination:{currentPage:"last",recordsPerPage:10,maxPagesToShow:5}}},label:"Bank accounts",TableRows:["bank_id","bank_name","bank_account_number","bank_swift_code","bank_account_type","bank_country","bank_sort","bank_locale","bank_currency"],defaultValues:[{bank_sort:"0"}],cellWidth:[4,13,11,11,13,13,5,13,13]},{id:"creditCardAccounts",Table:"credit_cards",label:"Credit cards",TableRows:["credit_card_id","credit_card_name","credit_card_number","credit_card_start_date","credit_card_end_date","credit_card_payment_date","credit_card_annual_interest","credit_card_locale","credit_card_currency"],defaultValues:[{credit_card_annual_interest:"48"}],cellWidth:[4,13,11,8,8,8,8,13,13]},{id:"incExpCat",config:{footer:{total:{},pagination:{currentPage:"last",recordsPerPage:5,maxPagesToShow:5}}},Table:"income_expense_category",label:"Income / expense categories",TableRows:["inc_exp_cat_id","inc_exp_cat_name","inc_exp_cat_is_metric","inc_exp_cat_is_plan_metric"],defaultValues:[{inc_exp_cat_is_metric:"0"},{inc_exp_cat_is_plan_metric:"0"}],cellWidth:[4,13,13,13]},{id:"incExpTemp",config:{footer:{total:{},pagination:{currentPage:"last",recordsPerPage:5,maxPagesToShow:5}}},Table:"income_expense_template",label:"Income expense template",TableRows:["template_id","temp_inc_exp_name","temp_amount","temp_inc_exp_type","temp_inc_exp_date","temp_category","temp_bank"],defaultValues:[{temp_inc_exp_date:"1"},{temp_inc_exp_type:"Dr"},{temp_amount:"0.00"}],cellWidth:[4,13,13,13,5,13,13]}],r=[{id:26,config:{footer:{total:{},pagination:{currentPage:"last",recordsPerPage:10,maxPagesToShow:5}}},Table:"income_expense",label:"Expenditures for selected month",TableRows:["inc_exp_id","inc_exp_name","inc_exp_amount","inc_exp_plan_amount","inc_exp_type","inc_exp_date","inc_exp_category","inc_exp_bank","inc_exp_comments"],TableAliasRows:[],defaultValues:[{inc_exp_type:"Dr"},{inc_exp_amount:0},{inc_exp_plan_amount:0},{inc_exp_date:n()(new Date).format("YYYY-MM-DD")}],rowKeyUp:"",rowElements:["checkbox","textbox","number","label",null,"date",{fetch:{dropDownList:[]}},{fetch:{dropDownList:[]}},"textbox"],showTooltipFor:["inc_exp_name","inc_exp_comments"]}],o=[{id:27,config:{footer:{total:{},pagination:{currentPage:"last",recordsPerPage:10,maxPagesToShow:5}}},Table:"credit_card_transactions",label:"Credit card transactions",TableRows:["cc_id","cc_transaction","cc_date","cc_opening_balance","cc_payment_credits","cc_purchases","cc_taxes_interest","cc_expected_balance","cc_for_card","cc_inc_exp_cat","cc_transaction_status","cc_comments","cc_added_at"],TableAliasRows:[],showTotal:["cc_opening_balance","cc_payment_credits","cc_purchases","cc_taxes_interest","cc_expected_balance"],rowKeyUp:"cc_expected_balance=((Number(row.cc_opening_balance) - Number(row.cc_payment_credits)) + (Number(row.cc_purchases) + Number(row.cc_taxes_interest))).toFixed(2)",rowElements:["checkbox","textbox","date","number","number","number","number","label",{fetch:{dropDownList:[]}},{fetch:{dropDownList:[]}},{fetch:{dropDownList:[{checked:!1,id:"1",value:"Settled"},{checked:!1,id:"0",value:"Pending"},{checked:!1,id:"2",value:"Part payment"}]}},"textbox","relativeTime"],defaultValues:[{cc_date:n()().format("YYYY-MM-DD")},{cc_opening_balance:0},{cc_payment_credits:0},{cc_purchases:0},{cc_taxes_interest:0},{cc_expected_balance:0},{cc_transaction_status:"0"}],showTooltipFor:["cc_transaction","cc_comments"]}]}}]);