(this["webpackJsonpbni-apps"]=this["webpackJsonpbni-apps"]||[]).push([[28],{1105:function(e,t,a){"use strict";a.r(t);var c=a(25),n=a(30),r=a(35),s=a(27),i=a(1),o=a.n(i),d=a(94),l=a(342),u=a(1269),b=a(934),p=a(46),f=a(39),m=a(105),_=a(776),g=a(1266),j=a(109),h=a.n(j),x=a(50),O=a.n(x),w=a(52),D=a.n(w),y=a(48),T=a(83),v=a(93),M=a(82),C=a(70),k=a(57),S=a(62),P=a(321),R=a(0),N=o.a.createContext(void 0);t.default=function(){var e,t=Object(_.a)(),a=Object(i.useContext)(f.a),o=Object(i.useContext)(C.a),j=Object(i.useContext)(S.a),x=Object(i.useState)(!1),w=Object(s.a)(x,2),I=w[0],E=w[1],A=Object(i.useState)(!1),Y=Object(s.a)(A,2),V=Y[0],F=Y[1],L=Object(i.useState)(!0),W=Object(s.a)(L,2),B=W[0],H=W[1],J=Object(i.useState)({}),K=Object(s.a)(J,2),U=K[0],G=K[1],q=Object(i.useState)({creditCard:"",startDate:O()().startOf("month").toDate(),endDate:O()().endOf("month").toDate()}),z=Object(s.a)(q,2),Q=z[0],X=z[1],Z=Object(i.useState)({}),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(i.useState)({start:0,limit:10,searchString:""}),ce=Object(s.a)(ae,2),ne=ce[0],re=ce[1],se={start:0,limit:10,searchString:""},ie=Object(i.useState)(se),oe=Object(s.a)(ie,2),de=oe[0],le=oe[1],ue={config:{header:{searchPlaceholder:t.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),searchable:!0},footer:{total:{title:t.formatMessage({id:"total",defaultMessage:"total"}),maxDecimal:2},pagination:{currentPage:"first",maxPagesToShow:5}}},id:"cCTable",Table:"creditCardTrx",TableRows:["cc_transaction","cc_date","credit_card_name","cc_payment_credits","cc_purchases","cc_taxes_interest","cc_comments"],TableAliasRows:[t.formatMessage({id:"name",defaultMessage:"name"}),t.formatMessage({id:"date",defaultMessage:"date"}),t.formatMessage({id:"creditCard",defaultMessage:"creditCard"}),t.formatMessage({id:"credits",defaultMessage:"credits"}),t.formatMessage({id:"purchases",defaultMessage:"purchases"}),t.formatMessage({id:"interest",defaultMessage:"interest"}),t.formatMessage({id:"comments",defaultMessage:"comments"})],defaultValues:[],rowElements:["label","label","label","label","label","label","label"]},be=function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),(t=new FormData).append("appId",a.userConfig.appId),e.abrupt("return",p.a.post("/account_planner/credit_card_list",t).then((function(e){G(e.data.response)})).catch((function(e){console.log(e)})).finally((function(){return H(!1)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(e){F(!0),te({}),setTimeout((function(){var t=function(){var e=new FormData;return e.append("limit",de.limit),e.append("start",de.start),e.append("searchString",de.searchString),e.append("TableRows","a.cc_transaction, a.cc_date, d.credit_card_name, a.cc_payment_credits, a.cc_purchases, a.cc_taxes_interest, a.cc_comments"),e.append("Table","creditCardTrx"),e.append("WhereClause","a.cc_appId = '".concat(a.userConfig.appId,"' && a.cc_for_card = '").concat(Q.creditCard,"' && d.credit_card_appId = '").concat(a.userConfig.appId,"' && a.cc_date >= '").concat(O()(Q.startDate).format("YYYY-MM-DD").toString(),"' && a.cc_date <= '").concat(O()(Q.endDate).format("YYYY-MM-DD").toString(),"'")),p.a.post("/account_planner/getAccountPlanner",e)}();Promise.all([t]).then((function(t){te(t[0].data.response),"function"===typeof e&&e()})).catch((function(e){return console.log("bbb",e)})).finally((function(){F(!1),E(!0)}))}),100)};Object(i.useEffect)((function(){be()}),[]);Object(i.useEffect)((function(){Ce()}),[ne]);var fe=Object(v.a)(),me={fetch:fe.get("fetch"),creditCardId:fe.get("creditCardId"),startDate:fe.get("startDate"),endDate:fe.get("endDate")},_e=Object(i.useState)(!1),ge=Object(s.a)(_e,2),je=ge[0],he=ge[1];Object(i.useEffect)((function(){"creditCard"===me.fetch&&me.creditCardId&&(he(!0),X((function(e){return Object(c.a)(Object(c.a)({},e),{},{creditCard:me.creditCardId,startDate:O()(me.startDate).toDate(),endDate:O()(me.endDate).toDate()})})),le(se))}),[JSON.stringify(me)]),Object(i.useEffect)((function(){"creditCard"===me.fetch&&Q.creditCard&&Q.startDate&&Q.endDate&&je&&pe((function(){he(!1),setTimeout((function(){var e;null===(e=document.getElementById("ccTable"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"start"})}),200)}))}),[JSON.stringify(me),Q.creditCard,je]);var xe=function(){return Object(R.jsx)("div",{className:"relativeSpinner",children:Object(R.jsx)(D.a,{type:y.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})},Oe=["id","name","last4DigitCardNo","startDate","endDate","payDate","annuaInterestRate","localeLanguage","localeCurrency"],we=["checkbox","textbox","textbox","number","number","number","number",{fetch:{dropDownList:P.c},searchable:!0},{fetch:{dropDownList:P.b},searchable:!0}],De=M.b.filter((function(e){return"creditCardAccounts"===e.id})).map((function(e){var a={header:{searchPlaceholder:t.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),searchable:!0},footer:{total:{locale:o.localeLanguage,currency:o.localeCurrency,maxDecimal:2},pagination:{currentPage:"last",maxPagesToShow:5}}};return e.config=a,e.TableAliasRows=Oe.map((function(e){return t.formatMessage({id:e,defaultMessage:e})})),e.rowElements=we,e}))[0],ye=Object(i.useState)([]),Te=Object(s.a)(ye,2),ve=Te[0],Me=Te[1],Ce=function(){Me([]);var e=function(e,t){var c=new FormData;return c.append("TableRows",t),c.append("Table",e),c.append("limit",ne.limit),c.append("start",ne.start),c.append("searchString",ne.searchString),c.append("appId",a.userConfig.appId),p.a.post("/account_planner/getAccountPlanner",c)}(De.Table,De.TableRows);Promise.all([e]).then(function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Me(t[0].data.response);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return Object(i.useEffect)((function(){I&&pe()}),[de,I]),Object(R.jsx)(N.Provider,{value:{cCList:U,selection:Q},children:Object(R.jsxs)(l.a,{fluid:!0,className:"pb-5",children:[Object(R.jsx)(d.a,{icon:"fa fa-credit-card",intlId:"creditCard"}),B?Object(R.jsx)(xe,{}):Object(R.jsxs)(R.Fragment,{children:[ve&&(null===(e=Object.keys(ve))||void 0===e?void 0:e.length)>0&&Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(T.a,{className:"pt-3",config:De.config,Table:De.Table,TableRows:De.TableRows,TableAliasRows:De.TableAliasRows,rowElements:De.rowElements,defaultValues:De.defaultValues,dbData:ve,postApiUrl:"/account_planner/postAccountPlanner",onPostApi:function(e){return function(e,c){var n=e.status,r=e.data;if(200===n){if(e&&r&&"boolean"===typeof r.response&&null!==r.response&&r.response&&a.renderToast({message:t.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),e&&r&&"boolean"===typeof r.response&&null!==r.response&&!1===r.response&&a.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),e&&r&&null===r.response&&j.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(R.jsx)(k.b,{}),content:Object(R.jsx)(k.a,{})}),e&&r&&"object"===typeof r.response&&null!==r.response){var s;s=1451===r.response.number?"foreignKeyDeleteMessage":"",a.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:s,defaultMessage:s})})}}else a.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}(e,De.id)},apiParams:ne,onChangeParams:function(e){return function(e){re((function(t){return Object(c.a)(Object(c.a)({},t),e)}))}(e)},onReFetchData:function(){return Ce()},cellWidth:De.cellWidth,ajaxButtonName:t.formatMessage({id:"submit",defaultMessage:"submit"}),appIdKeyValue:{key:"credit_card_appId",value:a.userConfig.appId},theme:a.userData.theme})}),Object(R.jsxs)(u.a,{children:[Object(R.jsx)(b.a,{sm:3,className:"react-responsive-ajax-data-table pb-2",children:Object(R.jsx)(m.a,{placeholder:"".concat(t.formatMessage({id:"select",defaultMessage:"select"})," ").concat(t.formatMessage({id:"creditCard",defaultMessage:"creditCard"})),onChange:function(e,t,a){X((function(e){return Object(c.a)(Object(c.a)({},e),{},{creditCard:t})}))},element:{fetch:{dropDownList:U.map((function(e){return{id:e.id,value:e.value}}))},searchable:!0},value:Q.creditCard,type:"single",searchable:!0,theme:a.userData.theme})}),Object(R.jsxs)(b.a,{sm:3,className:"d-flex align-items-center justify-content-between pb-2",children:[Object(R.jsx)("span",{children:Object(R.jsx)(g.a,{id:"startDate",defaultMessage:"startDate"})}),Object(R.jsx)(h.a,{className:"bg-white text-dark",value:Q.startDate,format:"yyyy-MM-dd",clearIcon:null,onChange:function(e){X((function(t){return Object(c.a)(Object(c.a)({},t),{},{startDate:e})}))},minDate:O()().subtract(1,"year").toDate(),maxDate:new Date,onKeyDown:function(e){e.preventDefault()}})]}),Object(R.jsxs)(b.a,{sm:3,className:"d-flex align-items-center justify-content-between pb-2",children:[Object(R.jsx)("span",{children:Object(R.jsx)(g.a,{id:"endDate",defaultMessage:"endDate"})}),Object(R.jsx)(h.a,{className:"bg-white text-dark",value:Q.endDate,format:"yyyy-MM-dd",clearIcon:null,onChange:function(e){X((function(t){return Object(c.a)(Object(c.a)({},t),{},{endDate:e})}))},minDate:O()().subtract(1,"year").toDate(),maxDate:new Date,onKeyDown:function(e){e.preventDefault()}})]}),Object(R.jsx)(b.a,{sm:3,className:"pb-2",children:Object(R.jsx)("button",{className:"btn btn-sm btn-bni w-100 border-0",onClick:function(){return pe()},disabled:!Q.creditCard,children:Object(R.jsx)(g.a,{id:"generate",defaultMessage:"generate"})})})]})]}),V&&Object(R.jsx)(xe,{}),ee&&Object.keys(ee).length>0&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{className:"py-2",children:Object(R.jsx)("span",{className:"badge ".concat("dark"===a.userData.theme?"bg-secondary text-white":"bg-light text-dark"),children:t.formatMessage({id:"creditCardTransactions",defaultMessage:"creditCardTransactions"})})}),Object(R.jsx)(T.a,{id:ue.id,config:ue.config,Table:ue.Table,TableRows:ue.TableRows,TableAliasRows:ue.TableAliasRows,rowElements:ue.rowElements,defaultValues:ue.defaultValues,dbData:ee,cellWidth:[20,10,10,10,10,10,10],theme:a.userData.theme,apiParams:de,onChangeParams:function(e){return function(e){le((function(t){return Object(c.a)(Object(c.a)({},t),e)}))}(e)}})]}),0===Object.keys(ee).length&&I&&!V&&Object(R.jsx)("div",{className:"text-center py-2",children:Object(R.jsx)(g.a,{id:"noRecordsGenerated",defaultMessage:" "})})]})})}},342:function(e,t,a){"use strict";var c=a(25),n=a(28),r=a(36),s=a.n(r),i=a(1),o=a(43),d=a(0),l=["bsPrefix","fluid","as","className"],u=i.forwardRef((function(e,t){var a=e.bsPrefix,r=e.fluid,i=void 0!==r&&r,u=e.as,b=void 0===u?"div":u,p=e.className,f=Object(n.a)(e,l),m=Object(o.c)(a,"container"),_="string"===typeof i?"-".concat(i):"-fluid";return Object(d.jsx)(b,Object(c.a)(Object(c.a)({ref:t},f),{},{className:s()(p,i?"".concat(m).concat(_):m)}))}));u.displayName="Container",t.a=u},82:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var c=a(50),n=a.n(c),r=[{id:"bankAccounts",Table:"banks",config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}}},label:"Bank accounts",TableRows:["bank_id","bank_name","bank_account_number","bank_swift_code","bank_account_type","bank_country","bank_sort","bank_locale","bank_currency"],defaultValues:[{bank_sort:"0"}],cellWidth:[4,13,11,11,13,13,5,13,13]},{id:"creditCardAccounts",Table:"credit_cards",label:"Credit cards",TableRows:["credit_card_id","credit_card_name","credit_card_number","credit_card_start_date","credit_card_end_date","credit_card_payment_date","credit_card_annual_interest","credit_card_locale","credit_card_currency"],defaultValues:[{credit_card_annual_interest:"48"}],cellWidth:[4,13,11,8,8,8,8,13,13]},{id:"incExpCat",config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}}},Table:"income_expense_category",label:"Income / expense categories",TableRows:["inc_exp_cat_id","inc_exp_cat_name","inc_exp_cat_is_metric","inc_exp_cat_is_plan_metric"],defaultValues:[{inc_exp_cat_is_metric:"0"},{inc_exp_cat_is_plan_metric:"0"}],cellWidth:[4,13,13,13]},{id:"incExpTemp",config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}}},Table:"income_expense_template",label:"Income expense template",TableRows:["template_id","temp_inc_exp_name","temp_amount","temp_inc_exp_type","temp_inc_exp_date","temp_category","temp_bank"],defaultValues:[{temp_inc_exp_date:"1"},{temp_inc_exp_type:"Dr"},{temp_amount:"0.00"}],cellWidth:[4,13,13,13,5,13,13]}],s=[{id:26,config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}}},Table:"income_expense",label:"Expenditures for selected month",TableRows:["inc_exp_id","inc_exp_name","inc_exp_amount","inc_exp_plan_amount","inc_exp_type","inc_exp_date","inc_exp_category","inc_exp_bank","inc_exp_comments"],TableAliasRows:[],defaultValues:[{inc_exp_type:"Dr"},{inc_exp_amount:0},{inc_exp_plan_amount:0},{inc_exp_date:n()(new Date).format("YYYY-MM-DD")}],rowElements:["checkbox","textbox","number","label",null,"date",{fetch:{dropDownList:[]}},{fetch:{dropDownList:[]}},"textbox"],showTooltipFor:["inc_exp_name","inc_exp_comments"]}],i=[{id:27,config:{footer:{total:{},pagination:{currentPage:"last",maxPagesToShow:5}},searchable:!0},Table:"credit_card_transactions",label:"Credit card transactions",TableRows:["cc_id","cc_transaction","cc_date","cc_opening_balance","cc_payment_credits","cc_purchases","cc_taxes_interest","cc_expected_balance","cc_for_card","cc_inc_exp_cat","cc_transaction_status","cc_comments","cc_added_at"],TableAliasRows:[],rowElements:["checkbox","textbox","date","number","number","number","number","label",{fetch:{dropDownList:[]}},{fetch:{dropDownList:[]}},{fetch:{dropDownList:[{checked:!1,id:"1",value:"Settled"},{checked:!1,id:"0",value:"Pending"},{checked:!1,id:"2",value:"Part payment"}]}},"textbox","relativeTime"],defaultValues:[{cc_date:n()().format("YYYY-MM-DD")},{cc_opening_balance:0},{cc_payment_credits:0},{cc_purchases:0},{cc_taxes_interest:0},{cc_expected_balance:0},{cc_transaction_status:"0"}],showTooltipFor:["cc_transaction","cc_comments"]}]},93:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var c=a(1),n=a(72),r=function(){var e=Object(n.h)().search;return Object(c.useMemo)((function(){return new URLSearchParams(e)}),[e])}},94:function(e,t,a){"use strict";var c=a(25),n=a(28),r=a(1),s=a(1266),i=a(39),o=a(0),d=["icon","intlId","children"];t.a=function(e){var t=e.icon,a=e.intlId,l=e.children,u=Object(n.a)(e,d),b=Object(r.useContext)(i.a);return Object(o.jsx)("div",Object(c.a)(Object(c.a)({},u),{},{className:"bg-gradient ".concat("dark"===b.userData.theme?"bg-dark darkBoxShadow":"bg-white lightBoxShadow"," mt-2 ps-3 py-2 rounded-pill"),children:Object(o.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(o.jsxs)("div",{className:"d-flex align-items-center",children:[Object(o.jsx)("i",{className:"".concat(t," fa-1x")}),Object(o.jsx)("div",{className:"ps-2 mb-0",children:Object(o.jsx)(s.a,{id:a,defaultMessage:a})})]}),l]})}))}}}]);