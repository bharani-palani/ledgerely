"use strict";(self.webpackChunkledgerely_com=self.webpackChunkledgerely_com||[]).push([[8379],{8379:(e,a,s)=>{s.r(a),s.d(a,{default:()=>T});var t=s(9950),l=s(5942),n=s(5358),o=s(1432),r=s(8630),i=s(3177),d=s(4570),c=s(8311),p=s(2083),m=s(2436),u=s(9845),g=s(4408),f=s(1308),h=s(7391),b=s(8516),x=s(6731),v=s(3058),y=s(4414);const T=(0,g.Ay)((e=>{var a;const{intl:s}=e,g=(0,t.useContext)(f.F);document.title=`${g.appName} - ${s.formatMessage({id:"schedules",defaultMessage:"schedules"})}`;const[T,M]=(0,t.useState)([]),[w,_]=(0,t.useState)(!1),A=(0,t.useContext)(m.R),S=(0,t.useContext)(u.O),j=(0,t.useContext)(h.U),[C,k]=(0,t.useState)({start:0,limit:10,searchString:""}),R={income_expense_template:[{template_id:"",temp_inc_exp_name:"",temp_amount:"0.00",temp_inc_exp_type:"Dr",temp_inc_exp_date:"1",temp_category:"",temp_bank:""}]},E=async e=>{M([]),_(!0);const a=((e,a)=>{const s=new FormData;return s.append("TableRows",a),s.append("Table",e),s.append("limit",C.limit),s.append("start",C.start),s.append("searchString",C.searchString),s.append("WhereClause",`temp_appId = '${A.userConfig.appId}'`),d.A.post("/account_planner/getAccountPlanner",s)})(e.Table,e.TableRows);Promise.all([a]).then((async a=>{var s,t;(null===(s=a[0].data.response)||void 0===s||null===(t=s.table)||void 0===t?void 0:t.length)>0?M(a[0].data.response):M({table:R[e.Table]})})).finally((()=>_(!1)))},N=()=>(0,y.jsx)("div",{className:"relativeSpinner middle",children:(0,y.jsx)(c.A,{type:p.A.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})}),P={incExpTemp:["id","name","amount","type","date","category","bank"]},D={incExpTemp:["checkbox","textbox","number",{radio:{radioList:[{label:s.formatMessage({id:"credit",defaultMessage:"credit"}),value:"Cr",checked:!1},{label:s.formatMessage({id:"debit",defaultMessage:"debit"}),value:"Dr",checked:!0}]}},{fetch:{dropDownList:new Array(28).fill("_").map(((e,a)=>({checked:"1"===String(a+1),id:String(a+1),value:String(a+1)}))),searchable:!0}},"textbox","textbox"]},I=i.GG.filter((e=>"incExpTemp"===e.id)).map((e=>{const a={header:{searchPlaceholder:s.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),searchable:!0},footer:{total:{locale:j.localeLanguage,currency:j.localeCurrency,maxDecimal:2},pagination:{currentPage:"last",maxPagesToShow:5}}};return e.config=a,e.TableAliasRows=P[e.id].map((e=>s.formatMessage({id:e,defaultMessage:e}))),e.rowElements=D[e.id],e})),F={incExpTemp:"temp_appId"};return(0,t.useEffect)((()=>{E(i.GG.filter((e=>"incExpTemp"===e.id))[0])}),[C]),(0,y.jsx)(n.A,{fluid:!0,children:(0,y.jsxs)("div",{className:"settings",children:[(0,y.jsx)(v.A,{icon:"fa fa-calendar",intlId:"schedules",children:(null===T||void 0===T||null===(a=T.table)||void 0===a?void 0:a.length)>0&&(0,y.jsx)(b.A,{datas:p.A.stripCommasInCSV(null===T||void 0===T?void 0:T.table),filename:"schedules.csv",className:"d-inline",children:(0,y.jsx)(o.A,{placement:"left",delay:{show:250,hide:400},overlay:(V=s.formatMessage({id:"download",defaultMessage:"download"}),(0,y.jsx)(l.A,{id:`button-tooltip-${Math.random()}`,className:"in show",children:V})),triggerType:"hover",children:(0,y.jsx)("i",{className:"fa fa-download pe-3"})})})}),w&&(0,y.jsx)(N,{}),I.sort(((e,a)=>e.id-a.id)).map(((e,a)=>{var t;return(0,y.jsx)("div",{children:(null===T||void 0===T||null===(t=T.table)||void 0===t?void 0:t.length)>0&&(0,y.jsxs)("div",{className:"pt-2",children:[(0,y.jsx)("div",{className:"text-end"}),(0,y.jsx)(r.A,{className:"pt-2",config:e.config,Table:e.Table,TableRows:e.TableRows,TableAliasRows:e.TableAliasRows,rowElements:e.rowElements,defaultValues:e.defaultValues,dbData:T,postApiUrl:"/account_planner/postAccountPlanner",onPostApi:a=>(e=>{const{status:a,data:t}=e;if(200===a){if(e&&t&&"boolean"===typeof t.response&&null!==t.response&&t.response&&A.renderToast({message:s.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),e&&t&&"boolean"===typeof t.response&&null!==t.response&&!1===t.response&&A.renderToast({type:"error",icon:"fa fa-times-circle",message:s.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),e&&t&&null===t.response&&S.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:(0,y.jsx)(x.x,{}),content:(0,y.jsx)(x.E,{})}),e&&t&&"object"===typeof t.response&&null!==t.response){let e;e=1451===t.response.number?"foreignKeyDeleteMessage":"",A.renderToast({type:"error",icon:"fa fa-times-circle",message:s.formatMessage({id:e,defaultMessage:e})})}}else A.renderToast({type:"error",icon:"fa fa-times-circle",message:s.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})})(a,e.id),apiParams:C,onChangeParams:e=>(e=>{k((a=>({...a,...e})))})(e),onReFetchData:()=>E(e),cellWidth:e.cellWidth,ajaxButtonName:s.formatMessage({id:"submit",defaultMessage:"submit"}),appIdKeyValue:{key:F[e.id],value:A.userConfig.appId},theme:A.userData.theme},a)]})},a)}))]})});var V}))}}]);