(this["webpackJsonpbni-apps"]=this["webpackJsonpbni-apps"]||[]).push([[27],{1249:function(e,a,t){"use strict";t.r(a);var s=t(25),c=t(30),n=t(36),r=t(27),o=t(1),i=t.n(o),l=t(195),d=t(28),u=t(35),b=t.n(u),f=t(42),m=t(0),g=["bsPrefix","fluid","as","className"],j=o.forwardRef((function(e,a){var t=e.bsPrefix,c=e.fluid,n=void 0!==c&&c,r=e.as,o=void 0===r?"div":r,i=e.className,l=Object(d.a)(e,g),u=Object(f.c)(t,"container"),j="string"===typeof n?"-".concat(n):"-fluid";return Object(m.jsx)(o,Object(s.a)(Object(s.a)({ref:a},l),{},{className:b()(i,n?"".concat(u).concat(j):u)}))}));j.displayName="Container";var p=j,h=t(1266),O=t(935),x=t(47),M=t(41),y=t(121),w=t(777),_=t(1263),T=t(133),v=t.n(T),D=t(52),C=t.n(D),N=t(51),S=t.n(N),I=t(48),k=t(82),P=t(194),R=i.a.createContext(void 0);a.default=function(){var e=Object(w.a)(),a=Object(o.useContext)(M.a),t=Object(o.useState)(!1),i=Object(r.a)(t,2),d=i[0],u=i[1],b=Object(o.useState)(!1),f=Object(r.a)(b,2),g=f[0],j=f[1],T=Object(o.useState)(!0),D=Object(r.a)(T,2),N=D[0],Y=D[1],E=Object(o.useState)([]),A=Object(r.a)(E,2),V=A[0],F=A[1],z=Object(o.useState)({category:"",startDate:C()().startOf("month").toDate(),endDate:C()().endOf("month").toDate()}),B=Object(r.a)(z,2),H=B[0],J=B[1],L=Object(o.useState)([]),W=Object(r.a)(L,2),K=W[0],q=W[1],G=Object(o.useState)([]),U=Object(r.a)(G,2),Q=U[0],X=U[1],Z={config:{header:{searchPlaceholder:e.formatMessage({id:"searchHere",defaultMessage:"searchHere"})},footer:{total:{title:e.formatMessage({id:"total",defaultMessage:"total"}),maxDecimal:2},pagination:{currentPage:"first",recordsPerPage:10,maxPagesToShow:5}}},showTotal:[{whichKey:"amount",forKey:"type",forCondition:"equals",forValue:[{key:"+",value:"Cr"},{key:"-",value:"Dr"}],showDifference:{indexes:[0,1],showStability:!0}}],id:"intlMaster",Table:"categorizedBankTrx",label:"Locale master",TableRows:["name","date","amount","type","comments"],TableAliasRows:[e.formatMessage({id:"name",defaultMessage:"name"}),e.formatMessage({id:"date",defaultMessage:"date"}),e.formatMessage({id:"amount",defaultMessage:"amount"}),e.formatMessage({id:"type",defaultMessage:"type"}),e.formatMessage({id:"comments",defaultMessage:"comments"})],defaultValues:[],rowElements:["label","label","label","label","label"]},$={config:{header:{searchPlaceholder:e.formatMessage({id:"searchHere",defaultMessage:"searchHere"})},footer:{total:{title:e.formatMessage({id:"total",defaultMessage:"total"}),maxDecimal:2},pagination:{currentPage:"first",recordsPerPage:10,maxPagesToShow:5}}},id:"catCreditCardTrx",Table:"categorizedCreditCardTrx",label:"Category credit card trx",TableRows:["name","date","creditCard","credits","purchases","interest","comments"],TableAliasRows:[e.formatMessage({id:"name",defaultMessage:"name"}),e.formatMessage({id:"date",defaultMessage:"date"}),e.formatMessage({id:"creditCard",defaultMessage:"creditCard"}),e.formatMessage({id:"credits",defaultMessage:"credits"}),e.formatMessage({id:"purchases",defaultMessage:"purchases"}),e.formatMessage({id:"interest",defaultMessage:"interest"}),e.formatMessage({id:"comments",defaultMessage:"comments"})],defaultValues:[],showTotal:["credits","purchases","interest"],rowElements:["label","label","label","label","label","label","label"]},ee=function(){var e=Object(n.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),(t=new FormData).append("appId",a.userConfig.appId),e.abrupt("return",x.a.post("/account_planner/inc_exp_list",t).then((function(e){return F(e.data.response)})).catch((function(e){console.log(e)})).finally((function(){return Y(!1)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(e){j(!0),u(!0),q([]),X([]),setTimeout((function(){var t=function(){var e=new FormData;return e.append("TableRows","a.inc_exp_name as name,a.inc_exp_date as date, a.inc_exp_amount as amount, a.inc_exp_type as type, a.inc_exp_comments as comments"),e.append("Table","categorizedBankTrx"),e.append("WhereClause","a.inc_exp_appId = '".concat(a.userConfig.appId,"' && b.inc_exp_cat_id = '").concat(H.category,"' && d.bank_appId = '").concat(a.userConfig.appId,"' && a.inc_exp_date >= '").concat(C()(H.startDate).format("YYYY-MM-DD").toString(),"' && a.inc_exp_date <= '").concat(C()(H.endDate).format("YYYY-MM-DD").toString(),"'")),x.a.post("/account_planner/getAccountPlanner",e)}(),s=function(){var e=new FormData;return e.append("TableRows","a.cc_transaction as name, a.cc_date as date, d.credit_card_name as creditCard, a.cc_payment_credits as credits, a.cc_purchases as purchases, a.cc_taxes_interest as interest, a.cc_comments as comments"),e.append("Table","categorizedCreditCardTrx"),e.append("WhereClause","a.cc_appId = '".concat(a.userConfig.appId,"' && b.inc_exp_cat_id = '").concat(H.category,"' && d.credit_card_appId = '").concat(a.userConfig.appId,"' && a.cc_date >= '").concat(C()(H.startDate).format("YYYY-MM-DD").toString(),"' && a.cc_date <= '").concat(C()(H.endDate).format("YYYY-MM-DD").toString(),"'")),x.a.post("/account_planner/getAccountPlanner",e)}();Promise.all([t,s]).then((function(a){q(a[0].data.response),X(a[1].data.response),"function"===typeof e&&e()})).catch((function(e){return console.log("bbb",e)})).finally((function(){return j(!1)}))}),100)};Object(o.useEffect)((function(){ee()}),[]);var te=Object(P.a)(),se={fetch:te.get("fetch"),categoryId:te.get("categoryId")},ce=Object(o.useState)(!1),ne=Object(r.a)(ce,2),re=ne[0],oe=ne[1];Object(o.useEffect)((function(){"category"===se.fetch&&se.categoryId&&(oe(!0),J((function(e){return Object(s.a)(Object(s.a)({},e),{},{category:se.categoryId})})))}),[JSON.stringify(se)]),Object(o.useEffect)((function(){"category"===se.fetch&&H.category&&re&&ae((function(){oe(!1)}))}),[JSON.stringify(se),H.category,re]);var ie=function(){return Object(m.jsx)("div",{className:"relativeSpinner middle",children:Object(m.jsx)(S.a,{type:I.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})};return Object(m.jsx)(R.Provider,{value:{incExpList:V,selection:H},children:Object(m.jsxs)(p,{fluid:!0,children:[Object(m.jsx)(l.a,{icon:"fa fa-sitemap",intlId:"category"}),N?Object(m.jsx)(ie,{}):Object(m.jsxs)(h.a,{children:[Object(m.jsx)(O.a,{sm:3,className:"react-responsive-ajax-data-table pb-2",children:Object(m.jsx)(y.a,{placeholder:"".concat(e.formatMessage({id:"select",defaultMessage:"select"})," ").concat(e.formatMessage({id:"category",defaultMessage:"category"})),onChange:function(e,a,t){J((function(e){return Object(s.a)(Object(s.a)({},e),{},{category:a})}))},element:{fetch:{dropDownList:V.map((function(e){return{id:e.id,value:e.value}}))}},value:H.category,type:"single",searchable:!0,theme:a.userData.theme})}),Object(m.jsxs)(O.a,{sm:3,className:"d-flex align-items-center justify-content-between pb-2",children:[Object(m.jsx)("span",{children:Object(m.jsx)(_.a,{id:"startDate",defaultMessage:"startDate"})}),Object(m.jsx)(v.a,{className:"bg-white text-dark",value:H.startDate,format:"yyyy-MM-dd",clearIcon:null,onChange:function(e){J((function(a){return Object(s.a)(Object(s.a)({},a),{},{startDate:e})}))}})]}),Object(m.jsxs)(O.a,{sm:3,className:"d-flex align-items-center justify-content-between pb-2",children:[Object(m.jsx)("span",{children:Object(m.jsx)(_.a,{id:"endDate",defaultMessage:"endDate"})}),Object(m.jsx)(v.a,{className:"bg-white text-dark",value:H.endDate,format:"yyyy-MM-dd",clearIcon:null,onChange:function(e){J((function(a){return Object(s.a)(Object(s.a)({},a),{},{endDate:e})}))}})]}),Object(m.jsx)(O.a,{sm:3,className:"pb-2",children:Object(m.jsx)("button",{className:"btn btn-sm btn-bni w-100 border-0",onClick:function(){return ae()},disabled:g||!H.category,children:g?Object(m.jsx)("i",{className:"fa fa-circle-o-notch fa-spin"}):Object(m.jsx)(_.a,{id:"generate",defaultMessage:"generate"})})})]}),K.length>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"py-2 text-center",children:Object(m.jsx)("span",{className:"badge bni-bg text-dark",children:e.formatMessage({id:"bankTransactions",defaultMessage:"bankTransactions"})})}),Object(m.jsx)(k.a,{config:Z.config,Table:Z.Table,TableRows:Z.TableRows,TableAliasRows:Z.TableAliasRows,rowElements:Z.rowElements,showTotal:Z.showTotal,defaultValues:Z.defaultValues,dbData:K,cellWidth:[20,7,10,5,20],theme:a.userData.theme},"cat-bank-table")]}),Q.length>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"py-2 text-center",children:Object(m.jsx)("span",{className:"badge bni-bg text-dark",children:e.formatMessage({id:"creditCardTransactions",defaultMessage:"creditCardTransactions"})})}),Object(m.jsx)(k.a,{config:$.config,Table:$.Table,TableRows:$.TableRows,TableAliasRows:$.TableAliasRows,rowElements:$.rowElements,showTotal:$.showTotal,defaultValues:$.defaultValues,dbData:Q,cellWidth:[20,7,10,10,10,10,20],theme:a.userData.theme},"cat-cc-table")]}),0===Q.length&&0===K.length&&d&&Object(m.jsx)("div",{className:"text-center py-2",children:Object(m.jsx)(_.a,{id:"noRecordsGenerated",defaultMessage:" "})})]})})}},194:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var s=t(1),c=t(71),n=function(){var e=Object(c.h)().search;return Object(s.useMemo)((function(){return new URLSearchParams(e)}),[e])}},195:function(e,a,t){"use strict";var s=t(25),c=t(28),n=t(1),r=t(1263),o=t(41),i=t(0),l=["icon","intlId","children"];a.a=function(e){var a=e.icon,t=e.intlId,d=e.children,u=Object(c.a)(e,l),b=Object(n.useContext)(o.a);return Object(i.jsx)("div",Object(s.a)(Object(s.a)({},u),{},{className:"bg-gradient ".concat("dark"===b.userData.theme?"bg-dark darkBoxShadow":"bg-white lightBoxShadow"," mt-2 ps-3 py-2 rounded-pill mb-4"),children:Object(i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(i.jsxs)("div",{className:"d-flex align-items-center",children:[Object(i.jsx)("i",{className:"".concat(a," fa-1x")}),Object(i.jsx)("div",{className:"ps-2 mb-0",children:Object(i.jsx)(r.a,{id:t,defaultMessage:t})})]}),d]})}))}}}]);