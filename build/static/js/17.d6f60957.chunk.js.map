{"version":3,"sources":["components/shared/D3/VerticalBarChart.js"],"names":["VerticalBarChart","props","svgRef","useRef","width","height","marginTop","marginRight","marginBottom","marginLeft","fillColor","fontColor","lineColor","yAxisLabel","xAxisLabel","padding","style","tooltipPrefix","tooltipSuffix","showTooltip","data","showYaxisLine","showXaxis","showXaxisLabel","showYaxis","showYaxisLabel","showLegend","sortClause","showAnimation","xAxisTicksOrientation","animationClass","onClick","fontSize","yTicks","useEffect","isNaN","order","sortBy","arguments","length","undefined","d3","_ref","d","_slicedToArray","Number","value","label","_ref3","map","x","domain","range","xAxis","tickSizeOuter","y","nice","svg","current","attr","call","zoom","extent","scaleExtent","translateExtent","on","event","transform","applyX","selectAll","bandwidth","remove","append","concat","join","i","e","tooltip","html","toLocaleString","minimumFractionDigits","maximumFractionDigits","pageX","pageY","text","g","ticks","tickFormat","select","JSON","stringify","_jsx","ref","defaultProps","verticalBarChartProps"],"mappings":"uKAMMA,EAAmB,SAAnBA,iBAAmBC,GACvB,IAAMC,EAASC,iBAAO,MAEpBC,EA8BEH,EA9BFG,MACAC,EA6BEJ,EA7BFI,OACAC,EA4BEL,EA5BFK,UACAC,EA2BEN,EA3BFM,YACAC,EA0BEP,EA1BFO,aACAC,EAyBER,EAzBFQ,WACAC,EAwBET,EAxBFS,UACAC,EAuBEV,EAvBFU,UACAC,EAsBEX,EAtBFW,UACAC,EAqBEZ,EArBFY,WACAC,EAoBEb,EApBFa,WACAC,EAmBEd,EAnBFc,QACAC,EAkBEf,EAlBFe,MACAC,EAiBEhB,EAjBFgB,cACAC,EAgBEjB,EAhBFiB,cACAC,EAeElB,EAfFkB,YACAC,EAcEnB,EAdFmB,KACAC,EAaEpB,EAbFoB,cACAC,EAYErB,EAZFqB,UACAC,EAWEtB,EAXFsB,eACAC,EAUEvB,EAVFuB,UACAC,EASExB,EATFwB,eACAC,EAQEzB,EARFyB,WACAC,EAOE1B,EAPF0B,WACAC,EAME3B,EANF2B,cACAC,EAKE5B,EALF4B,sBACAC,EAIE7B,EAJF6B,eACAC,EAGE9B,EAHF8B,QACAC,EAEE/B,EAFF+B,SACAC,EACEhC,EADFgC,OA6MF,OAvLAC,qBAAU,WACR,IAAKC,MAAM/B,GAAQ,CACjB,IAAMgC,EArBK,SAATC,SACJ,OADoBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,MAErB,IAAK,OACH,OAAOG,IACLrB,GACA,SAAAsB,GAAA,IAAEC,EAAFC,YAAAF,EAAA,GAAG,UAAOG,OAAOF,EAAEG,MAAM,IACzB,SAAAH,GAAC,OAAIA,EAAEI,KAAK,IAEhB,IAAK,MACH,OAAON,IACLrB,GACA,SAAA4B,GAAA,IAAEL,EAAFC,YAAAI,EAAA,GAAG,UAAMH,OAAOF,EAAEG,MAAM,IACxB,SAAAH,GAAC,OAAIA,EAAEI,KAAK,IAEhB,QACE,OAAO3B,EAAK6B,KAAI,SAAAN,GAAC,OAAIA,EAAEI,KAAK,IAElC,CAIkBV,CAAOV,GAEfuB,EAAIT,MAEPU,OAAOf,GACPgB,MAAM,CAAC3C,EAAYL,EAAQG,IAC3BQ,QAAQA,GAELsC,EAAQZ,IAAcS,GAAGI,cAAc,GAGvCC,EAAId,MAEPU,OAAO,CAAC,EAAGV,IAAOrB,GAAM,SAAAuB,GAAC,OAAIE,OAAOF,EAAEG,MAAM,MAC5CU,OACAJ,MAAM,CAAC/C,EAASG,EAAcF,IAkC3BmD,EAAMhB,IACFvC,EAAOwD,SACdC,KAAK,QAASvD,GACduD,KAAK,SAAUtD,EAAS,IACxBsD,KAAK,UAAW,CAAC,EAAG,EAAGvD,EAAOC,IAC9BuD,MArCU,SAAPC,KAAOJ,GACX,IAAMK,EAAS,CACb,CAACrD,EAAYH,GACb,CAACF,EAAQG,EAAaF,EAASC,IAGjCmD,EAAIG,KACFnB,MAEGsB,YAAY,CAAC,EAAG,IAChBC,gBAAgBF,GAChBA,OAAOA,GACPG,GAAG,QAAQ,SAAAC,GACVhB,EAAEE,MACA,CAAC3C,EAAYL,EAAQG,GAAa0C,KAAI,SAAAN,GAAC,OACrCuB,EAAMC,UAAUC,OAAOzB,EAAE,KAG7Bc,EACGY,UAAU,cACVV,KAAK,KAAK,SAAAhB,GAAC,OAAIO,EAAEP,EAAEI,MAAM,IACzBY,KAAK,QAAST,EAAEoB,aACnBb,EAAIY,UAAU,WAAWT,KAAKP,GAC9BI,EACGY,UAAU,iBACVV,KAAK,KAAK,SAAAhB,GAAC,OAAIO,EAAEP,EAAEI,MAAM,IACzBY,KAAK,QAAST,EAAEoB,aACnBb,EAAIY,UAAU,WAAWT,KAAKP,EAChC,IAEN,IAUAI,EAAIY,UAAU,SAASE,SACvBd,EAAIY,UAAU,YAAYE,SAC1Bd,EACGe,OAAO,KACPb,KAAK,QAAQ,QAADc,OAAU7C,EAAgBE,EAAiB,KACvDuC,YACAjD,KAAKA,GACLsD,KAAK,QACLT,GAAG,SAAS,SAACtB,EAAGgC,GACf5C,EAAQY,EAAGgC,EACb,IACCV,GAAG,aAAa,SAACW,EAAGjC,GACfxB,IACF0D,IAAQ7D,MAAM,UAAW,OACzB6D,IAAQ7D,MAAM,UAAW,GACzB6D,IACGC,KAAK,QAADL,OACKxD,EAAa,cAAAwD,OAAa9B,EAAEI,MAAK,eAAA0B,OAAc5B,OACrDF,EAAEG,OACFiC,eAAe,QAAS,CACxBC,sBAAuB,EACvBC,sBAAuB,IACvB,eAAAR,OAAcvD,EAAa,WAE9BF,MAAM,OAAQ4D,EAAEM,MAAQ,GAAK,MAC7BlE,MAAM,MAAO4D,EAAEO,MAAQ,GAAK,MAEnC,IACClB,GAAG,YAAY,SAAAtB,GACdkC,IAAQ7D,MAAM,UAAW,GACzB6D,IAAQ7D,MAAM,UAAW,EAC3B,IACC2C,KAAK,QAAST,EAAEoB,aAChBX,KAAK,KAAK,SAAAhB,GAAC,OAAIO,EAAEP,EAAEI,MAAM,IAGzBY,KAAK,OAAQjD,GACbiD,KAAK,KAAK,SAAAhB,GAAC,OAAIY,EAAEZ,EAAEG,MAAM,IACzBa,KAAK,UAAU,SAAAhB,GAAC,OAAIY,EAAE,GAAKA,EAAEZ,EAAEG,MAAM,IAEpCpB,GACF+B,EACGe,OAAO,KACPb,KAAK,QAAQ,WAADc,OAAa7C,EAAgBE,EAAiB,KAC1DuC,YACAjD,KAAKA,GACLsD,KAAK,QACLU,MAAK,SAAAzC,GAAC,OAAIA,EAAEG,KAAK,IACjBa,KAAK,QAAST,EAAEoB,aAChBX,KAAK,OAAQhD,GACbgD,KAAK,YAAa3B,GAClB2B,KAAK,KAAK,SAAAhB,GAAC,OAAIO,EAAEP,EAAEI,MAAM,IACzBY,KAAK,KAAK,SAAAhB,GAAC,OAAIY,EAAEZ,EAAEG,OAAS,CAAC,IAC7Ba,KAAK,UAAU,SAAAhB,GAAC,OAAIY,EAAE,GAAKA,EAAEZ,EAAEG,MAAM,IAI1CW,EAAIY,UAAU,WAAWE,SACrBjD,IACFmC,EACGe,OAAO,KACPb,KAAK,KAAM,UACXA,KAAK,QAAS,UACdA,KAAK,YAAY,eAADc,OAAiBpE,EAASG,EAAY,MACtDoD,KAAKP,GACLO,MAAK,SAAAyB,GAAC,OACL9D,EACI8D,EACGb,OAAO,QACPxD,MAAM,cAAe,SACrB2C,KAAK,YAAa3B,GAClB2B,KAAK,IAAKvD,EAAQ,GAClBuD,KAAK,IAAKnD,GACVmD,KAAK,OAAQhD,GACbyE,KAAKtE,GACRuE,CAAC,IAEqB,aAA1BxD,GACF4B,EACGY,UAAU,sBACVV,KAAK,YAAa3B,GAClBhB,MAAM,cAAe,OACrB2C,KAAK,IAAK,MACVA,KAAK,KAAM,QACXA,KAAK,KAAM,SACXA,KAAK,YAAa,gBAKzBF,EAAIY,UAAU,WAAWE,SACrB/C,IACFiC,EACGe,OAAO,KACPb,KAAK,KAAM,UACXA,KAAK,QAAS,UACdA,KAAK,YAAY,aAADc,OAAehE,EAAU,QACzCmD,KAAKnB,IAAYc,GAAG+B,MAAMrD,GAAQsD,WAAW9C,IAAU,SACvDmB,MAAK,SAAAyB,GAAC,OAAMhE,EAA+CgE,EAA/BA,EAAEG,OAAO,WAAWjB,QAAY,IAC5DX,MAAK,SAAAyB,GAAC,OACL5D,EACI4D,EACGb,OAAO,QACPxD,MAAM,cAAe,UACrB2C,KAAK,YAAa3B,GAClB2B,KAAK,MAAQtD,EAASG,GAAgB,GACtCmD,KAAK,MAAOlD,EAAa,KACzBkD,KAAK,OAAQhD,GACbgD,KAAK,YAAa,eAClByB,KAAKvE,GACRwE,CAAC,IAGT5B,EAAIY,UAAU,WAAWV,KAAK,SAAU/C,GACxC6C,EACGY,UAAU,cACVV,KAAK,SAAUhD,GACfgD,KAAK,YAAa3B,GAClB2B,KAAK,OAAQhD,GAChB8C,EAAIY,UAAU,cAAcV,KAAK,SAAU/C,GAE/C,CACF,GAAG,CAAC6E,KAAKC,UAAUzF,KAEZ0F,cAAA,OAAK3E,MAAOA,EAAO4E,IAAK1F,GACjC,EAkCAF,EAAiB6F,aAAeC,IAEjB9F,W","file":"static/js/17.d6f60957.chunk.js","sourcesContent":["import React, { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport { tooltip } from \"./constants\";\nimport PropTypes from \"prop-types\";\nimport { verticalBarChartProps } from \"./propsData\";\n\nconst VerticalBarChart = props => {\n  const svgRef = useRef(null);\n  const {\n    width,\n    height,\n    marginTop,\n    marginRight,\n    marginBottom,\n    marginLeft,\n    fillColor,\n    fontColor,\n    lineColor,\n    yAxisLabel,\n    xAxisLabel,\n    padding,\n    style,\n    tooltipPrefix,\n    tooltipSuffix,\n    showTooltip,\n    data,\n    showYaxisLine,\n    showXaxis,\n    showXaxisLabel,\n    showYaxis,\n    showYaxisLabel,\n    showLegend,\n    sortClause,\n    showAnimation,\n    xAxisTicksOrientation,\n    animationClass,\n    onClick,\n    fontSize,\n    yTicks,\n  } = props;\n\n  const sortBy = (clause = null) => {\n    switch (clause) {\n      case \"desc\":\n        return d3.groupSort(\n          data,\n          ([d]) => -Number(d.value),\n          d => d.label,\n        );\n      case \"asc\":\n        return d3.groupSort(\n          data,\n          ([d]) => Number(d.value),\n          d => d.label,\n        );\n      default:\n        return data.map(d => d.label);\n    }\n  };\n\n  useEffect(() => {\n    if (!isNaN(width)) {\n      const order = sortBy(sortClause);\n      // Declare the x (horizontal position) scale.\n      const x = d3\n        .scaleBand()\n        .domain(order)\n        .range([marginLeft, width - marginRight])\n        .padding(padding);\n\n      const xAxis = d3.axisBottom(x).tickSizeOuter(0);\n\n      // Declare the y (vertical position) scale.\n      const y = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, d => Number(d.value))])\n        .nice()\n        .range([height - marginBottom, marginTop]);\n\n      const zoom = svg => {\n        const extent = [\n          [marginLeft, marginTop],\n          [width - marginRight, height - marginTop],\n        ];\n\n        svg.call(\n          d3\n            .zoom()\n            .scaleExtent([1, 8])\n            .translateExtent(extent)\n            .extent(extent)\n            .on(\"zoom\", event => {\n              x.range(\n                [marginLeft, width - marginRight].map(d =>\n                  event.transform.applyX(d),\n                ),\n              );\n              svg\n                .selectAll(\".bars rect\")\n                .attr(\"x\", d => x(d.label))\n                .attr(\"width\", x.bandwidth());\n              svg.selectAll(\".x-axis\").call(xAxis);\n              svg\n                .selectAll(\".legends text\")\n                .attr(\"x\", d => x(d.label))\n                .attr(\"width\", x.bandwidth());\n              svg.selectAll(\".x-axis\").call(xAxis);\n            }),\n        );\n      };\n      // Create the SVG container.\n      const svg = d3\n        .select(svgRef.current)\n        .attr(\"width\", width)\n        .attr(\"height\", height + 10)\n        .attr(\"viewBox\", [0, 0, width, height])\n        .call(zoom);\n\n      // Add a rect for each bar.\n      svg.selectAll(`.bars`).remove();\n      svg.selectAll(`.legends`).remove();\n      svg\n        .append(\"g\")\n        .attr(\"class\", `bars ${showAnimation ? animationClass : \"\"}`)\n        .selectAll()\n        .data(data)\n        .join(\"rect\")\n        .on(\"click\", (d, i) => {\n          onClick(d, i);\n        })\n        .on(\"mousemove\", (e, d) => {\n          if (showTooltip) {\n            tooltip.style(\"padding\", \"5px\");\n            tooltip.style(\"opacity\", 1);\n            tooltip\n              .html(\n                `<div>${tooltipPrefix}<div><div>${d.label}</div><div>${Number(\n                  d.value,\n                ).toLocaleString(\"en-US\", {\n                  minimumFractionDigits: 2,\n                  maximumFractionDigits: 2,\n                })}</div><div>${tooltipSuffix}</div>`,\n              )\n              .style(\"left\", e.pageX + 10 + \"px\")\n              .style(\"top\", e.pageY - 50 + \"px\");\n          }\n        })\n        .on(\"mouseout\", d => {\n          tooltip.style(\"padding\", 0);\n          tooltip.style(\"opacity\", 0);\n        })\n        .attr(\"width\", x.bandwidth())\n        .attr(\"x\", d => x(d.label))\n        // .attr(\"y\", 0)\n        // .attr(\"height\", 0)\n        .attr(\"fill\", fillColor)\n        .attr(\"y\", d => y(d.value))\n        .attr(\"height\", d => y(0) - y(d.value));\n\n      if (showLegend) {\n        svg\n          .append(\"g\")\n          .attr(\"class\", `legends ${showAnimation ? animationClass : \"\"}`)\n          .selectAll()\n          .data(data)\n          .join(\"text\")\n          .text(d => d.value)\n          .attr(\"width\", x.bandwidth())\n          .attr(\"fill\", fontColor)\n          .attr(\"font-size\", fontSize)\n          .attr(\"x\", d => x(d.label))\n          .attr(\"y\", d => y(d.value) - 5)\n          .attr(\"height\", d => y(0) - y(d.value));\n      }\n\n      // Add the x-axis and label.\n      svg.selectAll(`#x-axis`).remove();\n      if (showXaxis) {\n        svg\n          .append(\"g\")\n          .attr(\"id\", \"x-axis\")\n          .attr(\"class\", \"x-axis\")\n          .attr(\"transform\", `translate(0,${height - marginBottom})`)\n          .call(xAxis)\n          .call(g =>\n            showXaxisLabel\n              ? g\n                  .append(\"text\")\n                  .style(\"text-anchor\", \"start\")\n                  .attr(\"font-size\", fontSize)\n                  .attr(\"x\", width / 2)\n                  .attr(\"y\", marginBottom)\n                  .attr(\"fill\", fontColor)\n                  .text(xAxisLabel)\n              : g,\n          );\n        if (xAxisTicksOrientation === \"vertical\") {\n          svg\n            .selectAll(\".x-axis .tick text\")\n            .attr(\"font-size\", fontSize)\n            .style(\"text-anchor\", \"end\")\n            .attr(\"y\", \"15\")\n            .attr(\"dx\", \"-1em\")\n            .attr(\"dy\", \".15em\")\n            .attr(\"transform\", \"rotate(-60)\");\n        }\n      }\n\n      // Add the y-axis and x-axis label\n      svg.selectAll(`#y-axis`).remove();\n      if (showYaxis) {\n        svg\n          .append(\"g\")\n          .attr(\"id\", \"y-axis\")\n          .attr(\"class\", \"y-axis\")\n          .attr(\"transform\", `translate(${marginLeft},0)`)\n          .call(d3.axisLeft(y).ticks(yTicks).tickFormat(d3.format(\".2s\")))\n          .call(g => (!showYaxisLine ? g.select(\".domain\").remove() : g))\n          .call(g =>\n            showYaxisLabel\n              ? g\n                  .append(\"text\")\n                  .style(\"text-anchor\", \"middle\")\n                  .attr(\"font-size\", fontSize)\n                  .attr(\"x\", -((height - marginBottom) / 2))\n                  .attr(\"y\", -(marginLeft - 20))\n                  .attr(\"fill\", fontColor)\n                  .attr(\"transform\", \"rotate(270)\")\n                  .text(yAxisLabel)\n              : g,\n          );\n\n        svg.selectAll(\".domain\").attr(\"stroke\", lineColor);\n        svg\n          .selectAll(\".tick text\")\n          .attr(\"stroke\", fontColor)\n          .attr(\"font-size\", fontSize)\n          .attr(\"fill\", fontColor);\n        svg.selectAll(\".tick line\").attr(\"stroke\", lineColor);\n      }\n    }\n  }, [JSON.stringify(props)]);\n\n  return <svg style={style} ref={svgRef} />;\n};\n\nVerticalBarChart.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  marginTop: PropTypes.number,\n  marginRight: PropTypes.number,\n  marginBottom: PropTypes.number,\n  marginLeft: PropTypes.number,\n  fillColor: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  fontColor: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  lineColor: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  yAxisLabel: PropTypes.string,\n  xAxisLabel: PropTypes.string,\n  padding: PropTypes.number,\n  style: PropTypes.object,\n  tooltipPrefix: PropTypes.string,\n  tooltipSuffix: PropTypes.string,\n  showTooltip: PropTypes.bool,\n  data: PropTypes.array,\n  showYaxisLine: PropTypes.bool,\n  showXaxis: PropTypes.bool,\n  showXaxisLabel: PropTypes.bool,\n  showYaxis: PropTypes.bool,\n  showYaxisLabel: PropTypes.bool,\n  showAnimation: PropTypes.bool,\n  showLegend: PropTypes.bool,\n  sortClause: PropTypes.string,\n  xAxisTicksOrientation: PropTypes.string,\n  onClick: PropTypes.func,\n  fontSize: PropTypes.number,\n  yTicks: PropTypes.number,\n};\n\nVerticalBarChart.defaultProps = verticalBarChartProps;\n\nexport default VerticalBarChart;\n"],"sourceRoot":""}