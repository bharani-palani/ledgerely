"use strict";(self.webpackChunkledgerely_com=self.webpackChunkledgerely_com||[]).push([[2914,6231],{6731:(e,a,s)=>{s.d(a,{E:()=>r,x:()=>n});s(9950);var t=s(3027),l=s(2074),i=s(4414);const n=()=>(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)("i",{className:"fa fa-exclamation-triangle fa-2x pt-2 text-danger"}),(0,i.jsxs)("div",{className:"ps-2",children:[(0,i.jsx)("div",{className:"fs-3",children:(0,i.jsx)(t.A,{id:"alert",defaultMessage:"alert"})}),(0,i.jsx)("div",{className:"fs-6",children:(0,i.jsx)(t.A,{id:"maximumQuotaExceeded",defaultMessage:"maximumQuotaExceeded"})})]})]})}),r=()=>(0,i.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)(l.N_,{className:"btn btn-sm btn-primary me-1 rounded-pill",to:"/billing",children:[(0,i.jsx)("i",{className:"fa fa-credit-card-alt pe-1"}),(0,i.jsx)(t.A,{id:"upgradeNow",defaultMessage:"upgradeNow"})]}),(0,i.jsx)("span",{className:"fs-6",children:(0,i.jsx)(t.A,{id:"accessUnlimitedStorage",defaultMessage:"accessUnlimitedStorage"})})]})})},2914:(e,a,s)=>{s.r(a),s.d(a,{default:()=>re});var t=s(9950),l=s(8127),i=s(1515),n=s(3276),r=s(6781),o=s(8459),d=s(2581),c=s(4414);const u=e=>{const{id:a,units:s,title:l,min:i,max:n,init:u,step:m,onChange:p}=e,[g,x]=(0,t.useState)(u),[h,f]=(0,t.useState)(g);return(0,t.useEffect)((()=>{const e=isFinite(m)?Number(null===g||void 0===g?void 0:g.toFixed((e=>Math.floor(e)!==e&&e.toString().split(".")[1].length||0)(m))):i;f(e),p({id:a,value:e})}),[g]),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"small fst-italic",children:l}),(0,c.jsxs)(r.A,{className:"justify-content-between pb-1",children:[(0,c.jsx)(o.A,{sm:1,children:(0,c.jsx)("i",{className:"fa fa-minus cursor-pointer",onClick:()=>g<=n&&g>i&&x(g-m)})}),(0,c.jsx)(o.A,{xs:!0,sm:5,children:(0,c.jsx)(d.A,{min:i,max:n,value:g,step:m,orientation:"horizontal",onChange:e=>x(e),tooltip:!1})}),(0,c.jsx)(o.A,{sm:1,children:(0,c.jsx)("i",{className:"fa fa-plus cursor-pointer",onClick:()=>g<n&&g>=i&&x(g+m)})}),(0,c.jsx)(o.A,{xs:!0,sm:4,children:(0,c.jsxs)("small",{children:[h,s]})})]})]})};var m=s(4761),p=s(246),g=s(3302),x=s(1432),h=s(68),f=s(3027);const b=e=>{const{id:a,title:s,init:l,onChange:i}=e,n=(0,t.useContext)(h.A),{theme:d}=n,[u,b]=(0,t.useState)(l),[v,j]=(0,t.useState)("single"),y=[["transparent","#000000","#ffffff",document.documentElement.style.getPropertyValue("--app-theme-bg-color"),document.documentElement.style.getPropertyValue("--app-theme-color")],m.schemeCategory10,m.schemeAccent,m.schemeDark2,m.schemePaired,m.schemePastel1,m.schemePastel2,m.schemeSet1,m.schemeSet2,m.schemeSet3,m.schemeTableau10];(0,t.useEffect)((()=>{i({id:a,value:u}),j("object"===typeof l?"multiple":"single")}),[u]);return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,c.jsxs)("div",{className:"btn-group btn-group-sm py-0",children:[(0,c.jsx)(x.A,{trigger:"click",placement:"left",overlay:(0,c.jsxs)(p.A,{className:"border-0",style:{width:"350px",maxWidth:"350px"},children:[(0,c.jsx)(p.A.Header,{as:"div",className:"border-bottom border-secondary "+("dark"===d?"bg-dark text-light":"bg-light text-dark"),children:(0,c.jsx)(g.A.Check,{type:"checkbox",checked:"single"===v,id:`default-${v}`,label:"single"===v?"Single":"Multiple",onChange:e=>e.target.checked?j("single"):j("multiple")})}),(0,c.jsx)(p.A.Body,{className:`p-2 rounded-bottom bg-${d}`,children:y.map(((e,a)=>(0,c.jsx)(r.A,{className:"m-0",children:e.map(((e,s)=>(0,c.jsx)(o.A,{xs:1,className:"px-1",children:(0,c.jsx)("i",{className:"fa fa-square cursor-pointer "+(0===a&&0===s?"border border-1 border-secondary rounded-1":""),title:e,style:{color:e},onClick:()=>(e=>{if("single"===v)b(e);else{const a="object"===typeof u?[...u,e]:[u,e];b(a)}})(e)})},s)))},a)))})]}),rootClose:!0,children:(0,c.jsxs)("button",{className:"btn btn-sm btn-bni py-0",children:[(0,c.jsx)("i",{className:"fa fa-paint-brush cursor-pointer pe-2"}),(0,c.jsx)("span",{className:"small fst-italic",children:(0,c.jsx)(f.A,{id:"select",defaultMessage:"select"})})]})}),(0,c.jsx)("button",{className:"btn btn-sm btn-danger py-0",onClick:()=>b([]),disabled:!(null!==u&&void 0!==u&&u.length),children:(0,c.jsx)("i",{className:"fa fa-times cursor-pointer"})})]}),(0,c.jsx)("label",{className:"small fst-italic",children:s})]}),(0,c.jsx)(r.A,{className:"p-2",children:"string"===typeof u?(0,c.jsx)(o.A,{xs:12,className:"px-1",children:(0,c.jsx)("div",{className:"rounded-1 lh-1",style:{background:u},children:"\xa0"})}):u.map(((e,a)=>(0,c.jsx)(o.A,{xs:1,className:"px-1 cursor-pointer",onClick:()=>(e=>{const a=[...u].filter(((a,s)=>s!==e));b(a)})(a),children:(0,c.jsx)("i",{className:"fa fa-square",style:{color:e}})},a)))})]})},v=e=>{const{id:a,title:s,init:l,onChange:i,...n}=e,[r,o]=(0,t.useState)(l);return(0,t.useEffect)((()=>{i({id:a,value:r})}),[r]),(0,c.jsxs)("div",{className:"input-group input-group-sm mb-1",children:[(0,c.jsx)("label",{className:"input-group-text bni-bg border-0 fst-italic",htmlFor:a,children:s}),(0,c.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value),className:"form-control",id:a,...n})]})},j=e=>{const{id:a,title:s,onChange:l,list:i,isInline:n,init:r}=e,[o,d]=(0,t.useState)(r);return(0,t.useEffect)((()=>{l({id:a,value:o})}),[o]),(0,c.jsxs)("div",{className:"mb-1",children:[(0,c.jsx)("div",{children:(0,c.jsx)("span",{className:"small fst-italic",children:s})}),i.map(((e,s)=>(0,c.jsxs)("div",{className:"form-check py-1 "+(n?"form-check-inline":""),children:[(0,c.jsx)("input",{className:"form-check-input",type:"radio",name:a,id:e.id,value:e.value,onChange:e=>d(e.target.value),defaultChecked:o===e.value}),(0,c.jsx)("label",{className:"form-check-label small",htmlFor:e.id,children:e.label})]},s)))]})},y=e=>{const{id:a,title:s,onChange:l,init:i}=e,[n,r]=(0,t.useState)(i);return(0,t.useEffect)((()=>{l({id:a,value:n})}),[n]),(0,c.jsx)(g.A,{children:(0,c.jsx)(g.A.Check,{type:"switch",id:a,value:n,label:s,checked:n,onChange:e=>r(e.target.checked),className:"fst-italic"})})},N=e=>{const{id:a,title:s,init:t,onChange:l,list:i}=e;return(0,c.jsxs)(r.A,{className:"align-items-center pb-1",children:[(0,c.jsx)(o.A,{lg:12,children:(0,c.jsx)("span",{className:"small fst-italic",children:s})}),(0,c.jsx)(o.A,{lg:12,children:(0,c.jsx)("select",{className:"form-control form-control-sm rounded",defaultValue:t,onChange:e=>l({id:a,value:e.target.value}),children:i.map(((e,a)=>(0,c.jsx)("option",{value:e.id,children:e.value},a)))})})]})};var M=s(4268),A=s(8738),C=s.n(A),w=s(4089);const k=t.forwardRef(((e,a)=>{let{bsPrefix:s,size:t,vertical:l=!1,className:i,role:n="group",as:r="div",...o}=e;const d=(0,w.oU)(s,"btn-group");let u=d;return l&&(u=`${d}-vertical`),(0,c.jsx)(r,{...o,ref:a,role:n,className:C()(i,u,t&&`${d}-${t}`)})}));k.displayName="ButtonGroup";const S=k;var T=s(7937),_=s(5342),L=s(2436),E=s(6231),I=s(6275),O=s(2083),$=s(9288),D=s(23);const F=e=>{let{config:a}=e;const r=(0,$.A)(),o=(0,t.useContext)(h.A),d=(0,t.useContext)(L.R),u=(0,t.useContext)(se),{theme:m}=o,{setTableDragging:p,activeDataSource:g,setActiveDataSource:x,setSelectedWBFields:b,setTable:v,setResponse:j,setErrorResponse:y}=u,[N,M]=(0,t.useState)([]),A=52428800;function C(e){let{children:a,eventKey:s}=e;const t=(0,l.M)(s,(()=>{x(s)}));return(0,c.jsx)("button",{type:"button",className:`text-start py-1 border-0 btn btn-sm btn-bni w-100 border-0 border-bottom border-${m}`,onClick:t,style:"MP"===s?{borderRadius:"5px 0px 0px 0px"}:{borderRadius:"0"},children:a})}const w=e=>{M(e[0].name),((e,a)=>new Promise(((s,t)=>{const l=e,i=new FileReader;i.readAsText(l),i.onload=e=>{const i=[],n=e.target.result;if("CSV"===a){const e=n.split(/\r\n|\n/),a=e[0].split(",");if(l.size<=A)if(e.length-1<=1e3){for(let s=1;s<e.length;s++){const t=e[s].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(t.length===a.length){const e=[];for(let l=0;l<a.length;l++)e.push({[a[l]]:t[l].replace(/\\/g,"").replaceAll('"',"")});const s=Object.assign({},...e);i.push(s)}}s(i)}else t(new Error(`${r.formatMessage({id:"maxAllowedRowLimitIs",defaultMessage:"maxAllowedRowLimitIs"})} 1000`));else t(new Error(`${r.formatMessage({id:"maxFileSizeLimitIs",defaultMessage:"maxFileSizeLimitIs"})} 52428800 MB`))}else try{if(JSON.parse(n)&&n){const e=JSON.parse(n);e.length>0&&Array.isArray(e)&&j(e)}}catch(e){console.error(e),t(new Error("Not a valid array of JSON object"))}},i.onerror=e=>{t(e)}})))(e[0],g).then((e=>{j(e),y({})})).catch((e=>{const a=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));j([]),y({errorMessage:a.message}),d.renderToast({position:"bottom-center",type:"error",icon:"fa fa-times-circle",message:e})}))};return(0,t.useEffect)((()=>{var e,s,t,l;v(null===(e=a[0])||void 0===e||null===(s=e.tables[0])||void 0===s?void 0:s.label),b(null===(t=a[0])||void 0===t||null===(l=t.tables[0])||void 0===l?void 0:l.fields)}),[]),(0,c.jsx)(i.A,{defaultActiveKey:g,className:"",children:a.map(((e,a)=>(0,c.jsxs)(n.A,{className:"border-0 rounded-0 "+("dark"===m?"bg-dark text-white":"bg-white text-dark"),children:[(0,c.jsx)(n.A.Header,{className:"m-0 p-0 rounded-0",children:(0,c.jsx)(C,{eventKey:e.id,children:e.label})}),(0,c.jsx)(i.A.Collapse,{eventKey:e.id,children:e.hasUpload?(0,c.jsx)(n.A.Body,{className:"m-2 p-2 rounded text-center p-3 border-1 bni-border bni-border-all bni-border-all-1",children:(0,c.jsx)(I.Ay,{accept:null===e||void 0===e?void 0:e.fileType,onDrop:w,className:"",children:e=>{var a,s;let{getRootProps:t,getInputProps:l,isDragAccept:i,isDragReject:n}=e,r="dropZoneWrapper",o=(0,c.jsx)("div",{className:"icon-bni",children:(0,c.jsx)(f.A,{id:"clickHereToUpload",defaultMessage:"clickHereToUpload"})});return i&&(r=`${r} bg-success`,o=(0,c.jsx)("div",{className:"upload-success",children:(0,c.jsx)(f.A,{id:"dropFileOrfilesHere",defaultMessage:"dropFileOrfilesHere"})})),n&&(r=`${r} bg-danger`,o=(0,c.jsx)("div",{className:"upload-error",children:(0,c.jsx)(f.A,{id:"fileTypeNotAllowed",defaultMessage:"fileTypeNotAllowed"})})),(0,c.jsxs)("div",{...t(),className:`${r} title`,children:[(0,c.jsx)("input",{...l()}),(0,c.jsx)("small",{children:o}),(null===(a=N[0])||void 0===a?void 0:a.name)&&(0,c.jsx)("em",{style:{fontSize:"0.75rem",lineHeight:1.25,display:"inline-block"},className:"icon-bni mt-2",children:O.A.shorten(null===(s=N[0])||void 0===s?void 0:s.name,20)})]})}})}):(0,c.jsxs)("div",{className:"p-1",children:[(0,c.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,c.jsx)("span",{children:(0,c.jsx)(f.A,{id:"tables",defaultMessage:"tables"})}),(0,c.jsx)(D.A,{btnValue:'<i class="fa fa-sitemap" />',btnClassName:"btn-white rounded btn-sm btn-bni btn px-1 py-0",placement:"bottom",label:r.formatMessage({id:"ERD",defaultMessage:"ERD"}),style:{zIndex:1e4,height:"100vh"},children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-2"}),(0,c.jsx)("img",{className:"col-8",style:{height:"calc(100vh - 100px)"},alt:"eerImage",src:s(3066)}),(0,c.jsx)("div",{className:"col-2"})]})})]}),e.tables.map(((e,a)=>(0,c.jsx)("div",{children:(0,c.jsx)("button",{draggable:!0,className:"my-1 btn btn-sm btn-bni w-100 rounded-pill",onClick:()=>{v(e.label),b(e.fields)},onDrag:()=>{p({source:["from","join"]}),v(e.label),b(e.fields)},onDragEnd:()=>p({}),onDragStart:a=>{a.dataTransfer.setData("text",JSON.stringify({source:["from","join"],data:e.label}))},children:e.label})},a)))]})})]},a)))})};var R=s(1942),B=s.n(R),P=s(1e3),U=s(7359);const z=B().oneOf(["start","end"]),K=B().oneOfType([z,B().shape({sm:z}),B().shape({md:z}),B().shape({lg:z}),B().shape({xl:z}),B().shape({xxl:z}),B().object]),q={id:B().string,href:B().string,onClick:B().func,title:B().node.isRequired,disabled:B().bool,align:K,menuRole:B().string,renderMenuOnMount:B().bool,rootCloseEvent:B().string,menuVariant:B().oneOf(["dark"]),flip:B().bool,bsPrefix:B().string,variant:B().string,size:B().string},G=t.forwardRef(((e,a)=>{let{title:s,children:t,bsPrefix:l,rootCloseEvent:i,variant:n,size:r,menuRole:o,renderMenuOnMount:d,disabled:u,href:m,id:p,menuVariant:g,flip:x,...h}=e;return(0,c.jsxs)(_.A,{ref:a,...h,children:[(0,c.jsx)(P.A,{id:p,href:m,size:r,variant:n,disabled:u,childBsPrefix:l,children:s}),(0,c.jsx)(U.A,{role:o,renderOnMount:d,rootCloseEvent:i,variant:g,flip:x,children:t})]})}));G.displayName="DropdownButton",G.propTypes=q;const H=G;var Q=s(5623),Y=s(2950),V=s(3932),W=s(9051),J=s.n(W);const X=e=>{var a,s;const l=(0,$.A)(),{targetKey:i,type:n,contextMenu:u,suffixList:m,showAlias:b}=e,v=(0,t.useContext)(h.A),j=(0,t.useContext)(se),{clause:y,setClause:N,optionsConfig:M,tableDragging:A,fieldDragging:C,table:w,selectedWBFields:k}=j,{theme:S}=v,T=[{id:"DATE",label:l.formatMessage({id:"date",defaultMessage:"date"}),input:{start:J()().startOf("year").toDate(),end:J()().endOf("year").toDate()}},{id:"NUMBER",label:l.formatMessage({id:"number",defaultMessage:"number"}),input:{start:1,end:1}}],[L,E]=(0,t.useState)(T[0]),I=(e,a)=>(0,c.jsxs)(p.A,{style:{zIndex:1e4},children:[(0,c.jsx)(p.A.Header,{as:"div",className:"bni-bg bni-text py-1 px-2",children:(0,c.jsxs)("small",{className:"small",children:[(0,c.jsx)("span",{children:"\u0192"}),(0,c.jsx)("sub",{children:"\u2229"})]})}),(0,c.jsx)(p.A.Body,{className:"p-0",children:(0,c.jsx)("ul",{className:"list-group list-group-flush rounded-bottom",children:u.map(((s,t)=>(0,c.jsx)("li",{onClick:()=>D(e,s,a),className:"list-group-item cursor-pointer py-1 px-2 small",children:s.label},t)))})})]}),O=(e,a)=>{N((s=>({...s,[i]:y[i].map(((s,t)=>t===e?""!==a?{...s,query:`${s.query.split(" ")[0]} AS ${a}`}:{...s,query:s.query.split(" ")[0]}:s))})))},D=(e,a,s)=>{document.body.click(),N((t=>({...t,[i]:y[i].map(((t,l)=>{if(l===e&&"function"===a.mode)return"NULL"!==a.label?{...t,query:`${a.label}(${t.data})`,input:[],row:[]}:{...t,query:`${t.data}`,input:[],row:[]};if(l===e&&"propertyBindingFunction"===a.mode){const e=[`${w}.${k[0]}`,"=",0,t.data];return"NULL"!==a.label?{...t,row:a.pieces,input:e,hasQuotes:a.hasQuotes,query:a.pieces.map(((a,s)=>a.replace(`{${s}}`,isNaN(e[s])?e[s]:`'${e[s]}'`))).join("")}:{}}return l===e&&"operator"===a.mode?{...t,data:s.data,row:`${s.data} ${a.value}`,label:a.label,value:a.value,valueType:a.valueType,placeholder:a.placeholder,suffix:a.suffix,input:""}:l===e&&"joinQuery"===a.mode?{...t,...{row:`${a.label} JOIN ${s.targetTable.label} ON ${s.selectedSource} = ${s.selectedTarget}`,array:[s.targetTable.label,`${s.selectedSource} = ${s.selectedTarget}`,a.label],...a}}:t}))})))},F=(e,a,s,t)=>{N((l=>({...l,[i]:y[i].map(((l,i)=>{if(i===e){let e="";const{value:i}=l,n=a.split(",");return"SINGLE"===s.valueType&&(e=i.replace("{a}",`${n[0]}`)),"DOUBLE"===s.valueType&&(n[0]&&(e=i.replace("{a}",`${n[0]}`)),n[1]&&(e=e.replace("{b}",`${n[1]}`))),"MULTIPLE"===s.valueType&&(e=i.replace("{n}",`(${n.join(",")})`)),{...l,row:`${l.data} ${e}${t?` ${l.suffix}`:""}`,input:a}}return l}))})))},R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;N((a=>({...a,..."array"===n||"arrayOfObjects"===n||"relation"===n?{[i]:y[i].filter(((a,s)=>s!==e))}:{[i]:""}})))},B=(e,a,s)=>{N((t=>({...t,[i]:y[i].map(((t,l)=>(l===a&&(t[s]=e,t.row=`${t.label} JOIN ${t.targetTable.label} ON ${t.selectedSource} = ${t.selectedTarget}`,t.array=[t.targetTable.label,`${t.selectedSource} = ${t.selectedTarget}`,t.label]),t)))})))},P=(e,a,s)=>{N((t=>({...t,[i]:y[i].map(((t,l)=>(l===e&&(t.input=t.input.map(((e,t)=>(t===a&&(e=s),e))),t.query=t.row.map(((e,a)=>e.replace(`{${a}}`,t.hasQuotes[a]?`'${t.input[a]}'`:t.input[a]))).join("")),t)))})))},U=()=>(0,c.jsx)("ul",{className:"list-group p-1",children:y[i].map(((e,a)=>(0,c.jsx)(t.Fragment,{children:(0,c.jsxs)("li",{className:"p-1 list-group-item "+("dark"===S?"bg-dark text-white border-secondary":"bg-white text-dark"),style:{columnGap:"10px"},children:[(0,c.jsxs)("div",{className:"d-flex align-items-center justify-content-between",style:{columnGap:"5px"},children:[(null===u||void 0===u?void 0:u.length)>0&&(0,c.jsx)(x.A,{trigger:"click",placement:"right",overlay:I(a,e),rootClose:!0,children:(0,c.jsx)("i",{className:"fa fa-bars cursor-pointer"})}),(0,c.jsx)("span",{title:e.data,className:"w-50 d-inline-block text-truncate small",children:e.data}),(0,c.jsx)("span",{title:e.label,className:"d-inline-block text-truncate text-end small",children:e.label}),(0,c.jsx)("i",{onClick:()=>R(a),className:"fa fa-times-circle cursor-pointer text-danger"})]}),"NULL"!==e.valueType&&(0,c.jsxs)("div",{className:"",children:[["SINGLE","MULTIPLE"].includes(e.valueType)&&(0,c.jsx)(g.A.Control,{onChange:s=>F(a,s.target.value,e,y[i].length-1!==a),type:"text",size:"sm",disabled:!e.label,placeholder:e.placeholder,value:e.input}),["DOUBLE"].includes(e.valueType)&&(0,c.jsxs)(r.A,{children:[(0,c.jsx)(o.A,{xs:4,className:"py-1",children:"DATE"===L.id?(0,c.jsx)("div",{className:"position-relative",style:{zoom:"0.7"},children:(0,c.jsx)(V.A,{className:"bg-white text-dark",value:L.input.start,format:"y-MM-dd",clearIcon:null,onChange:s=>{E((t=>(F(a,`${new(J())(s).format("YYYY-MM-DD").toString()},${new(J())(t.input.end).format("YYYY-MM-DD").toString()}`,e,y[i].length-1!==a),{...t,input:{...t.input,start:s}})))}})}):(0,c.jsx)(g.A.Control,{onChange:s=>{E((t=>(F(a,`${s.target.value},${t.input.end}`,e,y[i].length-1!==a),{...t,input:{...t.input,start:s.target.value}})))},type:"number",size:"sm",placeholder:e.placeholder,value:L.input.start})}),(0,c.jsx)(o.A,{xs:4,className:"py-1",children:"DATE"===L.id?(0,c.jsx)("div",{className:"position-relative",style:{zoom:"0.7"},children:(0,c.jsx)(V.A,{className:"bg-white text-dark",value:L.input.end,format:"y-MM-dd",clearIcon:null,onChange:s=>{E((t=>(F(a,`${new(J())(t.input.start).format("YYYY-MM-DD").toString()},${new(J())(s).format("YYYY-MM-DD").toString()}`,e,y[i].length-1!==a),{...t,input:{...t.input,end:s}})))}})}):(0,c.jsx)(g.A.Control,{onChange:s=>{E((t=>(F(a,`${t.input.start},${s.target.value}`,e,y[i].length-1!==a),{...t,input:{...t.input,end:s.target.value}})))},type:"number",size:"sm",placeholder:e.placeholder,value:L.input.end})}),(0,c.jsx)(o.A,{xs:4,children:(0,c.jsxs)(_.A,{title:L.label,className:"d-grid",size:"sm",children:[(0,c.jsx)(_.A.Toggle,{className:"btn btn-sm btn-bni",children:L.label}),(0,c.jsx)(_.A.Menu,{children:T.map(((e,a)=>(0,c.jsx)(_.A.Item,{onClick:()=>{E(e)},children:(0,c.jsx)("div",{title:e.label,children:e.label})},a)))})]})})]}),y[i].length>1&&y[i].length-1!==a&&(0,c.jsx)(H,{variant:`btn btn-sm btn-${S} mt-1 border-1 ${"dark"===S?"border-secondary":"border"}`,title:e.suffix,className:"",children:m&&m.map(((e,s)=>(0,c.jsx)(_.A.Item,{href:"#",onClick:()=>{return s=e,t=a,void N((e=>({...e,[i]:y[i].map(((e,a)=>(a===t&&(e.suffix=s,e.row=`${e.data} ${e.value} ${s}`),e)))})));var s,t},className:"p-1",children:e},s)))})]})]})},a)))});return(0,c.jsx)("div",{className:"m-1",children:(0,c.jsxs)("div",{className:"rounded border border-1 "+("dark"===S?"border-secondary":""),onDrop:e=>(e=>{const{source:a,data:s}=JSON.parse(e.dataTransfer.getData("text"));if(null!==a&&void 0!==a&&a.includes(i)&&"array"===n&&N((e=>({...e,[i]:[...new Set([...y[i],{row:[],data:s,input:[`${w}.${k[0]}`,"=",0,s],query:s,hasQuotes:[]}])]}))),a.includes(i)&&"string"===n&&N((e=>({...e,[i]:s}))),a.includes(i)&&"arrayOfObjects"===n&&(y[i].filter((e=>e.data===s)).length||N((e=>{var a,t;return{...e,[i]:[...y[i],{data:s,row:`${s}${u&&null!==(a=u[0])&&void 0!==a&&a.value?` ${null===(t=u[0])||void 0===t?void 0:t.value}`:""}`,...u&&u.length?u[0]:[]}]}}))),a.includes(i)&&"relation"===n){var t,l,r,o,d;const e=e=>M.filter((e=>"MP"===e.id))[0].tables.filter((a=>a.label===e))[0],a=`${null===(t=e(y.from))||void 0===t?void 0:t.label}.${null===(l=e(y.from))||void 0===l?void 0:l.fields[0]}`,n=`${s}.${null===(r=e(s))||void 0===r?void 0:r.fields[0]}`,c=u&&null!==(o=u[0])&&void 0!==o&&o.label?`${null===(d=u[0])||void 0===d?void 0:d.label}`:"";y.from&&!y[i].filter((e=>e.array.includes(a))).length&&N((t=>({...t,[i]:[...y[i],{sourceTable:e(y.from),targetTable:e(s),row:`${c} JOIN ${s} ON ${a} = ${n}`,selectedSource:a,selectedTarget:n,...u&&u.length?u[0]:[],array:[s,`${a} = ${n}`,c]}]})))}})(e),children:[(0,c.jsx)("div",{className:"small p-1",style:{...((null===A||void 0===A||null===(a=A.source)||void 0===a?void 0:a.includes(i))||(null===C||void 0===C||null===(s=C.source)||void 0===s?void 0:s.includes(i)))&&{background:"var(--app-theme-bg-color)",borderRadius:"0.375rem"}},children:(0,c.jsx)("kbd",{className:"bg-secondary",children:i.toUpperCase()})}),"array"===n&&Array.isArray(y[i])&&y[i].length>0?(0,c.jsx)("ul",{className:"list-group p-1",children:y[i].map(((e,a)=>{var s,t,i;return(0,c.jsxs)("li",{className:"list-group-item "+("dark"===S?"bg-dark text-white border-secondary":"bg-white text-dark"),children:[(0,c.jsxs)("div",{className:"p-1 d-flex align-items-center justify-content-between",style:{columnGap:"10px"},children:[(null===u||void 0===u?void 0:u.length)>0&&(0,c.jsx)(x.A,{trigger:"click",placement:"right",overlay:I(a),rootClose:!0,children:(0,c.jsx)("i",{className:"fa fa-bars cursor-pointer"})}),(0,c.jsx)("span",{className:"text-break small",children:e.query}),(0,c.jsxs)("div",{className:"d-flex align-items-center",style:{columnGap:"5px"},children:[b&&(0,c.jsx)(x.A,{trigger:"click",placement:"top",overlay:(t=a,i=e.query,(0,c.jsxs)(p.A,{style:{zIndex:1e4},children:[(0,c.jsx)(p.A.Header,{as:"div",className:"bni-bg bni-text py-1 px-2",children:(0,c.jsx)("small",{className:"small",children:(0,c.jsx)(f.A,{id:"alias",defaultMessage:"alias"})})}),(0,c.jsx)(p.A.Body,{className:"p-0",children:(0,c.jsx)(g.A.Control,{type:"text",size:"sm",placeholder:"Alias name",maxLength:15,defaultValue:i.split(" ")[i.split(" ").length-1],onChange:e=>O(t,e.target.value),onKeyDown:e=>[" "].includes(e.key)&&e.preventDefault()})})]})),rootClose:!0,children:(0,c.jsx)("i",{className:"fa fa-font cursor-pointer text-warning",title:"Alias"})}),(0,c.jsx)("i",{onClick:()=>R(a),className:"fa fa-times-circle cursor-pointer text-danger"})]})]}),(null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.length)>0&&(0,c.jsxs)(Q.A,{size:"sm",className:"pb-2",children:[(0,c.jsx)("select",{className:"form-control form-control-sm",onChange:e=>P(a,0,e.target.value),defaultValue:null===e||void 0===e?void 0:e.input[0],children:M[0].tables.map(((e,a)=>null===e||void 0===e?void 0:e.fields.map(((s,t)=>(0,c.jsx)("option",{children:`${e.label}.${s}`},`${a}-${t}`)))))}),(0,c.jsx)("select",{className:"form-control form-control-sm",onChange:e=>P(a,1,e.target.value),defaultValue:null===e||void 0===e?void 0:e.input[1],children:["=","!=",">","<",">=","<="].map(((e,a)=>(0,c.jsx)("option",{value:e,children:e},a)))}),(0,c.jsx)(Y.A,{placeholder:l.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),defaultValue:null===e||void 0===e?void 0:e.input[2],maxLength:20,onChange:e=>P(a,2,e.target.value)})]})]},a)}))}):"string"===n&&"string"===typeof y[i]&&""!==y[i]?(0,c.jsx)("ul",{className:"list-group p-1",children:(0,c.jsxs)("li",{className:"p-1 d-flex align-items-center justify-content-between list-group-item "+("dark"===S?"bg-dark text-white border-secondary":"bg-white text-dark"),children:[(0,c.jsx)("span",{className:"small",children:y[i]}),(0,c.jsx)("i",{onClick:()=>R(),className:"fa fa-times-circle cursor-pointer text-danger"})]})}):"arrayOfObjects"===n&&y[i].length>0?U():"range"===n?(0,c.jsx)("ul",{className:"list-group p-1",children:(0,c.jsx)("li",{className:"list-group-item "+("dark"===S?"bg-dark text-white border-secondary":"bg-white text-dark"),children:(0,c.jsx)(r.A,{className:"align-items-center justify-content-between",children:u.map(((e,a)=>(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(o.A,{xs:3,children:e.label}),(0,c.jsxs)(o.A,{xs:9,className:"d-flex align-items-center justify-content-between",style:{columnGap:"5px"},children:[(0,c.jsx)("i",{className:"fa fa-minus cursor-pointer",onClick:()=>N((s=>({...s,[i]:y[i].map(((s,t)=>(a===t&&(s=s>e.min?s-1:s),s)))})))}),(0,c.jsx)(d.A,{className:"w-100",min:e.min,max:e.max,value:y[i][a],step:1,orientation:"horizontal",onChange:s=>N((t=>({...t,[i]:y[i].map(((t,l)=>(a===l&&(e.input=s,t=s),t)))}))),tooltip:!1}),(0,c.jsx)("i",{className:"fa fa-plus cursor-pointer",onClick:()=>N((s=>({...s,[i]:y[i].map(((s,t)=>(a===t&&(s=s<e.max?s+1:s),s)))})))})]})]},a)))})})}):"relation"===n?y[i].length>0&&(0,c.jsx)("ul",{className:"list-group p-1",children:y[i].map(((e,a)=>{var s,l,i,n;return(0,c.jsx)(t.Fragment,{children:(0,c.jsx)("li",{className:"p-1 small list-group-item "+("dark"===S?"bg-dark text-white border-secondary":"bg-white text-dark"),style:{columnGap:"10px"},children:(0,c.jsxs)("div",{className:"d-flex align-items-center justify-content-between",style:{columnGap:"5px"},children:[(null===u||void 0===u?void 0:u.length)>0&&(0,c.jsx)(x.A,{trigger:"click",placement:"right",overlay:I(a,e),rootClose:!0,children:(0,c.jsx)("i",{className:"fa fa-bars cursor-pointer"})}),(0,c.jsx)("select",{className:"form-control form-control-sm",title:e.selectedSource,value:e.selectedSource,onChange:e=>{B(e.target.value,a,"selectedSource")},children:(null===(s=e.sourceTable)||void 0===s||null===(l=s.fields)||void 0===l?void 0:l.length)&&e.sourceTable.fields.map(((a,s)=>(0,c.jsx)("option",{value:`${e.sourceTable.label}.${a}`,children:`${e.sourceTable.label}.${a}`},s)))}),(0,c.jsx)("div",{className:"fs-3 lh-1",children:"\u2248"}),(0,c.jsx)("select",{className:"form-control form-control-sm",title:e.selectedTarget,value:e.selectedTarget,onChange:e=>{B(e.target.value,a,"selectedTarget")},children:(null===(i=e.targetTable)||void 0===i||null===(n=i.fields)||void 0===n?void 0:n.length)>0&&e.targetTable.fields.map(((a,s)=>(0,c.jsx)("option",{value:`${e.targetTable.label}.${a}`,children:`${e.targetTable.label}.${a}`},s)))}),(0,c.jsx)("div",{className:"small",children:e.label}),(0,c.jsx)("i",{onClick:()=>R(a),className:"fa fa-times-circle cursor-pointer text-danger"})]})})},a)}))}):void 0]})})};var Z=s(4570),ee=s(9845),ae=s(6731);const se=(0,t.createContext)([{},()=>{}]),te=()=>{var e,a,s,l;const i=(0,$.A)(),n=(0,t.useContext)(L.R),d=(0,t.useContext)(h.A),u=(0,t.useContext)(ee.O),{theme:m,sheets:b,setSheets:v,activeSheet:j,activeChart:y,savedQueryList:N,setSavedQueryList:A,fetchSavedQueryList:C}=d,[w,k]=(0,t.useState)({});(0,t.useEffect)((()=>{var e,a;const s=null===(e=[...b].filter((e=>e.id===j))[0])||void 0===e||null===(a=e.charts.filter((e=>e.id===y))[0])||void 0===a?void 0:a.massageConfig;k(s)}),[b,j,y]);const I=null===(e=b.filter((e=>e.id===j))[0])||void 0===e||null===(a=e.charts.filter((e=>e.id===y))[0])||void 0===a?void 0:a.props.data,[O,D]=(0,t.useState)(!1),[R,B]=(0,t.useState)({}),[P,U]=(0,t.useState)("MP"),z=[{id:"MP",label:"SQL",tables:[{label:"banks",fields:["bank_id","bank_name","bank_account_number","bank_swift_code","bank_account_type","bank_country","bank_sort","bank_locale","bank_currency"]},{label:"income_expense_category",fields:["inc_exp_cat_id","inc_exp_cat_name","inc_exp_cat_is_metric","inc_exp_cat_is_plan_metric"]},{label:"income_expense",fields:["inc_exp_id","inc_exp_name","inc_exp_amount","inc_exp_plan_amount","inc_exp_type","inc_exp_date","inc_exp_added_at","inc_exp_category","inc_exp_bank","inc_exp_comments","inc_exp_is_planned","inc_exp_is_income_metric"]},{label:"credit_cards",fields:["credit_card_id","credit_card_name","credit_card_number","credit_card_start_date","credit_card_end_date","credit_card_payment_date","credit_card_annual_interest","credit_card_locale","credit_card_currency"]},{label:"credit_card_transactions",fields:["cc_id","cc_transaction","cc_date","cc_opening_balance","cc_payment_credits","cc_purchases","cc_taxes_interest","cc_for_card","cc_inc_exp_cat","cc_comments","cc_transaction_status","cc_added_at"]}],hasUpload:!1},{id:"CSV",label:"CSV",fileType:"text/csv,text/comma-separated-values,application/csv",hasUpload:!0},{id:"JSON",label:"JSON",fileType:"application/json",hasUpload:!0}],K={select:[],from:"",where:[],join:[],groupBy:[],orderBy:[],limit:[1e3,0]},[q,G]=(0,t.useState)(K),[H,Q]=(0,t.useState)({}),[Y,V]=(0,t.useState)({}),[W,J]=(0,t.useState)(I),[te,le]=(0,t.useState)({}),[ie,ne]=(0,t.useState)(!1),[re,oe]=(0,t.useState)("json"),[de,ce]=(0,t.useState)({id:null,name:"",appId:n.userConfig.appId}),[ue,me]=(0,t.useState)(!1),[pe,ge]=(0,t.useState)([]),[xe,he]=(0,t.useState)("");(0,t.useEffect)((()=>{const e={select:q.select.map((e=>{let{query:a}=e;return a})),from:q.from,where:q.where.map((e=>{let{row:a}=e;return a})),join:q.join.map((e=>{let{array:a}=e;return a})),groupBy:q.groupBy.map((e=>{let{data:a}=e;return a})),orderBy:q.orderBy.map((e=>{let{row:a}=e;return a})),limit:q.limit};B(e)}),[q]);const fe=e=>{const a=Object.keys(e[0]);return(0,c.jsxs)("table",{className:`table table-sm table-${"dark"===m?"dark":"white"} small`,children:[(0,c.jsx)("thead",{style:{position:"sticky",top:"-5px",zIndex:1},children:(0,c.jsx)("tr",{children:a.map(((e,a)=>(0,c.jsx)("th",{className:"icon-bni text-truncate",children:e},a)))})}),(0,c.jsx)("tbody",{className:"fw-light",children:e.map(((e,a)=>(0,c.jsx)("tr",{children:Object.entries(e).map(((e,a)=>(0,c.jsx)("td",{className:"text-truncate",children:e[1]},a)))},a)))})]})},be=(e,a)=>{const s=new FormData;s.append("id",e),s.append("type",a),s.append("appId",n.userConfig.appId),Z.A.post("workbook/fetchQueryObjectById",s).then((e=>{let{data:s}=e;"saved"===a?(G(JSON.parse(s.response.dsq_object)),ce((e=>({...e,id:s.response.dsq_id,name:s.response.dsq_name})))):(G(JSON.parse(s.response.dsIbq_object)),ce((e=>({...e,id:null,name:""}))))})).catch((()=>{}))};return(0,c.jsxs)(se.Provider,{value:{clause:q,setClause:G,optionsConfig:z,tableDragging:H,setTableDragging:Q,fieldDragging:Y,setFieldDragging:V,response:W,setResponse:J,errorResponse:te,setErrorResponse:le,activeDataSource:P,setActiveDataSource:U,selectedWBFields:pe,setSelectedWBFields:ge,table:xe,setTable:he},children:[(0,c.jsxs)(M.A,{show:O,onHide:()=>D(!1),centered:!0,size:"xl",backdrop:"static",style:{zIndex:1e4},fullscreen:!0,enforceFocus:!1,children:[(0,c.jsx)(M.A.Header,{closeButton:!0,className:"py-2",children:(0,c.jsxs)(M.A.Title,{as:"small",children:[(0,c.jsx)("i",{className:"fa fa-database pe-2"}),(0,c.jsx)(f.A,{id:"dataSource",defaultMessage:"dataSource"})]})}),(0,c.jsx)(M.A.Body,{className:"p-2 "+("dark"===m?"bg-dark text-white":"bg-white text-dark"),children:(0,c.jsxs)(E.VerticalPanes,{theme:m,style:{height:"calc(100vh - 105px)"},className:`border border-1 ${"dark"===m?"border-secondary":""} rounded`,children:[(0,c.jsx)(E.Pane,{width:"20%",className:`border border-1 ${"dark"===m?"border-secondary":""} border-start-0 border-top-0 border-bottom-0`,children:(0,c.jsx)(F,{config:z})}),"MP"===P&&(0,c.jsxs)(E.Pane,{width:"20%",className:("dark"===m?"border-secondary":"")+" border-top-0 border-bottom-0",children:[(0,c.jsx)("div",{className:"border-0 rounded-0 w-100 border-0 bni-bg py-1 text-center text-dark small",children:(0,c.jsx)(f.A,{id:"fields",defaultMessage:"fields"})}),(0,c.jsx)("div",{className:"",children:null!==pe&&void 0!==pe&&pe.length?pe.map(((e,a)=>(0,c.jsx)("div",{draggable:!0,className:"cursor-pointer p-1 small border-bottom "+("dark"===m?"border-secondary":""),onDrag:()=>V({source:["select","where","groupBy","orderBy"]}),onDragEnd:()=>V({}),onDragStart:a=>{a.dataTransfer.setData("text",JSON.stringify({source:["select","where","groupBy","orderBy"],data:`${xe}.${e}`}))},children:e},a))):null})]}),"MP"===P&&(0,c.jsxs)(E.Pane,{width:"30%",className:`border border-1 ${"dark"===m?"border-secondary":""} border-top-0 border-bottom-0`,children:[(0,c.jsx)("div",{className:"border-0 rounded-0 w-100 bni-bg py-1 text-center text-dark small",children:(0,c.jsx)(f.A,{id:"clausesAndModifiers",defaultMessage:"clausesAndModifiers"})}),(0,c.jsxs)("div",{className:"",style:{height:"calc(100% - 32px)",overflowY:"auto",overflowX:"hidden"},children:[(0,c.jsx)(X,{targetKey:"select",type:"array",contextMenu:[{label:"NULL",mode:"function"},{label:"SUM",mode:"function"},{label:"SUMIF",mode:"propertyBindingFunction",pieces:["SUM(IF({0}","{1}","{2},","{3},0))"],hasQuotes:[!1,!1,!0,!1]},{label:"COUNT",mode:"function"},{label:"COUNTIF",mode:"propertyBindingFunction",pieces:["COUNT(IF({0}","{1}","{2},","{3},0))"],hasQuotes:[!1,!1,!0,!1]},{label:"MIN",mode:"function"},{label:"MINIF",mode:"propertyBindingFunction",pieces:["MIN(IF({0}","{1}","{2},","{3},0))"],hasQuotes:[!1,!1,!0,!1]},{label:"MAX",mode:"function"},{label:"MAXIF",mode:"propertyBindingFunction",pieces:["MAX(IF({0}","{1}","{2},","{3},0))"],hasQuotes:[!1,!1,!0,!1]},{label:"AVG",mode:"function"},{label:"AVGIF",mode:"propertyBindingFunction",pieces:["AVG(IF({0}","{1}","{2},","{3},0))"],hasQuotes:[!1,!1,!0,!1]},{label:"DISTINCT",mode:"function"}],showAlias:!0}),(0,c.jsx)(X,{targetKey:"from",type:"string"}),(0,c.jsx)(X,{targetKey:"where",type:"arrayOfObjects",suffixList:["AND","OR"],contextMenu:[{label:"EQUALTO",mode:"operator",value:"= '{a}'",valueType:"SINGLE",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"NOTEQUALTO",mode:"operator",value:"!= '{a}'",valueType:"SINGLE",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"LESSTHAN",mode:"operator",value:"< '{a}'",valueType:"SINGLE",placeholder:i.formatMessage({id:"number",defaultMessage:"number"}),suffix:"AND",input:""},{label:"GREATERTHAN",mode:"operator",value:"> '{a}'",valueType:"SINGLE",placeholder:i.formatMessage({id:"number",defaultMessage:"number"}),suffix:"AND",input:""},{label:"LESSTHANEQUALTO",mode:"operator",value:"<= '{a}'",valueType:"SINGLE",placeholder:i.formatMessage({id:"number",defaultMessage:"number"}),suffix:"AND",input:""},{label:"GREATERTHANEQUALTO",mode:"operator",value:">= '{a}'",valueType:"SINGLE",placeholder:i.formatMessage({id:"number",defaultMessage:"number"}),suffix:"AND",input:""},{label:"CONTAINS",mode:"operator",value:"LIKE '%{a}%'",valueType:"SINGLE",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"STARTSWITH",mode:"operator",value:"LIKE '{a}%'",valueType:"SINGLE",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"ENDSWITH",mode:"operator",value:"LIKE '%{a}'",valueType:"SINGLE",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"DOESNOTCONTAIN",mode:"operator",value:"NOT LIKE '%{a}%'",valueType:"SINGLE",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"DOESNOTBEGINWITH",mode:"operator",value:"NOT LIKE '{a}%'",valueType:"SINGLE",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"DOESNOTENDWITH",mode:"operator",value:"NOT LIKE '%{a}'",valueType:"SINGLE",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"ISNULL",mode:"operator",value:"IS NULL",valueType:"NULL",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"ISNOTNULL",mode:"operator",value:"IS NOT NULL",valueType:"NULL",placeholder:i.formatMessage({id:"stringNumber",defaultMessage:"stringNumber"}),suffix:"AND",input:""},{label:"IN",mode:"operator",value:"IN {n}",valueType:"MULTIPLE",placeholder:i.formatMessage({id:"commaSeparatedValues",defaultMessage:"commaSeparatedValues"}),suffix:"AND",input:""},{label:"NOTIN",mode:"operator",value:"NOT IN {n}",valueType:"MULTIPLE",placeholder:i.formatMessage({id:"commaSeparatedValues",defaultMessage:"commaSeparatedValues"}),suffix:"AND",input:""},{label:"BETWEEN",mode:"operator",value:"BETWEEN '{a}' AND '{b}'",valueType:"DOUBLE",placeholder:i.formatMessage({id:"commaSeparatedValues",defaultMessage:"commaSeparatedValues"}),suffix:"AND",input:""}]}),(0,c.jsx)(X,{targetKey:"join",type:"relation",contextMenu:[{label:"INNER",mode:"joinQuery"},{label:"OUTER",mode:"joinQuery"},{label:"LEFT",mode:"joinQuery"},{label:"RIGHT",mode:"joinQuery"},{label:"LEFT OUTER",mode:"joinQuery"},{label:"RIGHT OUTER",mode:"joinQuery"}]}),(0,c.jsx)(X,{targetKey:"groupBy",type:"array"}),(0,c.jsx)(X,{targetKey:"orderBy",type:"arrayOfObjects",contextMenu:[{label:"DESC",mode:"operator",value:"DESC",valueType:"NULL"},{label:"ASC",mode:"operator",value:"ASC",valueType:"NULL"}]}),(0,c.jsx)(X,{targetKey:"limit",type:"range",contextMenu:[{label:"Count",input:1e3,min:0,max:1e3},{label:"Offset",input:0,min:0,max:1e3}]})]})]}),(0,c.jsxs)(E.Pane,{width:"MP"===P?"50%":"80%",className:""+("dark"===m?"border-secondary":""),children:["MP"===P&&(0,c.jsxs)("div",{className:"h-50",children:[(0,c.jsx)("div",{style:{borderRadius:"0px 5px 0px 0px",columnGap:"5px"},className:"w-50 d-flex align-items-center justify-content-between border-0 w-100 border-0 bni-bg py-1 ps-2 pe-1 text-dark small",children:(0,c.jsxs)("div",{className:"input-group input-group-sm",children:[(0,c.jsx)("label",{htmlFor:"fileName",className:"input-group-text btn btn-sm btn-secondary py-0",children:(0,c.jsx)(f.A,{id:"query",defaultMessage:"query"})}),(0,c.jsx)("input",{type:"text",id:"fileName",className:"form-control py-0",placeholder:i.formatMessage({id:"name",defaultMessage:"name"}),onChange:e=>ce((a=>({...a,name:e.target.value}))),value:de.name,maxLength:25}),(0,c.jsx)("button",{className:"btn btn-sm btn-secondary py-0",disabled:!q.from||ue||!de.name,onClick:()=>(()=>{me(!0);const e=new FormData,a={...de,query:q},s=new Blob([JSON.stringify(a,null,2)],{type:"application/json"});e.append("fileData",s),Z.A.post("workbook/saveDatasource",e).then((e=>{let{data:a}=e;null!==a.response&&a.response&&(ce((e=>({...e,id:a.response}))),C(),n.renderToast({position:"bottom-center",message:i.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})})),null===a.response&&(D(!1),u.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:(0,c.jsx)(ae.x,{}),content:(0,c.jsx)(ae.E,{})})),null===a.response||a.response||n.renderToast({position:"bottom-center",type:"error",icon:"fa fa-times-circle",message:i.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})})})).catch((e=>{console.log("bbb",e),n.renderToast({type:"error",icon:"fa fa-times-circle",position:"bottom-center",message:i.formatMessage({id:"somethingWentWrong",defaultMessage:"somethingWentWrong"})})})).finally((()=>me(!1)))})(),children:ue?(0,c.jsx)("i",{className:"fa fa-circle-o-notch fa-spin"}):(0,c.jsx)("i",{className:"fa fa-save"})}),(0,c.jsx)(x.A,{trigger:"click",placement:"bottom",overlay:(0,c.jsxs)(p.A,{style:{zIndex:1e4},children:[(0,c.jsx)(p.A.Header,{as:"div",className:"bni-bg bni-text py-1 px-2",children:(0,c.jsx)("small",{children:(0,c.jsx)(f.A,{id:"confirmDelete",defaultMessage:"confirmDelete"})})}),(0,c.jsxs)(p.A.Body,{style:{columnGap:"5px"},className:"p-1 d-flex align-items-center justify-content-between",children:[(0,c.jsx)("button",{onClick:()=>(()=>{const e=new FormData;e.append("id",de.id),e.append("appId",n.userConfig.appId),Z.A.post("workbook/deleteSavedQuery",e).then((e=>{let{data:a}=e;a.response?(A((e=>({...e,saved:N.saved.filter((e=>String(e.dsq_id)!==String(de.id)))}))),ce((e=>({...e,id:null,name:""}))),n.renderToast({position:"bottom-center",message:i.formatMessage({id:"querySuccessfullyDeleted",defaultMessage:"querySuccessfullyDeleted"})})):n.renderToast({position:"bottom-center",type:"error",icon:"fa fa-times-circle",message:i.formatMessage({id:"queryDeleteFailed",defaultMessage:"queryDeleteFailed"})})})).catch((()=>{n.renderToast({type:"error",icon:"fa fa-times-circle",message:i.formatMessage({id:"somethingWentWrong",defaultMessage:"somethingWentWrong"})})})).finally((()=>document.body.click()))})(),className:"btn btn-sm btn-danger w-100 py-0",children:(0,c.jsx)(f.A,{id:"yes",defaultMessage:"yes"})}),(0,c.jsx)("button",{onClick:()=>document.body.click(),className:"btn btn-sm btn-secondary w-100 py-0",children:(0,c.jsx)(f.A,{id:"no",defaultMessage:"no"})})]})]}),rootClose:!0,children:(0,c.jsx)("button",{className:"btn btn-sm btn-danger py-0 rounded-end-1",disabled:!de.id,children:(0,c.jsx)("i",{className:"fa fa-trash"})})}),(0,c.jsxs)(S,{size:"sm",className:"ms-1",children:[(0,c.jsxs)(T.A,{variant:"secondary",className:"py-0",onClick:()=>(G(K),J([]),le({}),void ce((e=>({...e,id:null,name:""})))),children:[(0,c.jsx)("i",{className:"fa fa-refresh pe-2"}),(0,c.jsx)(f.A,{id:"reset",defaultMessage:"reset"})]}),(0,c.jsx)(T.A,{variant:"secondary",className:"py-0",onClick:()=>(()=>{J([]),le({}),ne(!0);const e=new FormData;var a;e.append("appIdWhere",`${R.from}.${a=R.from,{banks:"bank_appId",credit_cards:"credit_card_appId",credit_card_transactions:"cc_appId",income_expense:"inc_exp_appId",income_expense_category:"inc_exp_cat_appId"}[a]} = '${n.userConfig.appId}'`),e.append("query",JSON.stringify(R)),Z.A.post("workbook/fetchDynamicQuery",e).then((e=>{let{data:a}=e;a.status?J(a.response):le(a.response)})).catch((()=>{J([]),le({errorMessage:"Unknown error"})})).finally((()=>ne(!1)))})(),disabled:!(q.from.length&&q.select.length)||ie,children:(0,c.jsxs)("div",{className:"d-flex align-items-center justify-content-center ",style:{columnGap:"3px"},children:[(0,c.jsx)("span",{children:(0,c.jsx)(f.A,{id:"run",defaultMessage:"run"})}),ie?(0,c.jsx)("i",{className:"fa fa-circle-o-notch fa-spin"}):(0,c.jsx)("i",{className:"fa fa-share fa-rotate-180"})]})}),(0,c.jsxs)(_.A,{className:"btn-group",children:[(0,c.jsxs)(_.A.Toggle,{variant:"secondary",className:"btn-sm py-0",children:[(0,c.jsx)("i",{className:"fa fa-quote-left pe-2"}),(0,c.jsx)(f.A,{id:"load",defaultMessage:"load"})]}),(0,c.jsxs)(_.A.Menu,{className:"overflow-auto",style:{maxHeight:"300px"},children:[(null===N||void 0===N||null===(s=N.saved)||void 0===s?void 0:s.length)>0&&[N.saved.map(((e,a)=>(0,c.jsxs)(_.A.Item,{as:"div",className:"d-flex align-items-center px-1 py-0 small cursor-pointer",onClick:()=>be(e.dsq_id,"saved"),children:[(0,c.jsx)("i",{className:"fa fa-quote-left text-success pe-2"}),(0,c.jsx)("div",{className:"small",children:e.dsq_name})]},a))),(0,c.jsx)(_.A.Divider,{},0)],(0,c.jsx)(_.A.Item,{className:"px-1 py-0 small cursor-pointer",as:"div",children:(0,c.jsx)("div",{className:"fw-bold",children:(0,c.jsx)(f.A,{id:"inbuiltQueries",defaultMessage:"inbuiltQueries"})})}),(null===N||void 0===N||null===(l=N.inbuilt)||void 0===l?void 0:l.length)>0&&N.inbuilt.map(((e,a)=>(0,c.jsxs)(_.A.Item,{as:"div",className:"d-flex align-items-center px-1 py-0 small cursor-pointer",onClick:()=>be(e.dsIbq_id,"inbuilt"),children:[(0,c.jsx)("i",{className:"fa fa-quote-left text-danger pe-2"}),(0,c.jsx)("small",{children:e.dsIbq_name})]},a)))]})]})]})]})}),(0,c.jsx)("div",{className:"overflow-auto p-1",style:{height:"calc(100% - 32px)"},children:(0,c.jsx)("pre",{children:JSON.stringify(R,null,2)})})]}),(0,c.jsxs)("div",{className:"MP"===P?"h-50":"h-100",children:[(0,c.jsxs)("div",{style:"MP"===P?{}:{borderTopRightRadius:"5px"},className:"d-flex align-items-center justify-content-between border-0 w-100 border-0 bni-bg py-1 px-2 text-center text-dark small",children:[(0,c.jsx)("div",{children:(0,c.jsx)(f.A,{id:"data",defaultMessage:"data"})}),(0,c.jsxs)("div",{className:"btn-group btn-group-sm",children:[(0,c.jsx)("button",{type:"button",onClick:()=>oe("json"),className:"btn btn-secondary py-0 "+("json"===re?"active":""),dangerouslySetInnerHTML:{__html:"&lcub;&nbsp;JSON&nbsp;&rcub;"}}),(0,c.jsxs)("button",{type:"button",onClick:()=>oe("table"),className:"btn btn-secondary py-0 "+("table"===re?"active":""),children:[(0,c.jsx)("i",{className:"fa fa-table pe-2"}),(0,c.jsx)(f.A,{id:"grid",defaultMessage:"grid"})]})]}),(0,c.jsx)("div",{children:ie?(0,c.jsx)("i",{className:"fa fa-circle-o-notch fa-spin"}):(0,c.jsxs)("span",{children:[(0,c.jsx)("span",{className:"px-1",children:null!==W&&void 0!==W&&W.length?null===W||void 0===W?void 0:W.length:0}),(0,c.jsx)(f.A,{id:"recordsFound",defaultMessage:"recordsFound"})]})})]}),(0,c.jsxs)("div",{className:"overflow-auto p-1",style:{height:"calc(100% - 32px)"},children:[((null===W||void 0===W?void 0:W.length)>0||null===W)&&("json"===re?(0,c.jsx)("pre",{className:"small",children:JSON.stringify(W,null,2)}):fe(W)),Object.keys(te).length>0&&(0,c.jsx)("pre",{className:"text-danger",children:JSON.stringify(te,null,2)})]})]})]})]})}),(0,c.jsx)(M.A.Footer,{className:"border-1 rounded-bottom py-1 px-1 "+("dark"===m?"bg-dark text-white border-secondary":"bg-white text-dark"),children:(0,c.jsxs)("button",{className:"btn btn-bni btn-sm",disabled:!(null!==W&&void 0!==W&&W.length),onClick:()=>{const e=b.map((e=>(e.id===j&&(e.charts=e.charts.map((e=>(e.id===y&&(e.props.data=W),e)))),e)));v(e),D(!1)},children:[(0,c.jsx)("i",{className:"fa fa-arrow-circle-down pe-2"}),(0,c.jsx)(f.A,{id:"import",defaultMessage:"import"})]})})]}),(0,c.jsx)("div",{className:"",children:null!==W&&void 0!==W&&W.length?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{onClick:()=>D(!O),children:[(0,c.jsxs)("div",{className:"py-1 small text-end",children:[(0,c.jsx)("span",{className:"px-1",children:W.length}),(0,c.jsx)(f.A,{id:"recordsImported",defaultMessage:"recordsImported"})]}),(0,c.jsxs)("div",{style:{zoom:"0.5",overflow:"hidden"},className:"p-1 cursor-pointer bni-border bni-border-all bni-border-all-1 rounded-3 icon-bni",children:[fe(W.slice(0,5)),(0,c.jsx)("i",{className:"pe-3 pull-right fa fa-ellipsis-h icon-bni"})]})]}),(0,c.jsx)("div",{className:"small py-1",children:(0,c.jsx)(f.A,{id:"mapFieldsToChart",defaultMessage:"mapFieldsToChart"})}),(0,c.jsx)(r.A,{className:"small align-items-center",children:Object.keys(w).length>0&&(null===w||void 0===w?void 0:w.keys.map(((e,a)=>(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(o.A,{xs:4,children:e.source}),(0,c.jsx)(o.A,{xs:2,children:(0,c.jsx)("i",{className:"fa fa-angle-double-right icon-bni fa-2x"})}),(0,c.jsx)(o.A,{xs:6,children:(0,c.jsxs)(g.A.Select,{size:"sm",defaultValue:e.target,className:"mb-1 lh-1",onChange:a=>(async(e,a)=>{const s=b.map((s=>(s.id===j&&(s.charts=s.charts.map((s=>(s.id===y&&(s.massageConfig.keys=s.massageConfig.keys.map((s=>s.source===e?{...s,target:a}:s)),s.props.data=s.props.data.map((s=>(Object.prototype.hasOwnProperty.call(s,a)&&(s[e]=isNaN(Number(s[a]))?s[a]:Number(s[a])),s)))),s)))),s)));await v(s)})(e.source,a.target.value),children:[(0,c.jsx)("option",{children:"--"}),Object.keys(W[0]).map(((e,a)=>(0,c.jsx)("option",{className:"small",children:e},a)))]})})]},a))))})]}):(0,c.jsx)("div",{onClick:()=>D(!O),className:"p-5 cursor-pointer bni-border bni-border-all bni-border-all-1 rounded-3 icon-bni d-flex align-items-center justify-content-center",children:(0,c.jsx)(f.A,{id:"clickToLoadData",defaultMessage:"clickToLoadData"})})})]})};var le=s(5491),ie=s.n(le),ne=s(2016);const re=()=>{var e;const a=(0,$.A)(),s=(0,t.useContext)(h.A),{theme:r,sheets:o,setSheets:d,activeSheet:m,activeChart:p,setFile:g}=s,[x,M]=(0,t.useState)({}),A=[{id:"size",label:a.formatMessage({id:"size",defaultMessage:"size"}),elements:[{component:u,options:{id:"innerRadius",title:a.formatMessage({id:"innerRadius",defaultMessage:"innerRadius"}),min:0,max:100,step:1,init:5,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"outerRadius",title:a.formatMessage({id:"outerRadius",defaultMessage:"outerRadius"}),min:100,max:1e3,step:1,init:5,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"borderRadius",title:a.formatMessage({id:"borderRadius",defaultMessage:"borderRadius"}),min:1,max:50,step:1,init:5,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"markerSize",title:a.formatMessage({id:"markerSize",defaultMessage:"markerSize"}),min:1,max:10,step:1,init:5,units:"",onChange:e=>C(e)}},{component:u,options:{id:"barHeight",title:a.formatMessage({id:"barHeight",defaultMessage:"barHeight"}),min:1,max:50,step:1,init:5,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"marginTop",title:a.formatMessage({id:"marginTop",defaultMessage:"marginTop"}),min:0,max:500,step:1,init:5,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"marginBottom",title:a.formatMessage({id:"marginBottom",defaultMessage:"marginBottom"}),min:0,max:500,step:1,init:5,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"marginLeft",title:a.formatMessage({id:"marginLeft",defaultMessage:"marginLeft"}),min:0,max:500,step:1,init:5,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"marginRight",title:a.formatMessage({id:"marginRight",defaultMessage:"marginRight"}),min:0,max:500,step:1,init:5,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"padding",title:a.formatMessage({id:"padding",defaultMessage:"padding"}),min:0,max:1,step:.1,init:.1,units:"",onChange:e=>C(e)}},{component:u,options:{id:"opacity",title:a.formatMessage({id:"opacity",defaultMessage:"opacity"}),min:.1,max:1,step:.1,init:.1,units:"",onChange:e=>C(e)}},{component:u,options:{id:"fontSize",title:a.formatMessage({id:"fontSize",defaultMessage:"fontSize"}),min:10,max:100,step:1,init:14,units:"px",onChange:e=>C(e)}},{component:u,options:{id:"xTicks",title:a.formatMessage({id:"xTicks",defaultMessage:"xTicks"}),min:1,max:50,step:1,init:1,units:"",onChange:e=>C(e)}},{component:u,options:{id:"yTicks",title:a.formatMessage({id:"yTicks",defaultMessage:"yTicks"}),min:1,max:50,step:1,init:1,units:"",onChange:e=>C(e)}},{component:u,options:{id:"strokeWidth",title:a.formatMessage({id:"strokeWidth",defaultMessage:"strokeWidth"}),min:1,max:10,step:1,init:1,units:"",onChange:e=>C(e)}}]},{id:"colors",label:a.formatMessage({id:"colors",defaultMessage:"colors"}),elements:[{component:b,options:{id:"fillColor",title:a.formatMessage({id:"fillColor",defaultMessage:"fillColor"}),init:[],onChange:e=>C(e)}},{component:b,options:{id:"fontColor",title:a.formatMessage({id:"fontColor",defaultMessage:"fontColor"}),init:[],onChange:e=>C(e)}},{component:b,options:{id:"lineColor",title:a.formatMessage({id:"lineColor",defaultMessage:"lineColor"}),init:[],onChange:e=>C(e)}}]},{id:"labels",label:a.formatMessage({id:"label",defaultMessage:"label"}),elements:[{component:v,options:{id:"name",title:a.formatMessage({id:"name",defaultMessage:"name"}),init:"",maxLength:100,onChange:e=>C(e)}},{component:v,options:{id:"xAxisLabel",title:a.formatMessage({id:"xAxisLabel",defaultMessage:"xAxisLabel"}),init:"",maxLength:25,onChange:e=>C(e)}},{component:v,options:{id:"yAxisLabel",title:a.formatMessage({id:"yAxisLabel",defaultMessage:"yAxisLabel"}),init:"",maxLength:25,onChange:e=>C(e)}},{component:v,options:{id:"tooltipPrefix",title:a.formatMessage({id:"tooltipPrefix",defaultMessage:"tooltipPrefix"}),init:"",maxLength:25,onChange:e=>C(e)}},{component:v,options:{id:"tooltipSuffix",title:a.formatMessage({id:"tooltipSuffix",defaultMessage:"tooltipSuffix"}),init:"",maxLength:25,onChange:e=>C(e)}},{component:v,options:{id:"className",title:a.formatMessage({id:"className",defaultMessage:"className"}),init:"",maxLength:25,onChange:e=>C(e)}}]},{id:"orientation",label:a.formatMessage({id:"orientation",defaultMessage:"orientation"}),elements:[{component:j,options:{id:"xAxisTicksOrientation",title:a.formatMessage({id:"xAxisTicksOrientation",defaultMessage:"xAxisTicksOrientation"}),init:"horizontal",isInline:!0,list:[{id:"hor",value:"horizontal",label:"Horizontal"},{id:"ver",value:"vertical",label:"Vertical"}],onChange:e=>C(e)}},{component:j,options:{id:"sortClause",title:a.formatMessage({id:"sortClause",defaultMessage:"sortClause"}),init:"asc",isInline:!0,list:[{id:"asc",value:"asc",label:"Ascending"},{id:"desc",value:"desc",label:"Descending"}],onChange:e=>C(e)}}]},{id:"selection",label:a.formatMessage({id:"selection",defaultMessage:"selection"}),elements:[{component:N,options:{id:"animationClass",title:a.formatMessage({id:"animationClass",defaultMessage:"animationClass"}),init:null===(e=ne.zB[0])||void 0===e?void 0:e.id,list:ne.zB,onChange:e=>{C(e)}}},{component:N,options:{id:"fontFamily",title:a.formatMessage({id:"fontFamily",defaultMessage:"fontFamily"}),init:"Arial",list:[{id:"Arial",value:"Arial"},{id:"cursive",value:"Cursive"},{id:"times-new-roman",value:"Times-new-roman"},{id:"monospace",value:"Monospace"},{id:"sans-serif",value:"Sans-serif"},{id:"system-ui",value:"System-ui"}],onChange:e=>{C(e)}}},{component:N,options:{id:"emoji",title:a.formatMessage({id:"emoji",defaultMessage:"emoji"}),init:"\ud83d\ude00",list:[{id:"\ud83d\ude00",value:"Smile"},{id:"\ud83d\ude02",value:"Smile & tears of joy"},{id:"\ud83d\ude07",value:"Head around"},{id:"\ud83e\udd10",value:"Mouth zipped"},{id:"\ud83d\ude21",value:"Enraged face"},{id:"\ud83d\ude2d",value:"Crying face"},{id:"\ud83d\ude31",value:"Fear face"},{id:"\ud83d\udccc",value:"Push pin"},{id:"\u2764\ufe0f\u200d\ud83e\ude79",value:"Read heart"},{id:"\ud83d\udc4d",value:"Thumbs uip"},{id:"\ud83d\udc4e",value:"Thumbs down"},{id:"\ud83d\udc4f",value:"Clapping hands"},{id:"\ud83e\udd1d",value:"Handshake"},{id:"\ud83d\ude4f",value:"Folded hands"},{id:"\ud83d\ude45\u200d\u2642\ufe0f",value:"Gesture no"},{id:"\ud83d\ude46\u200d\u2642\ufe0f",value:"Gesture ok"},{id:"\ud83d\ude4b\u200d\u2642\ufe0f",value:"Raising hand"},{id:"\ud83e\udd26\u200d\u2642\ufe0f",value:"Face palm"},{id:"\ud83e\udd37\u200d\u2642\ufe0f",value:"shrugging"},{id:"\ud83d\udc63",value:"Foot prints"},{id:"\ud83d\ude82",value:"Train"},{id:"\ud83d\ude97",value:"Car"},{id:"\ud83d\udefa",value:"Auto rickshaw"},{id:"\ud83d\udee9",value:"Airplane"},{id:"\ud83d\ude81",value:"Helicopter"},{id:"\ud83c\udf2a",value:"Tornado"},{id:"\ud83d\udd25",value:"Fire"},{id:"\ud83d\udca7",value:"Droplet"},{id:"\ud83e\udde8",value:"Fire cracker"},{id:"\ud83d\udd14",value:"Bell"},{id:"\ud83d\udd15",value:"Bell with slash"},{id:"\ud83d\udcde",value:"Phone"},{id:"\ud83d\udda8",value:"Printer"},{id:"\ud83d\udcbb",value:"Computer"},{id:"\ud83d\udcb0",value:"Money bag"},{id:"\ud83d\udcb3",value:"Credit card"},{id:"\ud83d\udce7",value:"Email"}],onChange:e=>{C(e)}}}]},{id:"switch",label:a.formatMessage({id:"switch",defaultMessage:"switch"}),elements:[{component:y,options:{id:"showTooltip",title:a.formatMessage({id:"showTooltip",defaultMessage:"showTooltip"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"showXaxisLabel",title:a.formatMessage({id:"showXaxisLabel",defaultMessage:"showXaxisLabel"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"showYaxisLabel",title:a.formatMessage({id:"showYaxisLabel",defaultMessage:"showYaxisLabel"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"showXaxisLine",title:a.formatMessage({id:"showXaxisLine",defaultMessage:"showXaxisLine"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"showYaxisLine",title:a.formatMessage({id:"showYaxisLine",defaultMessage:"showYaxisLine"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"showXaxis",title:a.formatMessage({id:"showXaxis",defaultMessage:"showXaxis"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"showYaxis",title:a.formatMessage({id:"showYaxis",defaultMessage:"showYaxis"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"flipXaxis",title:a.formatMessage({id:"flipXaxis",defaultMessage:"flipXaxis"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"flipYaxis",title:a.formatMessage({id:"flipYaxis",defaultMessage:"flipYaxis"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"showAnimation",title:a.formatMessage({id:"showAnimation",defaultMessage:"showAnimation"}),init:!0,onChange:e=>C(e)}},{component:y,options:{id:"showLegend",title:a.formatMessage({id:"showLegend",defaultMessage:"showLegend"}),init:!0,onChange:e=>C(e)}}]},{id:"data",label:a.formatMessage({id:"dataSource",defaultMessage:"dataSource"}),elements:[{component:te,options:{id:"data",title:a.formatMessage({id:"dataSource",defaultMessage:"dataSource"}),init:{},onChange:e=>C(e)}}]}];(0,t.useEffect)((()=>{var e,a;const s=null===(e=o.filter((e=>e.id===m))[0])||void 0===e||null===(a=e.charts.filter((e=>e.id===p))[0])||void 0===a?void 0:a.props;M({}),setTimeout((()=>{M(s)}),100)}),[p]);const C=(0,t.useCallback)(ie()((e=>{w(e)}),300),[m,p]),w=e=>{const a=o.map((a=>(a.id===m&&(a.charts=a.charts.map((a=>(a.id===p&&(a.props={...a.props,[e.id]:e.value}),a)))),a)));d(a),g((e=>({...e,isSaved:!1})))};function k(e){let{children:a,eventKey:s}=e;const t=(0,l.M)(s,(()=>!1));return(0,c.jsx)("button",{type:"button",className:"text-start p-1 btn btn-sm "+("dark"===r?"btn-black text-light":"btn-white text-black"),onClick:t,children:a})}return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:`px-2 py-1 border-1 border-start border-${r} bni-bg text-black`,style:{borderTopRightRadius:"0.25rem"},children:(0,c.jsx)("small",{children:(0,c.jsx)(f.A,{id:"chartOptions",defaultMessage:"chartOptions"})})}),(0,c.jsx)("div",{className:"",style:{maxHeight:"calc(100vh - 185px)",overflowY:"auto",overflowX:"hidden"},children:(0,c.jsx)(i.A,{defaultActiveKey:null,className:"",children:(0,c.jsx)(n.A,{className:"border-0 rounded-0 "+("dark"===r?"bg-dark text-white":"bg-white text-dark"),children:x&&Object.keys(x).length>0&&A.map((e=>e.elements.filter((e=>Object.keys(x).includes(e.options.id))).length>0&&(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(n.A.Header,{className:"row m-0 p-0 rounded-0",children:(0,c.jsx)(k,{eventLabel:e.label,eventKey:e.id,children:e.label})}),(0,c.jsx)(i.A.Collapse,{eventKey:e.id,children:(0,c.jsx)(n.A.Body,{className:"p-2",children:e.elements.map((e=>{const a=e.component,s={...e.options,init:x[e.options.id]};return Object.prototype.hasOwnProperty.call(x,e.options.id)&&(0,c.jsx)(a,{...s},e.options.id)}))})})]},e.id)))})})})]})}},6231:(e,a,s)=>{s.r(a),s.d(a,{Pane:()=>l,VerticalPanes:()=>i});s(9950);var t=s(4414);const l=e=>{const{children:a,width:s,className:l}=e;return(0,t.jsx)("div",{className:`${l}`,style:{width:s},children:a})},i=e=>{const{children:a,theme:s,className:l,style:i}=e;return(0,t.jsx)("div",{style:i,className:`d-flex ${"dark"===s?"bg-dark":"bg-white"} ${l}`,children:a})}},1515:(e,a,s)=>{s.d(a,{A:()=>N});var t=s(8738),l=s.n(t),i=s(9950),n=s(4293),r=s(4089),o=s(2249),d=s(3820),c=s(4414);const u=i.forwardRef(((e,a)=>{let{as:s="div",bsPrefix:t,className:n,children:u,eventKey:m,...p}=e;const{activeEventKey:g}=(0,i.useContext)(d.A);return t=(0,r.oU)(t,"accordion-collapse"),(0,c.jsx)(o.A,{ref:a,in:(0,d.j)(g,m),...p,className:l()(n,t),children:(0,c.jsx)(s,{children:i.Children.only(u)})})}));u.displayName="AccordionCollapse";const m=u;var p=s(5365);const g=i.forwardRef(((e,a)=>{let{as:s="div",bsPrefix:t,className:n,onEnter:o,onEntering:d,onEntered:u,onExit:g,onExiting:x,onExited:h,...f}=e;t=(0,r.oU)(t,"accordion-body");const{eventKey:b}=(0,i.useContext)(p.A);return(0,c.jsx)(m,{eventKey:b,onEnter:o,onEntering:d,onEntered:u,onExit:g,onExiting:x,onExited:h,children:(0,c.jsx)(s,{ref:a,...f,className:l()(n,t)})})}));g.displayName="AccordionBody";const x=g;var h=s(8127);const f=i.forwardRef(((e,a)=>{let{as:s="h2",bsPrefix:t,className:i,children:n,onClick:o,...d}=e;return t=(0,r.oU)(t,"accordion-header"),(0,c.jsx)(s,{ref:a,...d,className:l()(i,t),children:(0,c.jsx)(h.A,{onClick:o,children:n})})}));f.displayName="AccordionHeader";const b=f,v=i.forwardRef(((e,a)=>{let{as:s="div",bsPrefix:t,className:n,eventKey:o,...d}=e;t=(0,r.oU)(t,"accordion-item");const u=(0,i.useMemo)((()=>({eventKey:o})),[o]);return(0,c.jsx)(p.A.Provider,{value:u,children:(0,c.jsx)(s,{ref:a,...d,className:l()(n,t)})})}));v.displayName="AccordionItem";const j=v,y=i.forwardRef(((e,a)=>{const{as:s="div",activeKey:t,bsPrefix:o,className:u,onSelect:m,flush:p,alwaysOpen:g,...x}=(0,n.Zw)(e,{activeKey:"onSelect"}),h=(0,r.oU)(o,"accordion"),f=(0,i.useMemo)((()=>({activeEventKey:t,onSelect:m,alwaysOpen:g})),[t,m,g]);return(0,c.jsx)(d.A.Provider,{value:f,children:(0,c.jsx)(s,{ref:a,...x,className:l()(u,h,p&&`${h}-flush`)})})}));y.displayName="Accordion";const N=Object.assign(y,{Button:h.A,Collapse:m,Item:j,Header:b,Body:x})},8127:(e,a,s)=>{s.d(a,{A:()=>m,M:()=>c});var t=s(9950),l=s(8738),i=s.n(l),n=s(3820),r=s(5365),o=s(4089),d=s(4414);function c(e,a){const{activeEventKey:s,onSelect:l,alwaysOpen:i}=(0,t.useContext)(n.A);return t=>{let n=e===s?null:e;i&&(n=Array.isArray(s)?s.includes(e)?s.filter((a=>a!==e)):[...s,e]:[e]),null==l||l(n,t),null==a||a(t)}}const u=t.forwardRef(((e,a)=>{let{as:s="button",bsPrefix:l,className:u,onClick:m,...p}=e;l=(0,o.oU)(l,"accordion-button");const{eventKey:g}=(0,t.useContext)(r.A),x=c(g,m),{activeEventKey:h}=(0,t.useContext)(n.A);return"button"===s&&(p.type="button"),(0,d.jsx)(s,{ref:a,onClick:x,...p,"aria-expanded":Array.isArray(h)?h.includes(g):g===h,className:i()(u,l,!(0,n.j)(h,g)&&"collapsed")})}));u.displayName="AccordionButton";const m=u},3820:(e,a,s)=>{function t(e,a){return Array.isArray(e)?e.includes(a):e===a}s.d(a,{A:()=>i,j:()=>t});const l=s(9950).createContext({});l.displayName="AccordionContext";const i=l},5365:(e,a,s)=>{s.d(a,{A:()=>l});const t=s(9950).createContext({eventKey:""});t.displayName="AccordionItemContext";const l=t},3066:(e,a,s)=>{e.exports=s.p+"static/media/TableEERDiagram.2ff246abd892d379dfb9.png"}}]);