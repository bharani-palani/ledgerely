(this["webpackJsonpbni-apps"]=this["webpackJsonpbni-apps"]||[]).push([[64],{1104:function(e,a,t){"use strict";t.r(a);var n=t(25),s=t(29),r=t(35),o=t(27),c=t(1),i=t(96),l=t(1265),d=t(224),u=t(91),p=t(107),f=t(47),m=t(52),b=t.n(m),g=t(48),h=t(38),j=t(65),x=t(440),v=t(72),O=t(187),y=t(61),w=t(131),T=t(0),M=function(e){var a,t,m=e.intl,x=Object(c.useState)([]),M=Object(o.a)(x,2),S=M[0],_=M[1],C=Object(c.useState)(!1),k=Object(o.a)(C,2),P=k[0],R=k[1],E=Object(c.useContext)(h.a),N=Object(c.useContext)(j.a),D=Object(c.useContext)(v.a),A=Object(c.useState)({start:0,limit:10,searchString:""}),I=Object(o.a)(A,2),F=I[0],V=I[1],L={income_expense_template:[{template_id:"",temp_inc_exp_name:"",temp_amount:"0.00",temp_inc_exp_type:"Dr",temp_inc_exp_date:"1",temp_category:"",temp_bank:""}]},W=function(e,a){var t=new FormData;return t.append("TableRows",a),t.append("Table",e),t.append("limit",F.limit),t.append("start",F.start),t.append("searchString",F.searchString),t.append("WhereClause","temp_appId = '".concat(E.userConfig.appId,"'")),f.a.post("/account_planner/getAccountPlanner",t)},H=function(){var e=Object(r.a)(Object(s.a)().mark((function e(a){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_([]),R(!0),t=W(a.Table,a.TableRows),Promise.all([t]).then(function(){var e=Object(r.a)(Object(s.a)().mark((function e(t){var n,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(n=t[0].data.response)||void 0===n||null===(r=n.table)||void 0===r?void 0:r.length)>0?_(t[0].data.response):_({table:L[a.Table]});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).finally((function(){return R(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),J=function(){return Object(T.jsx)("div",{className:"relativeSpinner middle",children:Object(T.jsx)(b.a,{type:g.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})},K={incExpTemp:["id","name","amount","type","date","category","bank"]},B={incExpTemp:["checkbox","textbox","number",{radio:{radioList:[{label:m.formatMessage({id:"credit",defaultMessage:"credit"}),value:"Cr",checked:!1},{label:m.formatMessage({id:"debit",defaultMessage:"debit"}),value:"Dr",checked:!0}]}},{fetch:{dropDownList:new Array(28).fill("_").map((function(e,a){return{checked:"1"===String(a+1),id:String(a+1),value:String(a+1)}})),searchable:!0}},"textbox","textbox"]},U=p.b.filter((function(e){return"incExpTemp"===e.id})).map((function(e){var a={header:{searchPlaceholder:m.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),searchable:!0},footer:{total:{locale:D.localeLanguage,currency:D.localeCurrency,maxDecimal:2},pagination:{currentPage:"last",maxPagesToShow:5}}};return e.config=a,e.TableAliasRows=K[e.id].map((function(e){return m.formatMessage({id:e,defaultMessage:e})})),e.rowElements=B[e.id],e})),q={incExpTemp:"temp_appId"};return Object(c.useEffect)((function(){H(p.b.filter((function(e){return"incExpTemp"===e.id}))[0])}),[F]),Object(T.jsx)(l.a,{fluid:!0,children:Object(T.jsxs)("div",{className:"settings",children:[Object(T.jsx)(w.a,{icon:"fa fa-calendar",intlId:"schedules",children:(null===S||void 0===S||null===(a=S.table)||void 0===a?void 0:a.length)>0&&Object(T.jsx)(O.a,{datas:g.a.stripCommasInCSV(null===S||void 0===S?void 0:S.table),filename:"schedules.csv",className:"d-inline",children:Object(T.jsx)(d.a,{placement:"left",delay:{show:250,hide:400},overlay:(t=m.formatMessage({id:"download",defaultMessage:"download"}),Object(T.jsx)(i.a,{id:"button-tooltip-".concat(Math.random()),className:"in show",children:t})),triggerType:"hover",children:Object(T.jsx)("i",{className:"fa fa-download pe-3"})})})}),P&&Object(T.jsx)(J,{}),U.sort((function(e,a){return e.id-a.id})).map((function(e,a){var t;return Object(T.jsx)("div",{children:(null===S||void 0===S||null===(t=S.table)||void 0===t?void 0:t.length)>0&&Object(T.jsxs)("div",{className:"pt-2",children:[Object(T.jsx)("div",{className:"text-end"}),Object(T.jsx)(u.a,{className:"pt-2",config:e.config,Table:e.Table,TableRows:e.TableRows,TableAliasRows:e.TableAliasRows,rowElements:e.rowElements,defaultValues:e.defaultValues,dbData:S,postApiUrl:"/account_planner/postAccountPlanner",onPostApi:function(a){return function(e,a){var t=e.status,n=e.data;if(200===t){if(e&&n&&"boolean"===typeof n.response&&null!==n.response&&n.response&&E.renderToast({message:m.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),e&&n&&"boolean"===typeof n.response&&null!==n.response&&!1===n.response&&E.renderToast({type:"error",icon:"fa fa-times-circle",message:m.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),e&&n&&null===n.response&&N.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(T.jsx)(y.b,{}),content:Object(T.jsx)(y.a,{})}),e&&n&&"object"===typeof n.response&&null!==n.response){var s;s=1451===n.response.number?"foreignKeyDeleteMessage":"",E.renderToast({type:"error",icon:"fa fa-times-circle",message:m.formatMessage({id:s,defaultMessage:s})})}}else E.renderToast({type:"error",icon:"fa fa-times-circle",message:m.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}(a,e.id)},apiParams:F,onChangeParams:function(e){return function(e){V((function(a){return Object(n.a)(Object(n.a)({},a),e)}))}(e)},onReFetchData:function(){return H(e)},cellWidth:e.cellWidth,ajaxButtonName:m.formatMessage({id:"submit",defaultMessage:"submit"}),appIdKeyValue:{key:q[e.id],value:E.userConfig.appId},theme:E.userData.theme},a)]})},a)}))]})})};M.defaultProps={property:"String name"},a.default=Object(x.c)(M)}}]);