(this["webpackJsonpbni-apps"]=this["webpackJsonpbni-apps"]||[]).push([[67],{1252:function(e,s,t){"use strict";t.r(s);var a=t(25),n=t(30),c=t(36),i=t(1),r=t(1285),d=t(340),l=t(46),j=t(35),o=t(62),u=t(1263),p=t(0),f=function(){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"d-flex align-items-center",children:[Object(p.jsx)("i",{className:"fa fa-check fa-2x pt-2 text-success"}),Object(p.jsxs)("div",{className:"ps-2",children:[Object(p.jsx)("div",{className:"fs-3",children:Object(p.jsx)(u.a,{id:"success",defaultMessage:"success"})}),Object(p.jsx)("div",{className:"fs-6",children:Object(p.jsx)(u.a,{id:"paymentReceived",defaultMessage:"paymentReceived"})})]})]})})},b=function(){return Object(p.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:Object(p.jsx)("div",{children:Object(p.jsx)("span",{className:"fs-6",children:Object(p.jsx)(u.a,{id:"paymentSuccessMessage",defaultMessage:"paymentSuccessMessage"})})})})},x=function(){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"d-flex align-items-center",children:[Object(p.jsx)("i",{className:"fa fa-times-circle fa-2x pt-2 text-danger"}),Object(p.jsxs)("div",{className:"ps-2",children:[Object(p.jsx)("div",{className:"fs-3",children:Object(p.jsx)(u.a,{id:"failed",defaultMessage:"failed"})}),Object(p.jsx)("div",{className:"fs-6",children:Object(p.jsx)(u.a,{id:"paymentNotReceived",defaultMessage:"paymentNotReceived"})})]})]})})},m=function(){return Object(p.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:Object(p.jsx)("div",{children:Object(p.jsx)("span",{className:"fs-6",children:Object(p.jsx)(u.a,{id:"paymentFailMessage",defaultMessage:"paymentFailMessage"})})})})};s.default=function(e){var s=Object(i.useContext)(j.a),t=Object(i.useContext)(d.BillingContext),h=Object(i.useContext)(o.a),O=t.showSessionPopup,g=t.setShowSessionPopup,v=t.paymentResponse,N=t.summary,y=function(){var e=Object(c.a)(Object(n.a)().mark((function e(s){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("appId",s),e.next=4,l.a.post("/getUserConfig",t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(null!==v&&void 0!==v&&v.subscriptionId&&null!==v&&void 0!==v&&v.paymentId){var e=new FormData;e.append("paymentId",null===v||void 0===v?void 0:v.paymentId),e.append("subscriptionId",null===v||void 0===v?void 0:v.subscriptionId),e.append("appId",s.userConfig.appId),e.append("planId",N.razorPayPlanId),l.a.post("/payments/razorpay/onPostPayment",e).then((function(e){e.data.response.status?y(s.userConfig.appId).then((function(e){var t=e.data.response;s.setUserConfig((function(e){return Object(a.a)(Object(a.a)({},e),t[0])})),h.setConfig({show:!0,className:"alert-success border-0 text-dark",type:"success",dismissible:!0,heading:Object(p.jsx)(f,{}),content:Object(p.jsx)(b,{})})})).catch((function(e){return console.error("Unable to fetch user config")})):h.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!1,heading:Object(p.jsx)(x,{}),content:Object(p.jsx)(m,{})})})).catch((function(e){return console.log("bbb",e)})).finally((function(){return g(!1)}))}}),[v,N]),Object(p.jsxs)(r.a,{show:O,onHide:function(){return g(!1)},style:{zIndex:1e4},children:[Object(p.jsx)(r.a.Header,{closeButton:!0,children:Object(p.jsxs)(r.a.Title,{className:"d-flex align-items-center",children:[Object(p.jsx)("i",{className:"px-2 fa-1x fa fa-thumbs-up"}),Object(p.jsx)("span",{children:Object(p.jsx)(u.a,{id:"pleaseWait",defaultMessage:"pleaseWait"})})]})}),Object(p.jsx)(r.a.Body,{className:"rounded-bottom ".concat("dark"===s.userData.theme?"bg-dark text-white":"bg-white text-dark"),children:Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)("div",{children:Object(p.jsx)(u.a,{id:"doNotRefresh",defaultMessage:"doNotRefresh"})}),Object(p.jsx)("div",{className:"p-5",children:Object(p.jsx)("i",{className:"fa fa-circle-o-notch fa-spin fa-5x fa-fw"})})]})})]})}}}]);