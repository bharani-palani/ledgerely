"use strict";(self.webpackChunkledgerely_com=self.webpackChunkledgerely_com||[]).push([[5031],{1851:(e,s,a)=>{a.d(s,{JQ:()=>o,ah:()=>d,bJ:()=>t,mZ:()=>l});a(9950);var n=a(3027),i=a(4414);const l=()=>(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)("i",{className:"fa fa-check fa-2x pt-2 text-success"}),(0,i.jsxs)("div",{className:"ps-2",children:[(0,i.jsx)("div",{className:"fs-3",children:(0,i.jsx)(n.A,{id:"success",defaultMessage:"success"})}),(0,i.jsx)("div",{className:"fs-6",children:(0,i.jsx)(n.A,{id:"paymentReceived",defaultMessage:"paymentReceived"})})]})]})}),t=()=>(0,i.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:(0,i.jsx)("div",{children:(0,i.jsx)("span",{className:"fs-6",children:(0,i.jsx)(n.A,{id:"paymentSuccessMessage",defaultMessage:"paymentSuccessMessage"})})})}),d=()=>(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)("i",{className:"fa fa-times-circle fa-2x pt-2 text-danger"}),(0,i.jsxs)("div",{className:"ps-2",children:[(0,i.jsx)("div",{className:"fs-3",children:(0,i.jsx)(n.A,{id:"failed",defaultMessage:"failed"})}),(0,i.jsx)("div",{className:"fs-6",children:(0,i.jsx)(n.A,{id:"paymentNotReceived",defaultMessage:"paymentNotReceived"})})]})]})}),o=()=>(0,i.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:(0,i.jsx)("div",{children:(0,i.jsx)("span",{className:"fs-6",children:(0,i.jsx)(n.A,{id:"paymentFailMessage",defaultMessage:"paymentFailMessage"})})})})},5031:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var n=a(9950),i=a(8751),l=a(6781),t=a(8459),d=a(3302),o=a(7937),c=a(2436),r=a(1936),u=a(1308),m=a(9288),p=a(3027),f=a(5520),h=a.n(f),v=a(4570),y=a(1851),x=a(9845),g=a(4414);const j=()=>{const e=(0,m.A)(),s=(0,n.useContext)(x.O),a=(0,n.useContext)(u.F),f=(0,n.useContext)(c.R),j=(0,n.useContext)(r.BillingContext),[b,C]=(0,n.useState)(!1),{summary:N,setSummary:w,cycleList:k,table:M,selectedPlan:P,cycleRef:A,total:z,billingLoader:_,setShowSessionPopup:S,subscribeLoader:I,setSubscribeLoader:D}=j,[R]=h()(),O=(0,n.useCallback)((async()=>{D(!0),(()=>{const e=new FormData;return e.append("count","month"===N.cycle?1:12),e.append("planId",N.razorPayPlanId),e.append("custId",N.razorPayCustomerId),v.A.post("/payments/razorpay/createSubscription",e)})().then((a=>{var n,i,l,t,d,o,c,r,u,m,p,h;const x=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.response,j={key:"rzp_live_G2zMJ8eSYClYMm",key_secret:"wFRpPxOOz61yGXugpgrlG4bB",currency:null===f||void 0===f||null===(i=f.userConfig)||void 0===i?void 0:i.currency,amount:100*N.invoice[0].value,subscription_id:null===x||void 0===x?void 0:x.id,name:`${P.planCode} - ${e.formatMessage({id:P.planDescription,defaultMessage:P.planDescription})}`,plan_id:null===N||void 0===N?void 0:N.razorPayPlanId,handler:e=>{(e=>{const s=new FormData;return s.append("paymentId",e),v.A.post("/payments/razorpay/onPayment",s)})(e.razorpay_payment_id).then((e=>{const{status:a}=e.data.response;"authorized"===a||"captured"===a?S(!0):s.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!1,heading:(0,g.jsx)(y.ah,{}),content:(0,g.jsx)(y.JQ,{})})})).catch((e=>console.log(e)))},modal:{escape:!1,handleback:!1,confirm_close:!0,ondismiss:()=>!1,animation:!0},readonly:{contact:!0,email:!0,name:!0},hidden:{contact:!1,email:!1},prefill:{name:null===f||void 0===f||null===(l=f.userConfig)||void 0===l?void 0:l.name,email:null===f||void 0===f||null===(t=f.userConfig)||void 0===t?void 0:t.email,contact:null===f||void 0===f||null===(d=f.userConfig)||void 0===d?void 0:d.mobile,method:"card"},notes:{name:null===f||void 0===f||null===(o=f.userConfig)||void 0===o?void 0:o.name,mobile:null===f||void 0===f||null===(c=f.userConfig)||void 0===c?void 0:c.mobile,address1:null===f||void 0===f||null===(r=f.userConfig)||void 0===r?void 0:r.address1,address2:null===f||void 0===f||null===(u=f.userConfig)||void 0===u?void 0:u.address2,city:null===f||void 0===f||null===(m=f.userConfig)||void 0===m?void 0:m.city,country:null===f||void 0===f||null===(p=f.userConfig)||void 0===p?void 0:p.country,email:null===f||void 0===f||null===(h=f.userConfig)||void 0===h?void 0:h.email},theme:{color:document.documentElement.style.getPropertyValue("--app-theme-bg-color")}};new R(j).open()})).catch((e=>console.log(e))).finally((()=>D(!1)))}),[N,e]),F=[{id:0,href:a.cancellationRefundPolicyLink,label:e.formatMessage({id:"cancellationPolicy",defaultMessage:"cancellationPolicy"})},{id:1,href:a.termsOfServiceLink,label:e.formatMessage({id:"termsOfService",defaultMessage:"termsOfService"})},{id:2,href:a.privacyPolicyLink,label:e.formatMessage({id:"privacyPolicy",defaultMessage:"privacyPolicy"})}];return(0,g.jsxs)("div",{className:"my-3",children:[(0,g.jsx)("div",{className:"fs-3",children:(0,g.jsx)(p.A,{id:"summary",defaultMessage:"summary"})}),(0,g.jsxs)(l.A,{className:"p-2",children:[(0,g.jsx)(t.A,{md:6,className:"receipt rounded",style:{"--theme-color":"dark"===f.userData.theme?"#111":"#eee"},children:(0,g.jsx)("div",{className:"p-4",style:{background:"dark"===f.userData.theme?"#111":"#eee",color:"dark"===f.userData.theme?"#fff":"#000"},children:(0,g.jsxs)("div",{style:{height:"12rem"},className:"position-relative",children:[N.invoice.map((e=>(0,g.jsxs)(t.A,{xs:12,className:"d-flex justify-content-between align-items-center py-1",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{children:(0,g.jsx)(p.A,{id:e.id,defaultMessage:e.id})}),(0,g.jsx)("span",{className:"ps-2",children:e.title?`(${e.title})`:""})]}),(0,g.jsx)("div",{children:_?(0,g.jsx)("i",{className:"fa fa-circle-o-notch fa-spin"}):e.value})]},e.id))),(0,g.jsxs)("div",{style:{borderTop:"dotted 5px #aeaeae",position:"absolute",width:"100%",bottom:0},className:"d-flex justify-content-between align-items-center py-2",children:[(0,g.jsx)("div",{children:(0,g.jsx)(p.A,{id:"total",defaultMessage:"total"})}),(0,g.jsx)("div",{children:z.toFixed(2)})]})]})})}),(0,g.jsxs)(t.A,{md:6,className:"p-2",children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-1",children:[(0,g.jsx)("div",{children:(0,g.jsx)(p.A,{id:"paymentCycle",defaultMessage:"paymentCycle"})}),(0,g.jsx)("div",{children:(0,g.jsx)(d.A.Select,{value:N.cycle,disabled:!P.planCode,size:"sm",onChange:e=>{const s=M.filter((e=>e.planCode===P.planCode))[0][A[e.target.value].prop],a=M.filter((e=>e.planCode===P.planCode))[0][A[e.target.value].razorPayProp];w((n=>({...n,razorPayPlanId:a,cycle:e.target.value,invoice:n.invoice.map((e=>"price"===e.id?Object.assign(e,{value:s}):e))})))},children:k.map(((e,s)=>(0,g.jsx)("option",{value:e.value,children:e.label},s)))})})]}),F.map((e=>(0,g.jsx)("div",{className:"py-1",children:(0,g.jsx)("a",{target:"_blank",rel:"noreferrer",className:"link-primary",href:e.href,children:e.label})},e.id))),(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-1",children:[(0,g.jsx)("div",{children:(0,g.jsx)(p.A,{id:"iAgreeTerms",defaultMessage:"iAgreeTerms"})}),(0,g.jsx)("div",{children:(0,g.jsx)(i.A,{className:""+(P.planCode?"animate__animated animate__headShake infiniteAnimation":""),onColor:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),offColor:document.documentElement.style.getPropertyValue("--app-theme-color"),offHandleColor:"dark"===f.userData.theme?"#555":"#ddd",onHandleColor:"dark"===f.userData.theme?"#555":"#ddd",handleDiameter:15,checkedIcon:!1,uncheckedIcon:!1,height:10,width:30,onChange:e=>{C(e)},checked:b})})]}),(0,g.jsx)("div",{className:"p-1",children:(0,g.jsxs)(o.A,{disabled:!(b&&z>0&&!_),className:"btn btn-bni w-100 border-0 d-flex justify-content-between align-items-center",onClick:O,children:[(0,g.jsx)(p.A,{id:"subscribeNow",defaultMessage:"subscribeNow"}),(0,g.jsx)("div",{children:I?(0,g.jsx)("i",{className:"fa p-1 fa-1x fa-circle-o-notch fa-spin py-2"}):(0,g.jsx)(r.CurrencyPrice,{amount:z,suffix:A[N.cycle].suffix,symbol:P.planPriceCurrencySymbol})})]})})]})]})]})}},5520:function(e,s,a){var n=this&&this.__awaiter||function(e,s,a,n){return new(a||(a=Promise))((function(i,l){function t(e){try{o(n.next(e))}catch(s){l(s)}}function d(e){try{o(n.throw(e))}catch(s){l(s)}}function o(e){var s;e.done?i(e.value):(s=e.value,s instanceof a?s:new a((function(e){e(s)}))).then(t,d)}o((n=n.apply(e,s||[])).next())}))};Object.defineProperty(s,"__esModule",{value:!0});const i=a(9950);class l{constructor(e){this.options=e,"undefined"!==typeof window&&(this.rzrpayInstannce=new window.Razorpay(this.options))}on(e,s){this.rzrpayInstannce.on(e,s)}open(){this.rzrpayInstannce.open()}}s.default=()=>{const e=(0,i.useMemo)((()=>"undefined"!==typeof window),[]),[s,a]=(0,i.useState)(!1),t=(0,i.useCallback)((()=>!(!e||!("Razorpay"in window))),[]),d=(0,i.useCallback)((s=>{if(e)return new Promise(((e,n)=>{const i=document.createElement("script");i.src=s,i.onload=s=>{a(!0),e(s)},i.onerror=e=>n(e),document.body.appendChild(i)}))}),[]);return(0,i.useEffect)((()=>{t()||n(void 0,void 0,void 0,(function*(){try{yield d("https://checkout.razorpay.com/v1/checkout.js")}catch(e){throw new Error(e)}}))}),[]),[l,s]}}}]);