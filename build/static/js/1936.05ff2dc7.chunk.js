"use strict";(self.webpackChunkledgerely_com=self.webpackChunkledgerely_com||[]).push([[1936],{1936:(e,a,t)=>{t.r(a),t.d(a,{BillingContext:()=>v,CurrencyPrice:()=>j,default:()=>N});var s=t(9950),l=t(2436),n=t(9845),r=t(9288),i=t(3027),o=t(1432),c=t(5942),d=t(6781),u=t(8459),p=t(1308),m=t(4570),g=t(8311),f=(t(2083),t(4414));const b=(0,s.lazy)((()=>t.e(5031).then(t.bind(t,5031)))),y=(0,s.lazy)((()=>t.e(5160).then(t.bind(t,5160)))),h=(0,s.lazy)((()=>t.e(3209).then(t.bind(t,3209)))),x=(0,s.lazy)((()=>t.e(7575).then(t.bind(t,7575)).then((e=>({default:e.CouponHeading}))))),M=(0,s.lazy)((()=>t.e(7575).then(t.bind(t,7575)).then((e=>({default:e.CouponContent}))))),v=s.createContext(void 0),j=e=>{let{amount:a,suffix:t,symbol:s}=e;const l=(a.toFixed(2)+"").split(".");return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("sup",{className:"fs-6",children:s}),(0,f.jsx)("span",{className:"fs-5",children:Number(l[0]).toLocaleString("en-US")}),(0,f.jsxs)("sub",{children:[".",l[1],t]})]})},N=e=>{const a=(0,r.A)(),t=(0,s.useContext)(p.F);document.title=`${t.appName} - ${a.formatMessage({id:"billing",defaultMessage:"billing"})}`;const N=(0,s.useContext)(l.R),C=(0,s.useContext)(n.O),[k,P]=(0,s.useState)([]),[S,A]=(0,s.useState)(!0),[I,w]=(0,s.useState)(!1),[D,$]=(0,s.useState)(!1),[L,O]=(0,s.useState)({}),[z,F]=(0,s.useState)([]),[T]=(0,s.useState)({}),[Y,J]=(0,s.useState)(!1),E={month:{prop:"planPriceMonthly",razorPayProp:"pricingMonthId",suffix:`  / ${a.formatMessage({id:"month",defaultMessage:"month"})}`},year:{prop:"planPriceYearly",razorPayProp:"pricingYearId",suffix:` / ${a.formatMessage({id:"year",defaultMessage:"year"})}`}},B=["planBankAccountsLimit","planCreditCardAccounts","planCategoriesLimit","planUsersLimit","planTemplateLimit","planTrxLimit","planCreditCardTrxLimit","planDatasourceLimit","planWorkbookLimit","planStorageLimit","planIsTransactionSearch","planIsBulkImport","planIsEmailAlerts","planIsPredictions","visualizationLimit"],_=[{key:"planBankAccountsLimit",type:"numericNull",label:a.formatMessage({id:"bankAccounts",defaultMessage:"bankAccounts"})},{key:"planCreditCardAccounts",type:"numericNull",label:a.formatMessage({id:"creditCardAccounts",defaultMessage:"creditCardAccounts"})},{key:"planCategoriesLimit",type:"numericNull",label:a.formatMessage({id:"incExpCat",defaultMessage:"incExpCat"})},{key:"planUsersLimit",type:"numericNull",label:a.formatMessage({id:"users",defaultMessage:"users"})},{key:"planTemplateLimit",type:"numericNull",label:a.formatMessage({id:"schedules",defaultMessage:"schedules"})},{key:"planTrxLimit",type:"numericNull",label:a.formatMessage({id:"bankTransactions",defaultMessage:"bankTransactions"})},{key:"planCreditCardTrxLimit",type:"numericNull",label:a.formatMessage({id:"creditCardTransactions",defaultMessage:"creditCardTransactions"})},{key:"planDatasourceLimit",type:"bytesOrNull",label:a.formatMessage({id:"dataSource",defaultMessage:"dataSource"})},{key:"planWorkbookLimit",type:"bytesOrNull",label:a.formatMessage({id:"workbook",defaultMessage:"workbook"})},{key:"planStorageLimit",type:"bytesOrNull",label:a.formatMessage({id:"fileStorage",defaultMessage:"fileStorage"})},{key:"planIsBulkImport",type:"boolean",label:a.formatMessage({id:"bulkImport",defaultMessage:"bulkImport"})},{key:"planIsEmailAlerts",type:"boolean",label:a.formatMessage({id:"emailAlerts",defaultMessage:"emailAlerts"})},{key:"planIsPredictions",type:"boolean",label:a.formatMessage({id:"predictions",defaultMessage:"predictions"})},{key:"planIsTransactionSearch",type:"boolean",label:a.formatMessage({id:"globalSearch",defaultMessage:"globalSearch"})},{key:"visualizationLimit",type:"numericNull",label:a.formatMessage({id:"visualizations",defaultMessage:"visualizations"})}],U=[{value:"month",label:a.formatMessage({id:"monthly",defaultMessage:"monthly"})},{value:"year",label:a.formatMessage({id:"yearly",defaultMessage:"yearly"})}],[H,R]=(0,s.useState)({currency:N.userConfig.currency,cycle:"month",razorPayCustomerId:N.userConfig.razorPayCustomerId,razorPayPlanId:"",invoice:[{id:"price",label:a.formatMessage({id:"price",defaultMessage:"price"}),value:0},{id:"creditAdjustment",label:a.formatMessage({id:"creditAdjustment",defaultMessage:"creditAdjustment"}),value:0},{id:"discount",label:a.formatMessage({id:"discount",defaultMessage:"discount"}),title:"",value:0},{id:"tax",label:a.formatMessage({id:"tax",defaultMessage:"tax"}),title:"",value:0}],total:0}),Q=Number(H.invoice.reduce(((e,a)=>e+a.value),0).toFixed(2));(0,s.useEffect)((()=>{C.setConfig({show:!1});const e=(()=>{const e=new FormData;return e.append("appId",N.userConfig.appId),e.append("currency",N.userConfig.currency),e.append("env","production"),m.A.post("/payments/availableBillingPlans",e)})();return Promise.all([e]).then((e=>{P(e[0].data.response);const a=Object.keys(e[0].data.response[0]).sort(((e,a)=>B.indexOf(e)-B.indexOf(a)));F(a)})).catch((e=>console.log(e))).finally((()=>A(!1))),()=>{C.setConfig({show:!1})}}),[]),(0,s.useEffect)((()=>{Object.keys(T).length>0&&(null===T||void 0===T?void 0:T.percentOff)>0&&null!==T&&void 0!==T&&T.name&&C.setConfig({show:!0,className:"alert-success border-0 text-dark",type:"success",dismissible:!0,heading:(0,f.jsx)(x,{}),content:(0,f.jsx)(M,{values:{n:null===T||void 0===T?void 0:T.percentOff,y:null===T||void 0===T?void 0:T.name}})})}),[T]),(0,s.useEffect)((()=>{if(null!==L&&void 0!==L&&L.planId){w(!0);const e=(()=>{const e=new FormData;return e.append("razorPayCustomerId",H.razorPayCustomerId),m.A.post("/payments/checkDiscounts",e)})(),a=((new FormData).append("country",N.userConfig.country),m.A.get("/payments/checkTaxes")),t=(()=>{const e=new FormData;return e.append("razorPayCustomerId",N.userConfig.razorPayCustomerId),e.append("razorPayPlanId",H.razorPayPlanId),m.A.post("/payments/deductExhaustedUsage",e)})();Promise.all([e,a,t]).then((e=>{const a=e[0].data.response,t=a.name;let s=a.value/100*L[E[H.cycle].prop];s=-Number(s.toFixed(2));const l=e[1].data.response,n=l.name;let r=l.value/100*L[E[H.cycle].prop];r=Number(r.toFixed(2));const i=e[2].data.response,{adjustmentCredit:o}=i;R((e=>({...e,invoice:e.invoice.map((e=>("discount"===e.id&&Object.assign(e,{title:t&&(null===a||void 0===a?void 0:a.value)>0?`${t} - ${null===a||void 0===a?void 0:a.value}%`:null,value:s}),"tax"===e.id&&Object.assign(e,{title:n,value:r}),"creditAdjustment"===e.id?Object.assign(e,{value:o}):e)))})))})).catch((e=>console.log(e))).finally((()=>w(!1)))}}),[L.planId,H.cycle]);const W=e=>{let{planPriceMonthly:t,planPriceYearly:s,isPlanOptable:l,planPriceCurrencySymbol:n}=e;return(0,f.jsxs)("div",{style:l?{}:{textDecoration:"line-through"},className:"d-flex align-items-center justify-content-center text-center",children:[(0,f.jsx)("div",{className:"pe-2",children:(0,f.jsx)(j,{amount:t,suffix:` / ${a.formatMessage({id:"month",defaultMessage:"month"})}`,symbol:n})}),(0,f.jsx)("div",{className:"w-50",children:(0,f.jsx)(j,{amount:s,suffix:` / ${a.formatMessage({id:"year",defaultMessage:"year"})}`,symbol:n})})]})},V=e=>{let{planTitle:a,planDescription:t}=e;return(0,f.jsxs)("div",{className:"text-center py-2",children:[(0,f.jsx)("div",{className:"fs-4",children:(0,f.jsx)(i.A,{id:a,defaultMessage:a})}),(0,f.jsx)("div",{style:{fontSize:"0.75rem"},children:(0,f.jsx)(i.A,{id:t,defaultMessage:t})})]})},Z=t=>{let{planName:s,planCode:l,isPlanOptable:n}=t;return(0,f.jsxs)("div",{className:"bni-bg rounded-top text-dark px-2 py-1 d-flex align-items-center justify-content-between",children:[(0,f.jsxs)("div",{style:n?{}:{textDecoration:"line-through"},children:[L.planCode===l&&(0,f.jsx)("i",{className:"fa fa-check-circle pe-1"}),(0,f.jsx)("span",{children:(0,f.jsx)(i.A,{id:s,defaultMessage:s})}),!n&&(0,f.jsx)(o.A,{placement:"right",delay:{show:250,hide:400},overlay:q(e,a.formatMessage({id:"maximumQuotaExceeded",defaultMessage:"maximumQuotaExceeded"})),triggerType:"hover",children:(0,f.jsx)("i",{className:"fa fa-info-circle ps-1 cursor-pointer"})})]}),N.userConfig.planCode===l&&(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:"badge rounded-pill bg-dark",children:(0,f.jsx)(i.A,{id:"currentPlan",defaultMessage:"currentPlan"})})})]})},q=(e,a)=>(0,f.jsx)(c.A,{id:`button-tooltip-${Math.random()}`,className:"in show",children:a}),G=e=>{var a,t,s,l;let{obj:n,t:r}=e;const i=_.filter((e=>e.key===n)),o=null===(a=i[0])||void 0===a?void 0:a.label;let c="";return c="numericNull"===(null===(t=i[0])||void 0===t?void 0:t.type)?null!==r[n]?r[n]:(0,f.jsx)("span",{className:"text-success",children:"\u221e"}):"bytesOrNull"===(null===(s=i[0])||void 0===s?void 0:s.type)?null!==r[n]?r[n]/1024/1024+" MB":(0,f.jsx)("span",{className:"text-success",children:"\u221e"}):"boolean"===(null===(l=i[0])||void 0===l?void 0:l.type)?r[n]?(0,f.jsx)("i",{className:"fa fa-check text-success"}):(0,f.jsx)("i",{className:"fa fa-times text-danger"}):r[n],(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-between pb-1",children:[(0,f.jsx)("div",{children:o}),(0,f.jsx)("div",{children:c})]})},K=()=>(0,f.jsx)("div",{className:"relativeSpinner middle",children:(0,f.jsx)(g.A,{})}),X=e=>{O(e),ee(e),setTimeout((()=>{window.scrollTo(0,document.body.scrollHeight)}),1e3)},ee=e=>{if(e.isPlanOptable){const a=k.filter((a=>a.planCode===e.planCode))[0].planPriceMonthly,t=k.filter((a=>a.planCode===e.planCode))[0].pricingMonthId;R((e=>({...e,razorPayPlanId:t,cycle:U[0].value,invoice:e.invoice.map((e=>"price"===e.id?Object.assign(e,{value:a}):e))})))}},ae=e=>Number(e.planPriceMonthly)&&Number(e.planPriceYearly)?(0,f.jsx)("button",{onClick:()=>X(e),disabled:!e.isPlanOptable,className:"w-100 btn btn-bni p-1 rounded-top-0 border-0",title:"Subscribe now",children:(0,f.jsx)(W,{planPriceMonthly:e.planPriceMonthly,planPriceYearly:e.planPriceYearly,isPlanOptable:e.isPlanOptable,planPriceCurrencySymbol:e.planPriceCurrencySymbol})}):(0,f.jsx)("button",{disabled:!e.isPlanOptable,className:"w-100 btn btn-bni rounded-top-0 border-0 py-1",children:(0,f.jsx)("div",{className:"py-1",children:(0,f.jsx)(i.A,{id:"free",defaultMessage:"free"})})});return(0,f.jsx)(s.Suspense,{fallback:K(),children:(0,f.jsxs)(v.Provider,{value:{summary:H,setSummary:R,cycleList:U,table:k,selectedPlan:L,cycleRef:E,total:Q,billingLoader:I,showSessionPopup:Y,setShowSessionPopup:J,subscribeLoader:D,setSubscribeLoader:$},children:[Y&&(0,f.jsx)(h,{}),(0,f.jsxs)("div",{className:"container-fluid",children:[(0,f.jsx)("div",{className:`bg-gradient ${"dark"===N.userData.theme?"bg-dark darkBoxShadow":"bg-white lightBoxShadow"} mt-2 ps-3 py-2 rounded-pill mb-4`,children:(0,f.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)("i",{className:"fa fa-credit-card-alt fa-1x"}),(0,f.jsx)("div",{className:"ps-2 mb-0",children:(0,f.jsx)(i.A,{id:"billing",defaultMessage:"billing"})})]})})}),S&&K(),!S&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{children:k&&k.length>0&&(0,f.jsx)(d.A,{className:"",children:k.map(((e,a)=>(0,f.jsx)(u.A,{md:6,lg:3,className:"pb-3",children:(0,f.jsxs)("div",{className:`rounded-3 border ${"dark"===N.userData.theme?"border-black":"border-1"} ${e.isPlanOptable?"cursor-pointer":"cursor-not-allowed"} ${L.planCode===e.planCode?"animate__animated animate__headShake":""}`,style:L.planCode===e.planCode?{boxShadow:"0 2px 10px 0 #000"}:{},onClick:()=>e.isPlanOptable&&X(e),children:[(0,f.jsx)(Z,{...e}),(0,f.jsx)(V,{...e}),(0,f.jsx)("div",{className:"p-2",children:z.filter((e=>!["planId","planCode","planName","planTitle","planDescription","planIsActive","planPriceMonthly","planPriceYearly","planPriceCurrencySymbol","pricingMonthId","pricingYearId"].includes(e))).map(((a,t)=>(0,f.jsx)(G,{obj:a,t:e},t)))}),(0,f.jsx)(ae,{...e})]})},a)))})}),(0,f.jsx)(b,{}),(0,f.jsx)("hr",{className:"mt-5"}),(0,f.jsx)(d.A,{children:(0,f.jsx)(u.A,{sm:6,children:(0,f.jsx)(y,{})})})]})]})]})})}},2083:(e,a,t)=>{t.d(a,{A:()=>l});const s={self:void 0,sageHeaderAndList:(e,a)=>{const t=e.filter((e=>Number(e[a])>1));return[e.filter((e=>1===Number(e[a])))[0],t]},loadRandomSpinnerIcon:()=>"Oval",stringToCapitalize:e=>e.split("_").map((e=>e.substring(0,1).toUpperCase()+e.substring(1,e.length))).join(" "),donutChartColors:["#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b","#f44336"],indianLacSeperator:(e,a)=>e.toLocaleString("en-IN",{maximumFractionDigits:a,style:"currency",currency:"INR"}),countryCurrencyLacSeperator:(e,a,t,s)=>Number(t).toLocaleString(e,{maximumFractionDigits:s,minimumFractionDigits:s,style:a?"currency":"decimal",...a&&{currency:a}}),lacSeperator:function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-IN";return null===e||void 0===e?void 0:e.toLocaleString(a)},strToNumMonth:{Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},monthToStr:{"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},fullmonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],threeDigitMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],leadingZeros:e=>{const a=Number(e);return a<10?`0${a}`:a},dateToMonthYear:e=>{const a=new Date(e);return`${s.threeDigitMonthNames[a.getMonth()]}-${a.getFullYear()}`},addMonths:(e,a)=>{if(e&&a){let[t,s]=["",(e=new Date(+e)).getDate()];e.setMonth(e.getMonth()+a,1),t=e.getMonth(),e.setDate(s),e.getMonth()!==t&&e.setDate(0)}return e},getNextMonthDate:e=>{const a=new Date;let t=a.getFullYear(),s=a.getMonth()+2;s>12&&(t+=1,s=1);const l=new Date(`${t}-${s}-01`);let n=l.getMonth()+1;n=n<10?`0${n}`:n;const r=e<10?`0${e}`:e;return`${l.getFullYear()}-${n}-${r}`},getNow:()=>{const e=e=>{const a=Number(e);return a<10?`0${a}`:a},a=new Date;return`${a.getFullYear()}-${e(a.getMonth()+1)}-${e(a.getDate())} ${e(a.getHours())}:${e(a.getMinutes())}:${e(a.getSeconds())}`},dateToYYYYMMDD:e=>{const a=e=>{const a=Number(e);return a<10?`0${a}`:a};return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())}`},stripCommasInCSV:e=>e.map((e=>{const a=Object.keys(e).map((a=>({[a]:String(e[a]).replace(/,/g,"")})));return Object.assign({},{},...a)})),chunkArray:(e,a)=>e.map(((t,s)=>e.slice(s*a,s*a+a))).filter((e=>e.length>0)),shorten:(e,a)=>e&&e.length>a?e.slice(0,Math.ceil(a/2))+"..."+e.slice(-10,e.length):e},l=s}}]);