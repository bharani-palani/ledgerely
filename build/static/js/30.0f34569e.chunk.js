(this["webpackJsonpbni-apps"]=this["webpackJsonpbni-apps"]||[]).push([[30],{1104:function(e,a,t){"use strict";t.r(a);var n=t(30),i=t(43),d=t(36),o=t(25),r=t(27),c=t(1),u=t(52),m=t.n(u),l=t(48),_=t(779),s=t(1291),b=t(46),f=t(41),h=t(39),v=t(86),p=t(95),j=t(0),O=Object(c.lazy)((function(){return t.e(11).then(t.bind(null,264)).then((function(e){return{default:e.VerticalPanes}}))})),g=Object(c.lazy)((function(){return t.e(11).then(t.bind(null,264)).then((function(e){return{default:e.Pane}}))})),I=Object(c.lazy)((function(){return Promise.all([t.e(6),t.e(31),t.e(69)]).then(t.bind(null,1188))})),w=Object(c.lazy)((function(){return t.e(61).then(t.bind(null,1189))})),k=Object(c.lazy)((function(){return Promise.all([t.e(1),t.e(18)]).then(t.bind(null,1190))})),S=Object(c.lazy)((function(){return t.e(32).then(t.bind(null,1251))})),x=Object(c.lazy)((function(){return Promise.all([t.e(2),t.e(5),t.e(6),t.e(24),t.e(28)]).then(t.bind(null,1241))}));a.default=function(e){var a,t=Object(_.a)(),u=Object(c.useRef)(null),y=Object(c.useContext)(h.a),L=[{id:Object(s.a)(),order:0,label:"".concat(t.formatMessage({id:"sheet",defaultMessage:"sheet"})," 1"),charts:[],zoom:100}],R=Object(c.useState)(L),B=Object(r.a)(R,2),F=B[0],D=B[1],z=Object(c.useState)(""),C=Object(r.a)(z,2),E=C[0],N=C[1],T=Object(c.useState)(""),M=Object(r.a)(T,2),P=M[0],U=M[1],J=Object(c.useState)(!1),A=Object(r.a)(J,2),W=A[0],H=A[1],Z=Object(c.useState)({start:"10%",middle:"75%",end:"20%",expanded:!0}),Q=Object(r.a)(Z,2),V=Q[0],X=Q[1],Y=Object(c.useState)({id:null,name:"",appId:y.userConfig.appId,isSaved:!0}),q=Object(r.a)(Y,2),G=q[0],K=q[1],$=Object(c.useState)(!1),ee=Object(r.a)($,2),ae=ee[0],te=ee[1],ne=Object(c.useState)([]),ie=Object(r.a)(ne,2),de=ie[0],oe=ie[1],re=function(){var e=new FormData;e.append("appId",y.userConfig.appId),b.a.post("workbook/getSavedQueryLists",e).then((function(e){var a=e.data;H(a.response)})).catch((function(e){return y.renderToast({type:"error",icon:"fa fa-times-circle",position:"bottom-center",message:t.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}))},ce=function(e){var a=F.map((function(a){return a.id===E&&(a.charts=a.charts.filter((function(a){return a.id!==e}))),a}));D(a),K((function(e){return Object(o.a)(Object(o.a)({},e),{},{isSaved:!1})}))},ue=function(){var e=Object(d.a)(Object(n.a)().mark((function e(a){var d,r,c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(d=F.filter((function(e){return e.id===E}))[0])||void 0===d?void 0:d.charts).length<f.c.chartLimit?(r=Object(s.a)(),c=F.map((function(e){return e.id===E&&(e.charts=[].concat(Object(i.a)(e.charts),[Object(o.a)(Object(o.a)({},a),{},{id:r,x:0,y:0,z:0})])),e})),D(c),setTimeout((function(){U(r),K((function(e){return Object(o.a)(Object(o.a)({},e),{},{isSaved:!1})}))}),100)):y.renderToast({type:"warn",icon:"fa fa-exclamation-triangle",position:"bottom-center",message:t.formatMessage({id:"chartLimitExceeded",defaultMessage:"chartLimitExceeded"})});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),me=function(e){e.preventDefault(),e.stopImmediatePropagation();return e.returnValue="",e.returnValue},le=function(e){if("Delete"===e.key||"Backspace"===e.key){var a=Object(i.a)(document.body.classList);u.current&&!a.includes("modal-open")&&ce(P)}};Object(c.useEffect)((function(){re()}),[]),Object(c.useEffect)((function(){return G.isSaved||window.addEventListener("beforeunload",me,{capture:!0}),function(){window.removeEventListener("beforeunload",me,{capture:!0})}}),[G]),Object(c.useEffect)((function(){return Object(i.a)(F).map((function(e){return e.charts.filter((function(e){return e.id===P})).length>0})).every((function(e){return!1===e}))&&U(""),document.body.addEventListener("keydown",le),function(){document.body.removeEventListener("keydown",le)}}),[F,P]);var _e=Object(p.a)(),se={fetch:_e.get("fetch"),wbId:_e.get("wbId")};Object(c.useEffect)((function(){if("workbook"===se.fetch&&se.wbId){var e=new FormData;e.append("id",se.wbId),e.append("appId",y.userConfig.appId),b.a.post("workbook/fetchWorkbookById",e).then((function(e){var a=e.data,t=JSON.parse(a.response.wb_object);D(t),K((function(e){return Object(o.a)(Object(o.a)({},e),{},{id:a.response.wb_id,name:a.response.wb_name,isSaved:!0})})),setTimeout((function(){var e,a,n;N(null===(e=t[0])||void 0===e?void 0:e.id),U(null===(a=t[0])||void 0===a||null===(n=a.charts[0])||void 0===n?void 0:n.id)}),100)})).catch((function(){}))}}),[JSON.stringify(se)]);return Object(j.jsx)(c.Suspense,{fallback:Object(j.jsx)("div",{className:"relativeSpinner",children:Object(j.jsx)(m.a,{type:l.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})}),children:Object(j.jsxs)(v.a.Provider,{value:{defaultSheet:L,sheets:F,setSheets:D,theme:y.userData.theme,activeSheet:E,setActiveSheet:N,activeChart:P,setActiveChart:U,deleteChart:ce,cloneChart:ue,workbookRef:u,file:G,setFile:K,saveLoading:ae,setSaveLoading:te,savedWorkbooks:de,setSavedWorkbooks:oe,savedQueryList:W,setSavedQueryList:H,fetchSavedQueryList:re},children:[Object(j.jsx)(w,{}),Object(j.jsxs)("div",{className:"workbook container-fluid small d-none d-sm-block",ref:u,children:[Object(j.jsxs)(O,{theme:y.userData.theme,className:"border border-1 ".concat(null===y||void 0===y||null===(a=y.userConfig)||void 0===a?void 0:a.webMenuType," ").concat("dark"===y.userData.theme?"border-secondary":""," rounded-top"),children:[Object(j.jsx)(g,{width:V.start,className:"text-center overflow-auto",children:Object(j.jsx)(k,{})}),Object(j.jsx)(g,{width:P?V.middle:"100%",className:"border border-1 ".concat("dark"===y.userData.theme?"border-secondary":""," border-top-0 border-bottom-0"),children:Object(j.jsx)(S,{})}),P&&Object(j.jsxs)(g,{width:V.end,className:"position-relative",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-bni position-absolute",style:Object(o.a)({left:"-30px",paddingBottom:"2px"},V.expanded?{borderRadius:"0"}:{borderRadius:"0 0.25rem 0 0"}),onClick:function(){X((function(e){return Object(o.a)(Object(o.a)({},e),{},{middle:V.expanded?"95%":"75%",end:V.expanded?"0%":"25%",expanded:!V.expanded})}))},children:Object(j.jsx)("i",{className:"fa fa-arrow-".concat(V.expanded?"right":"left")})}),Object(j.jsx)("div",{className:"",style:Object(o.a)({},V.expanded?{display:"block"}:{display:"none"}),children:Object(j.jsx)(x,{})})]})]}),Object(j.jsx)(I,{})]})]})})}},41:function(e,a,t){"use strict";t.d(a,"g",(function(){return o})),t.d(a,"e",(function(){return i})),t.d(a,"f",(function(){return d})),t.d(a,"d",(function(){return r})),t.d(a,"b",(function(){return c})),t.d(a,"a",(function(){return u})),t.d(a,"c",(function(){return m}));var n=t(40),i="#c2d82e",d="#000000",o=n.N("body").append("div").attr("class","tooltip").attr("role","tooltip").style("position","absolute").style("background","#222222").style("border-radius","5px").style("color","#ffffff"),r=[{id:"animate__animated animate__bounce",value:"Bounce"},{id:"animate__animated animate__flash",value:"Flash"},{id:"animate__animated animate__pulse",value:"Pulse"},{id:"animate__animated animate__rubberBand",value:"Rubberband"},{id:"animate__animated animate__shakeX",value:"Shake horizontal"},{id:"animate__animated animate__shakeY",value:"Shake vertical"},{id:"animate__animated animate__headShake",value:"Headshake"},{id:"animate__animated animate__swing",value:"Swing"},{id:"animate__animated animate__tada",value:"Tada"},{id:"animate__animated animate__wobble",value:"Wobble"},{id:"animate__animated animate__jello",value:"Jello"},{id:"animate__animated animate__heartBeat",value:"Heart beat"},{id:"animate__animated animate__backInDown",value:"Back in down"},{id:"animate__animated animate__backInLeft",value:"Back in left"},{id:"animate__animated animate__backInRight",value:"Back in right"},{id:"animate__animated animate__backInUp",value:"Back in up"},{id:"animate__animated animate__bounceIn",value:"Bounce in"},{id:"animate__animated animate__bounceInDown",value:"Bounce in down"},{id:"animate__animated animate__bounceInLeft",value:"Bounce in left"},{id:"animate__animated animate__bounceInRight",value:"Bounce in right"},{id:"animate__animated animate__bounceInUp",value:"Bounce in up"},{id:"animate__animated animate__fadeIn",value:"Fade in"},{id:"animate__animated animate__fadeInDown",value:"Fade in down"},{id:"animate__animated animate__fadeInDownBig",value:"Fade in down big"},{id:"animate__animated animate__fadeInLeft",value:"Fade in left"},{id:"animate__animated animate__fadeInLeftBig",value:"Fadeinleftbig"},{id:"animate__animated animate__fadeInRight",value:"Fade in right"},{id:"animate__animated animate__fadeInRightBig",value:"Fade in right big"},{id:"animate__animated animate__fadeInUp",value:"Fade in up"},{id:"animate__animated animate__fadeInUpBig",value:"Fade in up big"},{id:"animate__animated animate__fadeInTopLeft",value:"Fade in top left"},{id:"animate__animated animate__fadeInTopRight",value:"Fade in top right"},{id:"animate__animated animate__fadeInBottomLeft",value:"Fade in bottom left"},{id:"animate__animated animate__fadeInBottomRight",value:"Fade in bottom right"},{id:"animate__animated animate__flip",value:"Flip"},{id:"animate__animated animate__flipInX",value:"Flipin horizontal"},{id:"animate__animated animate__flipInY",value:"Flipin vertical"},{id:"animate__animated animate__lightSpeedInRight",value:"Light speed in right"},{id:"animate__animated animate__lightSpeedInLeft",value:"Light speed in left"},{id:"animate__animated animate__rotateIn",value:"Rotate in"},{id:"animate__animated animate__rotateInDownLeft",value:"Rotate in down left"},{id:"animate__animated animate__rotateInDownRight",value:"Rotate in down right"},{id:"animate__animated animate__rotateInUpLeft",value:"Rotate in up left"},{id:"animate__animated animate__rotateInUpLeft",value:"Rotate in up left"},{id:"animate__animated animate__jackInTheBox",value:"Jack in the box"},{id:"animate__animated animate__rollIn",value:"Roll in"},{id:"animate__animated animate__zoomIn",value:"Zoom in"},{id:"animate__animated animate__zoomInDown",value:"Zoom in down"},{id:"animate__animated animate__zoomInLeft",value:"Zoom in left"},{id:"animate__animated animate__zoomInRight",value:"Zoom in right"},{id:"animate__animated animate__zoomInUp",value:"Zoom in up"},{id:"animate__animated animate__slideInDown",value:"Slide in down"},{id:"animate__animated animate__slideInLeft",value:"Slide in left"},{id:"animate__animated animate__slideInRight",value:"Slide in right"},{id:"animate__animated animate__slideInUp",value:"Slide in up"}],c={0:"CIRCULAR",1:"BAR",2:"DISTRIBUTION",3:"CORRELATION",4:"SHAPES",5:"EMOJI"},u={minWidth:100,maxWidth:1e3,minHeight:100,maxHeight:1e3},m={chartLimit:Math.pow(2,5),sheetLimit:Math.pow(2,4)}},86:function(e,a,t){"use strict";var n=t(1),i=t.n(n).a.createContext({});a.a=i},95:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(1),i=t(72),d=function(){var e=Object(i.h)().search;return Object(n.useMemo)((function(){return new URLSearchParams(e)}),[e])}}}]);