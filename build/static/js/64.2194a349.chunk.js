(this["webpackJsonpbni-apps"]=this["webpackJsonpbni-apps"]||[]).push([[64],{1104:function(e,a,t){"use strict";t.r(a);var n=t(25),s=t(29),r=t(35),o=t(27),c=t(1),i=t(97),l=t(1265),d=t(224),u=t(92),p=t(108),f=t(47),m=t(52),b=t.n(m),g=t(48),h=t(38),j=t(65),x=t(440),v=t(71),O=t(73),y=t(187),w=t(61),T=t(132),M=t(0),S=function(e){var a,t=e.intl,m=Object(c.useContext)(v.a);document.title="".concat(m.appName," - ").concat(t.formatMessage({id:"schedules",defaultMessage:"schedules"}));var x,S=Object(c.useState)([]),_=Object(o.a)(S,2),C=_[0],k=_[1],N=Object(c.useState)(!1),P=Object(o.a)(N,2),R=P[0],E=P[1],D=Object(c.useContext)(h.a),A=Object(c.useContext)(j.a),I=Object(c.useContext)(O.a),F=Object(c.useState)({start:0,limit:10,searchString:""}),V=Object(o.a)(F,2),L=V[0],W=V[1],H={income_expense_template:[{template_id:"",temp_inc_exp_name:"",temp_amount:"0.00",temp_inc_exp_type:"Dr",temp_inc_exp_date:"1",temp_category:"",temp_bank:""}]},J=function(e,a){var t=new FormData;return t.append("TableRows",a),t.append("Table",e),t.append("limit",L.limit),t.append("start",L.start),t.append("searchString",L.searchString),t.append("WhereClause","temp_appId = '".concat(D.userConfig.appId,"'")),f.a.post("/account_planner/getAccountPlanner",t)},K=function(){var e=Object(r.a)(Object(s.a)().mark((function e(a){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k([]),E(!0),t=J(a.Table,a.TableRows),Promise.all([t]).then(function(){var e=Object(r.a)(Object(s.a)().mark((function e(t){var n,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(n=t[0].data.response)||void 0===n||null===(r=n.table)||void 0===r?void 0:r.length)>0?k(t[0].data.response):k({table:H[a.Table]});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).finally((function(){return E(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),B=function(){return Object(M.jsx)("div",{className:"relativeSpinner middle",children:Object(M.jsx)(b.a,{type:g.a.loadRandomSpinnerIcon(),color:document.documentElement.style.getPropertyValue("--app-theme-bg-color"),height:100,width:100})})},U={incExpTemp:["id","name","amount","type","date","category","bank"]},q={incExpTemp:["checkbox","textbox","number",{radio:{radioList:[{label:t.formatMessage({id:"credit",defaultMessage:"credit"}),value:"Cr",checked:!1},{label:t.formatMessage({id:"debit",defaultMessage:"debit"}),value:"Dr",checked:!0}]}},{fetch:{dropDownList:new Array(28).fill("_").map((function(e,a){return{checked:"1"===String(a+1),id:String(a+1),value:String(a+1)}})),searchable:!0}},"textbox","textbox"]},z=p.b.filter((function(e){return"incExpTemp"===e.id})).map((function(e){var a={header:{searchPlaceholder:t.formatMessage({id:"searchHere",defaultMessage:"searchHere"}),searchable:!0},footer:{total:{locale:I.localeLanguage,currency:I.localeCurrency,maxDecimal:2},pagination:{currentPage:"last",maxPagesToShow:5}}};return e.config=a,e.TableAliasRows=U[e.id].map((function(e){return t.formatMessage({id:e,defaultMessage:e})})),e.rowElements=q[e.id],e})),G={incExpTemp:"temp_appId"};return Object(c.useEffect)((function(){K(p.b.filter((function(e){return"incExpTemp"===e.id}))[0])}),[L]),Object(M.jsx)(l.a,{fluid:!0,children:Object(M.jsxs)("div",{className:"settings",children:[Object(M.jsx)(T.a,{icon:"fa fa-calendar",intlId:"schedules",children:(null===C||void 0===C||null===(a=C.table)||void 0===a?void 0:a.length)>0&&Object(M.jsx)(y.a,{datas:g.a.stripCommasInCSV(null===C||void 0===C?void 0:C.table),filename:"schedules.csv",className:"d-inline",children:Object(M.jsx)(d.a,{placement:"left",delay:{show:250,hide:400},overlay:(x=t.formatMessage({id:"download",defaultMessage:"download"}),Object(M.jsx)(i.a,{id:"button-tooltip-".concat(Math.random()),className:"in show",children:x})),triggerType:"hover",children:Object(M.jsx)("i",{className:"fa fa-download pe-3"})})})}),R&&Object(M.jsx)(B,{}),z.sort((function(e,a){return e.id-a.id})).map((function(e,a){var s;return Object(M.jsx)("div",{children:(null===C||void 0===C||null===(s=C.table)||void 0===s?void 0:s.length)>0&&Object(M.jsxs)("div",{className:"pt-2",children:[Object(M.jsx)("div",{className:"text-end"}),Object(M.jsx)(u.a,{className:"pt-2",config:e.config,Table:e.Table,TableRows:e.TableRows,TableAliasRows:e.TableAliasRows,rowElements:e.rowElements,defaultValues:e.defaultValues,dbData:C,postApiUrl:"/account_planner/postAccountPlanner",onPostApi:function(a){return function(e,a){var n=e.status,s=e.data;if(200===n){if(e&&s&&"boolean"===typeof s.response&&null!==s.response&&s.response&&D.renderToast({message:t.formatMessage({id:"transactionSavedSuccessfully",defaultMessage:"transactionSavedSuccessfully"})}),e&&s&&"boolean"===typeof s.response&&null!==s.response&&!1===s.response&&D.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:"noFormChangeFound",defaultMessage:"noFormChangeFound"})}),e&&s&&null===s.response&&A.setConfig({show:!0,className:"alert-danger border-0 text-dark",type:"danger",dismissible:!0,heading:Object(M.jsx)(w.b,{}),content:Object(M.jsx)(w.a,{})}),e&&s&&"object"===typeof s.response&&null!==s.response){var r;r=1451===s.response.number?"foreignKeyDeleteMessage":"",D.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:r,defaultMessage:r})})}}else D.renderToast({type:"error",icon:"fa fa-times-circle",message:t.formatMessage({id:"unableToReachServer",defaultMessage:"unableToReachServer"})})}(a,e.id)},apiParams:L,onChangeParams:function(e){return function(e){W((function(a){return Object(n.a)(Object(n.a)({},a),e)}))}(e)},onReFetchData:function(){return K(e)},cellWidth:e.cellWidth,ajaxButtonName:t.formatMessage({id:"submit",defaultMessage:"submit"}),appIdKeyValue:{key:G[e.id],value:D.userConfig.appId},theme:D.userData.theme},a)]})},a)}))]})})};S.defaultProps={property:"String name"},a.default=Object(x.c)(S)}}]);