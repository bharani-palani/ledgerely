{"version":3,"sources":["components/shared/D3/VerticalBarChart.js"],"names":["VerticalBarChart","props","svgRef","useRef","width","height","marginTop","marginRight","marginBottom","marginLeft","fillColor","fontColor","lineColor","yAxisLabel","xAxisLabel","padding","style","tooltipPrefix","tooltipSuffix","showTooltip","data","showYaxisLine","showXaxis","showXaxisLabel","showYaxis","showYaxisLabel","showLegend","sortClause","showAnimation","animationDuration","xAxisTicksOrientation","onClick","fontSize","yTicks","useEffect","isNaN","order","arguments","length","undefined","d3","_ref","d","_slicedToArray","Number","value","label","_ref3","map","sortBy","x","domain","range","xAxis","tickSizeOuter","y","nice","svg","current","attr","call","extent","scaleExtent","translateExtent","on","event","transform","applyX","selectAll","bandwidth","remove","append","join","i","e","tooltip","html","concat","toLocaleString","minimumFractionDigits","maximumFractionDigits","pageX","pageY","transition","duration","text","g","ticks","tickFormat","select","JSON","stringify","_jsx","ref","defaultProps","verticalBarChartProps"],"mappings":"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","file":"static/js/15.2d0071d1.chunk.js","sourcesContent":["import React, { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport { tooltip } from \"./constants\";\nimport PropTypes from \"prop-types\";\nimport { verticalBarChartProps } from \"./propsData\";\n\nconst VerticalBarChart = props => {\n  const svgRef = useRef(null);\n  const {\n    width,\n    height,\n    marginTop,\n    marginRight,\n    marginBottom,\n    marginLeft,\n    fillColor,\n    fontColor,\n    lineColor,\n    yAxisLabel,\n    xAxisLabel,\n    padding,\n    style,\n    tooltipPrefix,\n    tooltipSuffix,\n    showTooltip,\n    data,\n    showYaxisLine,\n    showXaxis,\n    showXaxisLabel,\n    showYaxis,\n    showYaxisLabel,\n    showLegend,\n    sortClause,\n    showAnimation,\n    animationDuration,\n    xAxisTicksOrientation,\n    onClick,\n    fontSize,\n    yTicks,\n  } = props;\n\n  const sortBy = (clause = null) => {\n    switch (clause) {\n      case \"desc\":\n        return d3.groupSort(\n          data,\n          ([d]) => -Number(d.value),\n          d => d.label,\n        );\n      case \"asc\":\n        return d3.groupSort(\n          data,\n          ([d]) => Number(d.value),\n          d => d.label,\n        );\n      default:\n        return data.map(d => d.label);\n    }\n  };\n\n  useEffect(() => {\n    if (!isNaN(width)) {\n      const order = sortBy(sortClause);\n      // Declare the x (horizontal position) scale.\n      const x = d3\n        .scaleBand()\n        .domain(order)\n        .range([marginLeft, width - marginRight])\n        .padding(padding);\n\n      const xAxis = d3.axisBottom(x).tickSizeOuter(0);\n\n      // Declare the y (vertical position) scale.\n      const y = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, d => Number(d.value))])\n        .nice()\n        .range([height - marginBottom, marginTop]);\n\n      const zoom = svg => {\n        const extent = [\n          [marginLeft, marginTop],\n          [width - marginRight, height - marginTop],\n        ];\n\n        svg.call(\n          d3\n            .zoom()\n            .scaleExtent([1, 8])\n            .translateExtent(extent)\n            .extent(extent)\n            .on(\"zoom\", event => {\n              x.range(\n                [marginLeft, width - marginRight].map(d =>\n                  event.transform.applyX(d),\n                ),\n              );\n              svg\n                .selectAll(\".bars rect\")\n                .attr(\"x\", d => x(d.label))\n                .attr(\"width\", x.bandwidth());\n              svg.selectAll(\".x-axis\").call(xAxis);\n              svg\n                .selectAll(\".legends text\")\n                .attr(\"x\", d => x(d.label))\n                .attr(\"width\", x.bandwidth());\n              svg.selectAll(\".x-axis\").call(xAxis);\n            }),\n        );\n      };\n      // Create the SVG container.\n      const svg = d3\n        .select(svgRef.current)\n        .attr(\"width\", width)\n        .attr(\"height\", height + 10)\n        .attr(\"viewBox\", [0, 0, width, height])\n        .call(zoom);\n\n      // Add a rect for each bar.\n      svg.selectAll(`.bars`).remove();\n      svg.selectAll(`.legends`).remove();\n      svg\n        .append(\"g\")\n        .attr(\"class\", \"bars\")\n        .selectAll()\n        .data(data)\n        .join(\"rect\")\n        .on(\"click\", (d, i) => {\n          onClick(d, i);\n        })\n        .on(\"mousemove\", (e, d) => {\n          if (showTooltip) {\n            tooltip.style(\"padding\", \"5px\");\n            tooltip.style(\"opacity\", 1);\n            tooltip\n              .html(\n                `<div>${tooltipPrefix}<div><div>${d.label}</div><div>${Number(\n                  d.value,\n                ).toLocaleString(\"en-US\", {\n                  minimumFractionDigits: 2,\n                  maximumFractionDigits: 2,\n                })}</div><div>${tooltipSuffix}</div>`,\n              )\n              .style(\"left\", e.pageX + 10 + \"px\")\n              .style(\"top\", e.pageY - 50 + \"px\");\n          }\n        })\n        .on(\"mouseout\", d => {\n          tooltip.style(\"padding\", 0);\n          tooltip.style(\"opacity\", 0);\n        })\n        .attr(\"width\", x.bandwidth())\n        .attr(\"x\", d => x(d.label))\n        // .attr(\"y\", 0)\n        // .attr(\"height\", 0)\n        .transition()\n        .duration((d, i) => (showAnimation ? animationDuration + i * 10 : i))\n        .attr(\"fill\", fillColor)\n        .attr(\"y\", d => y(d.value))\n        .attr(\"height\", d => y(0) - y(d.value));\n\n      if (showLegend) {\n        svg\n          .append(\"g\")\n          .attr(\"class\", \"legends\")\n          .selectAll()\n          .data(data)\n          .join(\"text\")\n          .text(d => d.value)\n          .attr(\"width\", x.bandwidth())\n          .transition()\n          .duration((d, i) => (showAnimation ? animationDuration + i * 10 : i))\n          .attr(\"fill\", fontColor)\n          .attr(\"font-size\", fontSize)\n          .attr(\"x\", d => x(d.label))\n          .attr(\"y\", d => y(d.value) - 5)\n          .attr(\"height\", d => y(0) - y(d.value));\n      }\n\n      // Add the x-axis and label.\n      svg.selectAll(`#x-axis`).remove();\n      if (showXaxis) {\n        svg\n          .append(\"g\")\n          .attr(\"id\", \"x-axis\")\n          .attr(\"class\", \"x-axis\")\n          .attr(\"transform\", `translate(0,${height - marginBottom})`)\n          .call(xAxis)\n          .call(g =>\n            showXaxisLabel\n              ? g\n                  .append(\"text\")\n                  .style(\"text-anchor\", \"start\")\n                  .attr(\"font-size\", fontSize)\n                  .attr(\"x\", width / 2)\n                  .attr(\"y\", marginBottom)\n                  .attr(\"fill\", fontColor)\n                  .text(xAxisLabel)\n              : g,\n          );\n        if (xAxisTicksOrientation === \"vertical\") {\n          svg\n            .selectAll(\".x-axis .tick text\")\n            .attr(\"font-size\", fontSize)\n            .style(\"text-anchor\", \"end\")\n            .attr(\"y\", \"15\")\n            .attr(\"dx\", \"-1em\")\n            .attr(\"dy\", \".15em\")\n            .attr(\"transform\", \"rotate(-60)\");\n        }\n      }\n\n      // Add the y-axis and x-axis label\n      svg.selectAll(`#y-axis`).remove();\n      if (showYaxis) {\n        svg\n          .append(\"g\")\n          .attr(\"id\", \"y-axis\")\n          .attr(\"class\", \"y-axis\")\n          .attr(\"transform\", `translate(${marginLeft},0)`)\n          .call(d3.axisLeft(y).ticks(yTicks).tickFormat(d3.format(\".2s\")))\n          .call(g => (!showYaxisLine ? g.select(\".domain\").remove() : g))\n          .call(g =>\n            showYaxisLabel\n              ? g\n                  .append(\"text\")\n                  .style(\"text-anchor\", \"middle\")\n                  .attr(\"font-size\", fontSize)\n                  .attr(\"x\", -((height - marginBottom) / 2))\n                  .attr(\"y\", -(marginLeft - 20))\n                  .attr(\"fill\", fontColor)\n                  .attr(\"transform\", \"rotate(270)\")\n                  .text(yAxisLabel)\n              : g,\n          );\n\n        svg.selectAll(\".domain\").attr(\"stroke\", lineColor);\n        svg\n          .selectAll(\".tick text\")\n          .attr(\"stroke\", fontColor)\n          .attr(\"font-size\", fontSize)\n          .attr(\"fill\", fontColor);\n        svg.selectAll(\".tick line\").attr(\"stroke\", lineColor);\n      }\n    }\n  }, [JSON.stringify(props)]);\n\n  return <svg style={style} ref={svgRef} />;\n};\n\nVerticalBarChart.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  marginTop: PropTypes.number,\n  marginRight: PropTypes.number,\n  marginBottom: PropTypes.number,\n  marginLeft: PropTypes.number,\n  fillColor: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  fontColor: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  lineColor: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  yAxisLabel: PropTypes.string,\n  xAxisLabel: PropTypes.string,\n  padding: PropTypes.number,\n  style: PropTypes.object,\n  tooltipPrefix: PropTypes.string,\n  tooltipSuffix: PropTypes.string,\n  showTooltip: PropTypes.bool,\n  data: PropTypes.array,\n  showYaxisLine: PropTypes.bool,\n  showXaxis: PropTypes.bool,\n  showXaxisLabel: PropTypes.bool,\n  showYaxis: PropTypes.bool,\n  showYaxisLabel: PropTypes.bool,\n  showAnimation: PropTypes.bool,\n  showLegend: PropTypes.bool,\n  animationDuration: PropTypes.number,\n  sortClause: PropTypes.string,\n  xAxisTicksOrientation: PropTypes.string,\n  onClick: PropTypes.func,\n  fontSize: PropTypes.number,\n  yTicks: PropTypes.number,\n};\n\nVerticalBarChart.defaultProps = verticalBarChartProps;\n\nexport default VerticalBarChart;\n"],"sourceRoot":""}